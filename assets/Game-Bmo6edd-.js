import{w as Kr}from"./with-props-Cqy6QlFa.js";import{a as l,t as Ur,o as a,s as Pn,N as De}from"./chunk-AYJ5UCUI-BEyWwyKY.js";import{c as Ke,A as Br,H as Wr,a as Vr,b as Xe,C as Yr,P as Xr,d as qr,R as Zr,I as Jr,e as Qr,u as oe,f as es,g as re,h as F,i as he,j as En,k as Le,l as Ue,m as Ot,n as nt,o as Tt,p as ke,q as Sn,r as In,s as Nn,Q as ts,_ as ns,t as os,v as rs,D as ss}from"./index-BuhKfCdn.js";import{L as de,g as tn,i as as,c as is}from"./levels-BV42nuNV.js";import{u as ie,a as ct,b as ye,c as Lt,d as Se,e as ls,f as cs,v as us,I as nn,g as Rn,h as yt,i as ds,t as fs,j as ps,k as Mn,l as Rt,m as ot,T as hs}from"./time-CvuS7CAE.js";import{g as ms,u as me,B as gs,E as xs,T as vs,a as ys,b as bs,P as ut,c as ws,d as jn,e as An,o as _n,s as Dn,f as On,h as Tn,i as Ln,j as kn,l as zn,k as $n,m as Fn,n as Hn,p as Cs,q as Ps,r as Gn,N as Kn,t as Un,v as rt,M as Bn,L as Wn,A as Es,w as Ss,F as Is,x as Ns,G as Rs,S as Ms,y as js,K as As,z as _s,D as Ds,V as Os,R as Ts,C as Ls,H as ks,I as zs}from"./Value-C3g-KZEd.js";import{D as $s,a as Fs,b as Hs,c as Gs,d as Ks,e as Us,f as Bs,g as Ge,P as Ws,F as Vs,h as Ys}from"./index-OGfhM4Zv.js";import{R as Xs}from"./index-B7JuJiwu.js";const dt=l.createContext(null);dt.displayName="PanelGroupContext";const X={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},kt=10,Ie=l.useLayoutEffect,on=Ur.useId,qs=typeof on=="function"?on:()=>null;let Zs=0;function zt(e=null){const t=qs(),n=l.useRef(e||t||null);return n.current===null&&(n.current=""+Zs++),e??n.current}function Vn({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:s,forwardedRef:r,id:i,maxSize:c,minSize:u,onCollapse:f,onExpand:h,onResize:d,order:p,style:m,tagName:x="div",...v}){const y=l.useContext(dt);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:g,expandPanel:b,getPanelSize:C,getPanelStyle:P,groupId:M,isPanelCollapsed:I,reevaluatePanelConstraints:S,registerPanel:w,resizePanel:E,unregisterPanel:A}=y,T=zt(i),j=l.useRef({callbacks:{onCollapse:f,onExpand:h,onResize:d},constraints:{collapsedSize:n,collapsible:o,defaultSize:s,maxSize:c,minSize:u},id:T,idIsFromProps:i!==void 0,order:p});l.useRef({didLogMissingDefaultSizeWarning:!1}),Ie(()=>{const{callbacks:K,constraints:G}=j.current,U={...G};j.current.id=T,j.current.idIsFromProps=i!==void 0,j.current.order=p,K.onCollapse=f,K.onExpand=h,K.onResize=d,G.collapsedSize=n,G.collapsible=o,G.defaultSize=s,G.maxSize=c,G.minSize=u,(U.collapsedSize!==G.collapsedSize||U.collapsible!==G.collapsible||U.maxSize!==G.maxSize||U.minSize!==G.minSize)&&S(j.current,U)}),Ie(()=>{const K=j.current;return w(K),()=>{A(K)}},[p,T,w,A]),l.useImperativeHandle(r,()=>({collapse:()=>{g(j.current)},expand:K=>{b(j.current,K)},getId(){return T},getSize(){return C(j.current)},isCollapsed(){return I(j.current)},isExpanded(){return!I(j.current)},resize:K=>{E(j.current,K)}}),[g,b,C,I,T,E]);const H=P(j.current,s);return l.createElement(x,{...v,children:e,className:t,id:T,style:{...H,...m},[X.groupId]:M,[X.panel]:"",[X.panelCollapsible]:o||void 0,[X.panelId]:T,[X.panelSize]:parseFloat(""+H.flexGrow).toFixed(1)})}const Mt=l.forwardRef((e,t)=>l.createElement(Vn,{...e,forwardedRef:t}));Vn.displayName="Panel";Mt.displayName="forwardRef(Panel)";let jt=null,tt=-1,ve=null;function Js(e,t){if(t){const n=(t&Jn)!==0,o=(t&Qn)!==0,s=(t&eo)!==0,r=(t&to)!==0;if(n)return s?"se-resize":r?"ne-resize":"e-resize";if(o)return s?"sw-resize":r?"nw-resize":"w-resize";if(s)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function Qs(){ve!==null&&(document.head.removeChild(ve),jt=null,ve=null,tt=-1)}function bt(e,t){var n,o;const s=Js(e,t);if(jt!==s){if(jt=s,ve===null&&(ve=document.createElement("style"),document.head.appendChild(ve)),tt>=0){var r;(r=ve.sheet)===null||r===void 0||r.removeRule(tt)}tt=(n=(o=ve.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function Yn(e){return e.type==="keydown"}function Xn(e){return e.type.startsWith("pointer")}function qn(e){return e.type.startsWith("mouse")}function ft(e){if(Xn(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(qn(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function ea(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ta(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function na(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:an(e),b:an(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;$(o,"Stacking order can only be calculated for elements with a common ancestor");const s={a:sn(rn(n.a)),b:sn(rn(n.b))};if(s.a===s.b){const r=o.childNodes,i={a:n.a.at(-1),b:n.b.at(-1)};let c=r.length;for(;c--;){const u=r[c];if(u===i.a)return 1;if(u===i.b)return-1}}return Math.sign(s.a-s.b)}const oa=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ra(e){var t;const n=getComputedStyle((t=Zn(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function sa(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||ra(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||oa.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function rn(e){let t=e.length;for(;t--;){const n=e[t];if($(n,"Missing node"),sa(n))return n}return null}function sn(e){return e&&Number(getComputedStyle(e).zIndex)||0}function an(e){const t=[];for(;e;)t.push(e),e=Zn(e);return t}function Zn(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Jn=1,Qn=2,eo=4,to=8,aa=ea()==="coarse";let ue=[],Oe=!1,Ee=new Map,pt=new Map;const Be=new Set;function ia(e,t,n,o,s){var r;const{ownerDocument:i}=t,c={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:s},u=(r=Ee.get(i))!==null&&r!==void 0?r:0;return Ee.set(i,u+1),Be.add(c),st(),function(){var h;pt.delete(e),Be.delete(c);const d=(h=Ee.get(i))!==null&&h!==void 0?h:1;if(Ee.set(i,d-1),st(),d===1&&Ee.delete(i),ue.includes(c)){const p=ue.indexOf(c);p>=0&&ue.splice(p,1),Ft(),s("up",!0,null)}}}function la(e){const{target:t}=e,{x:n,y:o}=ft(e);Oe=!0,$t({target:t,x:n,y:o}),st(),ue.length>0&&(at("down",e),e.preventDefault(),no(t)||e.stopImmediatePropagation())}function wt(e){const{x:t,y:n}=ft(e);if(Oe&&e.buttons===0&&(Oe=!1,at("up",e)),!Oe){const{target:o}=e;$t({target:o,x:t,y:n})}at("move",e),Ft(),ue.length>0&&e.preventDefault()}function Ct(e){const{target:t}=e,{x:n,y:o}=ft(e);pt.clear(),Oe=!1,ue.length>0&&(e.preventDefault(),no(t)||e.stopImmediatePropagation()),at("up",e),$t({target:t,x:n,y:o}),Ft(),st()}function no(e){let t=e;for(;t;){if(t.hasAttribute(X.resizeHandle))return!0;t=t.parentElement}return!1}function $t({target:e,x:t,y:n}){ue.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),Be.forEach(s=>{const{element:r,hitAreaMargins:i}=s,c=r.getBoundingClientRect(),{bottom:u,left:f,right:h,top:d}=c,p=aa?i.coarse:i.fine;if(t>=f-p&&t<=h+p&&n>=d-p&&n<=u+p){if(o!==null&&document.contains(o)&&r!==o&&!r.contains(o)&&!o.contains(r)&&na(o,r)>0){let x=o,v=!1;for(;x&&!x.contains(r);){if(ta(x.getBoundingClientRect(),c)){v=!0;break}x=x.parentElement}if(v)return}ue.push(s)}})}function Pt(e,t){pt.set(e,t)}function Ft(){let e=!1,t=!1;ue.forEach(o=>{const{direction:s}=o;s==="horizontal"?e=!0:t=!0});let n=0;pt.forEach(o=>{n|=o}),e&&t?bt("intersection",n):e?bt("horizontal",n):t?bt("vertical",n):Qs()}let Et=new AbortController;function st(){Et.abort(),Et=new AbortController;const e={capture:!0,signal:Et.signal};Be.size&&(Oe?(ue.length>0&&Ee.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",Ct,e),o.addEventListener("pointerleave",wt,e),o.addEventListener("pointermove",wt,e))}),window.addEventListener("pointerup",Ct,e),window.addEventListener("pointercancel",Ct,e)):Ee.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",la,e),o.addEventListener("pointermove",wt,e))}))}function at(e,t){Be.forEach(n=>{const{setResizeHandlerState:o}=n,s=ue.includes(n);o(e,s,t)})}function ca(){const[e,t]=l.useState(0);return l.useCallback(()=>t(n=>n+1),[])}function $(e,t){if(!e)throw console.error(t),Error(t)}function Ne(e,t,n=kt){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function pe(e,t,n=kt){return Ne(e,t,n)===0}function ae(e,t,n){return Ne(e,t,n)===0}function ua(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const s=e[o],r=t[o];if(!ae(s,r,n))return!1}return!0}function _e({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];$(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:r,maxSize:i=100,minSize:c=0}=o;if(Ne(n,c)<0)if(r){const u=(s+c)/2;Ne(n,u)<0?n=s:n=c}else n=c;return n=Math.min(i,n),n=parseFloat(n.toFixed(kt)),n}function $e({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:s,trigger:r}){if(ae(e,0))return t;const i=[...t],[c,u]=o;$(c!=null,"Invalid first pivot index"),$(u!=null,"Invalid second pivot index");let f=0;if(r==="keyboard"){{const d=e<0?u:c,p=n[d];$(p,`Panel constraints not found for index ${d}`);const{collapsedSize:m=0,collapsible:x,minSize:v=0}=p;if(x){const y=t[d];if($(y!=null,`Previous layout not found for panel index ${d}`),ae(y,m)){const g=v-y;Ne(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}{const d=e<0?c:u,p=n[d];$(p,`No panel constraints found for index ${d}`);const{collapsedSize:m=0,collapsible:x,minSize:v=0}=p;if(x){const y=t[d];if($(y!=null,`Previous layout not found for panel index ${d}`),ae(y,v)){const g=y-m;Ne(g,Math.abs(e))>0&&(e=e<0?0-g:g)}}}}{const d=e<0?1:-1;let p=e<0?u:c,m=0;for(;;){const v=t[p];$(v!=null,`Previous layout not found for panel index ${p}`);const g=_e({panelConstraints:n,panelIndex:p,size:100})-v;if(m+=g,p+=d,p<0||p>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(m));e=e<0?0-x:x}{let p=e<0?c:u;for(;p>=0&&p<n.length;){const m=Math.abs(e)-Math.abs(f),x=t[p];$(x!=null,`Previous layout not found for panel index ${p}`);const v=x-m,y=_e({panelConstraints:n,panelIndex:p,size:v});if(!ae(x,y)&&(f+=x-y,i[p]=y,f.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?p--:p++}}if(ua(s,i))return s;{const d=e<0?u:c,p=t[d];$(p!=null,`Previous layout not found for panel index ${d}`);const m=p+f,x=_e({panelConstraints:n,panelIndex:d,size:m});if(i[d]=x,!ae(x,m)){let v=m-x,g=e<0?u:c;for(;g>=0&&g<n.length;){const b=i[g];$(b!=null,`Previous layout not found for panel index ${g}`);const C=b+v,P=_e({panelConstraints:n,panelIndex:g,size:C});if(ae(b,P)||(v-=P-b,i[g]=P),ae(v,0))break;e>0?g--:g++}}}const h=i.reduce((d,p)=>p+d,0);return ae(h,100)?i:s}function da({layout:e,panelsArray:t,pivotIndices:n}){let o=0,s=100,r=0,i=0;const c=n[0];$(c!=null,"No pivot index found"),t.forEach((d,p)=>{const{constraints:m}=d,{maxSize:x=100,minSize:v=0}=m;p===c?(o=v,s=x):(r+=v,i+=x)});const u=Math.min(s,100-r),f=Math.max(o,100-i),h=e[c];return{valueMax:u,valueMin:f,valueNow:h}}function We(e,t=document){return Array.from(t.querySelectorAll(`[${X.resizeHandleId}][data-panel-group-id="${e}"]`))}function oo(e,t,n=document){const s=We(e,n).findIndex(r=>r.getAttribute(X.resizeHandleId)===t);return s??null}function ro(e,t,n){const o=oo(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function so(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function ht(e,t=document){const n=t.querySelector(`[${X.resizeHandleId}="${e}"]`);return n||null}function fa(e,t,n,o=document){var s,r,i,c;const u=ht(t,o),f=We(e,o),h=u?f.indexOf(u):-1,d=(s=(r=n[h])===null||r===void 0?void 0:r.id)!==null&&s!==void 0?s:null,p=(i=(c=n[h+1])===null||c===void 0?void 0:c.id)!==null&&i!==void 0?i:null;return[d,p]}function pa({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:s,panelGroupElement:r,setLayout:i}){l.useRef({didWarnAboutMissingResizeHandle:!1}),Ie(()=>{if(!r)return;const c=We(n,r);for(let u=0;u<s.length-1;u++){const{valueMax:f,valueMin:h,valueNow:d}=da({layout:o,panelsArray:s,pivotIndices:[u,u+1]}),p=c[u];if(p!=null){const m=s[u];$(m,`No panel data found for index "${u}"`),p.setAttribute("aria-controls",m.id),p.setAttribute("aria-valuemax",""+Math.round(f)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{c.forEach((u,f)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,o,s,r]),l.useEffect(()=>{if(!r)return;const c=t.current;$(c,"Eager values not found");const{panelDataArray:u}=c,f=so(n,r);$(f!=null,`No group found for id "${n}"`);const h=We(n,r);$(h,`No resize handles found for group id "${n}"`);const d=h.map(p=>{const m=p.getAttribute(X.resizeHandleId);$(m,"Resize handle element has no handle id attribute");const[x,v]=fa(n,m,u,r);if(x==null||v==null)return()=>{};const y=g=>{if(!g.defaultPrevented)switch(g.key){case"Enter":{g.preventDefault();const b=u.findIndex(C=>C.id===x);if(b>=0){const C=u[b];$(C,`No panel data found for index ${b}`);const P=o[b],{collapsedSize:M=0,collapsible:I,minSize:S=0}=C.constraints;if(P!=null&&I){const w=$e({delta:ae(P,M)?S-M:M-P,initialLayout:o,panelConstraints:u.map(E=>E.constraints),pivotIndices:ro(n,m,r),prevLayout:o,trigger:"keyboard"});o!==w&&i(w)}}break}}};return p.addEventListener("keydown",y),()=>{p.removeEventListener("keydown",y)}});return()=>{d.forEach(p=>p())}},[r,e,t,n,o,s,i])}function ln(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function ao(e,t){const n=e==="horizontal",{x:o,y:s}=ft(t);return n?o:s}function ha(e,t,n,o,s){const r=n==="horizontal",i=ht(t,s);$(i,`No resize handle element found for id "${t}"`);const c=i.getAttribute(X.groupId);$(c,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=o;const f=ao(n,e),h=so(c,s);$(h,`No group element found for id "${c}"`);const d=h.getBoundingClientRect(),p=r?d.width:d.height;return(f-u)/p*100}function ma(e,t,n,o,s,r){if(Yn(e)){const i=n==="horizontal";let c=0;e.shiftKey?c=100:s!=null?c=s:c=10;let u=0;switch(e.key){case"ArrowDown":u=i?0:c;break;case"ArrowLeft":u=i?-c:0;break;case"ArrowRight":u=i?c:0;break;case"ArrowUp":u=i?0:-c;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return o==null?0:ha(e,t,n,o,r)}function ga({panelDataArray:e}){const t=Array(e.length),n=e.map(r=>r.constraints);let o=0,s=100;for(let r=0;r<e.length;r++){const i=n[r];$(i,`Panel constraints not found for index ${r}`);const{defaultSize:c}=i;c!=null&&(o++,t[r]=c,s-=c)}for(let r=0;r<e.length;r++){const i=n[r];$(i,`Panel constraints not found for index ${r}`);const{defaultSize:c}=i;if(c!=null)continue;const u=e.length-o,f=s/u;o++,t[r]=f,s-=f}return t}function je(e,t,n){t.forEach((o,s)=>{const r=e[s];$(r,`Panel data not found for index ${s}`);const{callbacks:i,constraints:c,id:u}=r,{collapsedSize:f=0,collapsible:h}=c,d=n[u];if(d==null||o!==d){n[u]=o;const{onCollapse:p,onExpand:m,onResize:x}=i;x&&x(o,d),h&&(p||m)&&(m&&(d==null||pe(d,f))&&!pe(o,f)&&m(),p&&(d==null||!pe(d,f))&&pe(o,f)&&p())}})}function et(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function xa({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:s,precision:r=3}){const i=n[s];let c;return i==null?c=e!=null?e.toPrecision(r):"1":o.length===1?c="1":c=i.toPrecision(r),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function va(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function cn(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function io(e){return`react-resizable-panels:${e}`}function lo(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:s,order:r}=t;return s?o:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function co(e,t){try{const n=io(e),o=t.getItem(n);if(o){const s=JSON.parse(o);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function ya(e,t,n){var o,s;const r=(o=co(e,n))!==null&&o!==void 0?o:{},i=lo(t);return(s=r[i])!==null&&s!==void 0?s:null}function ba(e,t,n,o,s){var r;const i=io(e),c=lo(t),u=(r=co(e,s))!==null&&r!==void 0?r:{};u[c]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{s.setItem(i,JSON.stringify(u))}catch(f){console.error(f)}}function un({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((r,i)=>r+i,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!ae(o,100)&&n.length>0)for(let r=0;r<t.length;r++){const i=n[r];$(i!=null,`No layout data found for index ${r}`);const c=100/o*i;n[r]=c}let s=0;for(let r=0;r<t.length;r++){const i=n[r];$(i!=null,`No layout data found for index ${r}`);const c=_e({panelConstraints:t,panelIndex:r,size:i});i!=c&&(s+=i-c,n[r]=c)}if(!ae(s,0))for(let r=0;r<t.length;r++){const i=n[r];$(i!=null,`No layout data found for index ${r}`);const c=i+s,u=_e({panelConstraints:t,panelIndex:r,size:c});if(i!==u&&(s-=u-i,n[r]=u,ae(s,0)))break}return n}const wa=100,Fe={getItem:e=>(cn(Fe),Fe.getItem(e)),setItem:(e,t)=>{cn(Fe),Fe.setItem(e,t)}},dn={};function uo({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:s,id:r=null,onLayout:i=null,keyboardResizeBy:c=null,storage:u=Fe,style:f,tagName:h="div",...d}){const p=zt(r),m=l.useRef(null),[x,v]=l.useState(null),[y,g]=l.useState([]),b=ca(),C=l.useRef({}),P=l.useRef(new Map),M=l.useRef(0),I=l.useRef({autoSaveId:e,direction:o,dragState:x,id:p,keyboardResizeBy:c,onLayout:i,storage:u}),S=l.useRef({layout:y,panelDataArray:[],panelDataArrayChanged:!1});l.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),l.useImperativeHandle(s,()=>({getId:()=>I.current.id,getLayout:()=>{const{layout:N}=S.current;return N},setLayout:N=>{const{onLayout:O}=I.current,{layout:k,panelDataArray:_}=S.current,R=un({layout:N,panelConstraints:_.map(L=>L.constraints)});ln(k,R)||(g(R),S.current.layout=R,O&&O(R),je(_,R,C.current))}}),[]),Ie(()=>{I.current.autoSaveId=e,I.current.direction=o,I.current.dragState=x,I.current.id=p,I.current.onLayout=i,I.current.storage=u}),pa({committedValuesRef:I,eagerValuesRef:S,groupId:p,layout:y,panelDataArray:S.current.panelDataArray,setLayout:g,panelGroupElement:m.current}),l.useEffect(()=>{const{panelDataArray:N}=S.current;if(e){if(y.length===0||y.length!==N.length)return;let O=dn[e];O==null&&(O=va(ba,wa),dn[e]=O);const k=[...N],_=new Map(P.current);O(e,k,_,y,u)}},[e,y,u]),l.useEffect(()=>{});const w=l.useCallback(N=>{const{onLayout:O}=I.current,{layout:k,panelDataArray:_}=S.current;if(N.constraints.collapsible){const R=_.map(te=>te.constraints),{collapsedSize:L=0,panelSize:z,pivotIndices:W}=Pe(_,N,k);if($(z!=null,`Panel size not found for panel "${N.id}"`),!pe(z,L)){P.current.set(N.id,z);const ne=Ae(_,N)===_.length-1?z-L:L-z,B=$e({delta:ne,initialLayout:k,panelConstraints:R,pivotIndices:W,prevLayout:k,trigger:"imperative-api"});et(k,B)||(g(B),S.current.layout=B,O&&O(B),je(_,B,C.current))}}},[]),E=l.useCallback((N,O)=>{const{onLayout:k}=I.current,{layout:_,panelDataArray:R}=S.current;if(N.constraints.collapsible){const L=R.map(ee=>ee.constraints),{collapsedSize:z=0,panelSize:W=0,minSize:te=0,pivotIndices:ne}=Pe(R,N,_),B=O??te;if(pe(W,z)){const ee=P.current.get(N.id),fe=ee!=null&&ee>=B?ee:B,Ce=Ae(R,N)===R.length-1?W-fe:fe-W,Q=$e({delta:Ce,initialLayout:_,panelConstraints:L,pivotIndices:ne,prevLayout:_,trigger:"imperative-api"});et(_,Q)||(g(Q),S.current.layout=Q,k&&k(Q),je(R,Q,C.current))}}},[]),A=l.useCallback(N=>{const{layout:O,panelDataArray:k}=S.current,{panelSize:_}=Pe(k,N,O);return $(_!=null,`Panel size not found for panel "${N.id}"`),_},[]),T=l.useCallback((N,O)=>{const{panelDataArray:k}=S.current,_=Ae(k,N);return xa({defaultSize:O,dragState:x,layout:y,panelData:k,panelIndex:_})},[x,y]),j=l.useCallback(N=>{const{layout:O,panelDataArray:k}=S.current,{collapsedSize:_=0,collapsible:R,panelSize:L}=Pe(k,N,O);return $(L!=null,`Panel size not found for panel "${N.id}"`),R===!0&&pe(L,_)},[]),H=l.useCallback(N=>{const{layout:O,panelDataArray:k}=S.current,{collapsedSize:_=0,collapsible:R,panelSize:L}=Pe(k,N,O);return $(L!=null,`Panel size not found for panel "${N.id}"`),!R||Ne(L,_)>0},[]),K=l.useCallback(N=>{const{panelDataArray:O}=S.current;O.push(N),O.sort((k,_)=>{const R=k.order,L=_.order;return R==null&&L==null?0:R==null?-1:L==null?1:R-L}),S.current.panelDataArrayChanged=!0,b()},[b]);Ie(()=>{if(S.current.panelDataArrayChanged){S.current.panelDataArrayChanged=!1;const{autoSaveId:N,onLayout:O,storage:k}=I.current,{layout:_,panelDataArray:R}=S.current;let L=null;if(N){const W=ya(N,R,k);W&&(P.current=new Map(Object.entries(W.expandToSizes)),L=W.layout)}L==null&&(L=ga({panelDataArray:R}));const z=un({layout:L,panelConstraints:R.map(W=>W.constraints)});ln(_,z)||(g(z),S.current.layout=z,O&&O(z),je(R,z,C.current))}}),Ie(()=>{const N=S.current;return()=>{N.layout=[]}},[]);const G=l.useCallback(N=>{let O=!1;const k=m.current;return k&&window.getComputedStyle(k,null).getPropertyValue("direction")==="rtl"&&(O=!0),function(R){R.preventDefault();const L=m.current;if(!L)return()=>null;const{direction:z,dragState:W,id:te,keyboardResizeBy:ne,onLayout:B}=I.current,{layout:ee,panelDataArray:fe}=S.current,{initialLayout:ge}=W??{},Ce=ro(te,N,L);let Q=ma(R,N,z,W,ne,L);const le=z==="horizontal";le&&O&&(Q=-Q);const Hr=fe.map(Gr=>Gr.constraints),ze=$e({delta:Q,initialLayout:ge??ee,panelConstraints:Hr,pivotIndices:Ce,prevLayout:ee,trigger:Yn(R)?"keyboard":"mouse-or-touch"}),en=!et(ee,ze);(Xn(R)||qn(R))&&M.current!=Q&&(M.current=Q,!en&&Q!==0?le?Pt(N,Q<0?Jn:Qn):Pt(N,Q<0?eo:to):Pt(N,0)),en&&(g(ze),S.current.layout=ze,B&&B(ze),je(fe,ze,C.current))}},[]),U=l.useCallback((N,O)=>{const{onLayout:k}=I.current,{layout:_,panelDataArray:R}=S.current,L=R.map(ee=>ee.constraints),{panelSize:z,pivotIndices:W}=Pe(R,N,_);$(z!=null,`Panel size not found for panel "${N.id}"`);const ne=Ae(R,N)===R.length-1?z-O:O-z,B=$e({delta:ne,initialLayout:_,panelConstraints:L,pivotIndices:W,prevLayout:_,trigger:"imperative-api"});et(_,B)||(g(B),S.current.layout=B,k&&k(B),je(R,B,C.current))},[]),q=l.useCallback((N,O)=>{const{layout:k,panelDataArray:_}=S.current,{collapsedSize:R=0,collapsible:L}=O,{collapsedSize:z=0,collapsible:W,maxSize:te=100,minSize:ne=0}=N.constraints,{panelSize:B}=Pe(_,N,k);B!=null&&(L&&W&&pe(B,R)?pe(R,z)||U(N,z):B<ne?U(N,ne):B>te&&U(N,te))},[U]),Y=l.useCallback((N,O)=>{const{direction:k}=I.current,{layout:_}=S.current;if(!m.current)return;const R=ht(N,m.current);$(R,`Drag handle element not found for id "${N}"`);const L=ao(k,O);v({dragHandleId:N,dragHandleRect:R.getBoundingClientRect(),initialCursorPosition:L,initialLayout:_})},[]),D=l.useCallback(()=>{v(null)},[]),Z=l.useCallback(N=>{const{panelDataArray:O}=S.current,k=Ae(O,N);k>=0&&(O.splice(k,1),delete C.current[N.id],S.current.panelDataArrayChanged=!0,b())},[b]),V=l.useMemo(()=>({collapsePanel:w,direction:o,dragState:x,expandPanel:E,getPanelSize:A,getPanelStyle:T,groupId:p,isPanelCollapsed:j,isPanelExpanded:H,reevaluatePanelConstraints:q,registerPanel:K,registerResizeHandle:G,resizePanel:U,startDragging:Y,stopDragging:D,unregisterPanel:Z,panelGroupElement:m.current}),[w,x,o,E,A,T,p,j,H,q,K,G,U,Y,D,Z]),J={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return l.createElement(dt.Provider,{value:V},l.createElement(h,{...d,children:t,className:n,id:r,ref:m,style:{...J,...f},[X.group]:"",[X.groupDirection]:o,[X.groupId]:p}))}const fo=l.forwardRef((e,t)=>l.createElement(uo,{...e,forwardedRef:t}));uo.displayName="PanelGroup";fo.displayName="forwardRef(PanelGroup)";function Ae(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Pe(e,t,n){const o=Ae(e,t),r=o===e.length-1?[o-1,o]:[o,o+1],i=n[o];return{...t.constraints,panelSize:i,pivotIndices:r}}function Ca({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){l.useEffect(()=>{if(e||n==null||o==null)return;const s=ht(t,o);if(s==null)return;const r=i=>{if(!i.defaultPrevented)switch(i.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{i.preventDefault(),n(i);break}case"F6":{i.preventDefault();const c=s.getAttribute(X.groupId);$(c,`No group element found for id "${c}"`);const u=We(c,o),f=oo(c,t,o);$(f!==null,`No resize element found for id "${t}"`);const h=i.shiftKey?f>0?f-1:u.length-1:f+1<u.length?f+1:0;u[h].focus();break}}};return s.addEventListener("keydown",r),()=>{s.removeEventListener("keydown",r)}},[o,e,t,n])}function po({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:s,onBlur:r,onClick:i,onDragging:c,onFocus:u,onPointerDown:f,onPointerUp:h,style:d={},tabIndex:p=0,tagName:m="div",...x}){var v,y;const g=l.useRef(null),b=l.useRef({onClick:i,onDragging:c,onPointerDown:f,onPointerUp:h});l.useEffect(()=>{b.current.onClick=i,b.current.onDragging=c,b.current.onPointerDown=f,b.current.onPointerUp=h});const C=l.useContext(dt);if(C===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:P,groupId:M,registerResizeHandle:I,startDragging:S,stopDragging:w,panelGroupElement:E}=C,A=zt(s),[T,j]=l.useState("inactive"),[H,K]=l.useState(!1),[G,U]=l.useState(null),q=l.useRef({state:T});Ie(()=>{q.current.state=T}),l.useEffect(()=>{if(n)U(null);else{const V=I(A);U(()=>V)}},[n,A,I]);const Y=(v=o==null?void 0:o.coarse)!==null&&v!==void 0?v:15,D=(y=o==null?void 0:o.fine)!==null&&y!==void 0?y:5;l.useEffect(()=>{if(n||G==null)return;const V=g.current;$(V,"Element ref not attached");let J=!1;return ia(A,V,P,{coarse:Y,fine:D},(O,k,_)=>{if(!k){j("inactive");return}switch(O){case"down":{j("drag"),J=!1,$(_,'Expected event to be defined for "down" action'),S(A,_);const{onDragging:R,onPointerDown:L}=b.current;R==null||R(!0),L==null||L();break}case"move":{const{state:R}=q.current;J=!0,R!=="drag"&&j("hover"),$(_,'Expected event to be defined for "move" action'),G(_);break}case"up":{j("hover"),w();const{onClick:R,onDragging:L,onPointerUp:z}=b.current;L==null||L(!1),z==null||z(),J||R==null||R();break}}})},[Y,P,n,D,I,A,G,S,w]),Ca({disabled:n,handleId:A,resizeHandler:G,panelGroupElement:E});const Z={touchAction:"none",userSelect:"none"};return l.createElement(m,{...x,children:e,className:t,id:s,onBlur:()=>{K(!1),r==null||r()},onFocus:()=>{K(!0),u==null||u()},ref:g,role:"separator",style:{...Z,...d},tabIndex:p,[X.groupDirection]:P,[X.groupId]:M,[X.resizeHandle]:"",[X.resizeHandleActive]:T==="drag"?"pointer":H?"keyboard":void 0,[X.resizeHandleEnabled]:!n,[X.resizeHandleId]:A,[X.resizeHandleState]:T})}po.displayName="PanelResizeHandle";const Pa=e=>{const t=de[e];ie.getState().init(e),ct.getState().init(e),ye.getState().init(e),Lt.getState().init(e),Se.getState().init(t.modifiableGameObjects),t.initialState()};function Ea({id:e,sourceX:t,sourceY:n,targetX:o,targetY:s,sourcePosition:r,targetPosition:i,style:c={},markerEnd:u}){const[f,h,d]=ms({sourceX:t,sourceY:n,sourcePosition:r,targetX:o,targetY:s,targetPosition:i}),{setEdges:p}=me(),m=()=>{p(x=>x.filter(v=>v.id!==e))};return a.jsxs(a.Fragment,{children:[a.jsx(gs,{path:f,markerEnd:u,style:c}),a.jsx(xs,{children:a.jsx("div",{className:"nodrag nopan pointer-events-auto absolute",style:{transform:`translate(-50%, -50%) translate(${h}px,${d}px)`},children:a.jsx("button",{className:"flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border-3 border-[#14141d] bg-slate-800 text-xs text-slate-400 hover:bg-slate-900",onClick:m,children:"×"})})})]})}const Sa={Deletable:Ea};function ho(e){const t=Object.keys(de),n=t.indexOf(e);if(n!==-1)return{prev:n===0?void 0:t[n-1],next:n===t.length-1?void 0:t[n+1]}}const be=Pn.forwardRef(({tooltip:e,className:t,children:n,side:o,...s},r)=>a.jsxs(vs,{children:[a.jsx(ys,{asChild:!0,children:a.jsx("button",{ref:r,className:Ke("cursor-pointer rounded bg-slate-800 p-2 outline outline-slate-500 hover:bg-slate-900",t),...s,children:n})}),a.jsx(bs,{side:o,children:typeof e=="string"?a.jsx("p",{children:e}):e})]})),Ia=()=>{const e=ie(n=>n.currentLevel),t=ho(e);return a.jsxs(ut,{position:"top-center",className:"flex flex-row items-center justify-center gap-2",children:[(t==null?void 0:t.prev)&&a.jsx(De,{to:`/levels/${t==null?void 0:t.prev}`,children:a.jsx(be,{tooltip:"Previous Level",side:"left",className:"text-white",children:a.jsx(Br,{className:"text-white"})})}),a.jsx(De,{to:"/",children:a.jsx(be,{tooltip:"Home",side:"bottom",children:a.jsx(Wr,{className:"text-white"})})}),(t==null?void 0:t.next)&&a.jsx(De,{to:`/levels/${t==null?void 0:t.next}`,children:a.jsx(be,{tooltip:"Next Level",side:"right",children:a.jsx(Vr,{className:"text-white"})})})]})};var Na=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ra=Na.reduce((e,t)=>{const n=Xe(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:i,...c}=s,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Ma=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ja="VisuallyHidden",mo=l.forwardRef((e,t)=>a.jsx(Ra.span,{...e,ref:t,style:{...Ma,...e.style}}));mo.displayName=ja;const go=({title:e,trigger:t,defaultOpen:n,open:o,onOpenChange:s,desc:r,children:i})=>a.jsxs($s,{defaultOpen:n,open:o,onOpenChange:s,children:[a.jsx(Fs,{asChild:!0,children:t}),a.jsxs(Hs,{children:[a.jsx(Gs,{className:"fixed inset-0 bg-slate-800/25"}),a.jsxs(Ks,{className:"fixed top-1/2 left-1/2 flex w-1/2 -translate-x-1/2 -translate-y-1/2 flex-col gap-6 rounded-lg border-2 border-blue-300 bg-slate-800/95 p-8 font-mono text-white",children:[a.jsx(mo,{asChild:!0,children:a.jsx(Us,{children:r})}),a.jsx(Bs,{className:"text-center text-4xl font-bold capitalize",children:e}),a.jsx("div",{id:"dialog",children:i}),a.jsx(Ge,{asChild:!0,children:a.jsx("button",{className:"absolute top-2.5 right-2.5 inline-flex size-[25px] cursor-pointer appearance-none items-center justify-center rounded-full bg-slate-700 focus:outline-1 focus:outline-blue-300","aria-label":"Close",children:a.jsx(Yr,{})})})]})]})]}),xo=({open:e,onOpenChange:t,skip:n=!1,trigger:o})=>{var g,b;const s=ie(C=>C.currentLevel),r=((g=de[s])==null?void 0:g.goals)||["No goals defined for this level yet."],i=((b=de[s])==null?void 0:b.dialog)||["No dialog available for this level."],c=l.useRef(0),[u,f]=l.useState(""),[h,d]=l.useState(i[c.current]),[p,m]=l.useState(n);l.useEffect(()=>{let C=0;const P=setInterval(()=>{C<=h.length?(f(h.slice(0,C)),C++):clearInterval(P)},10);return()=>{clearInterval(P),f("")}},[h]),l.useEffect(()=>{c.current=0,d(i[0]),m(n),f("")},[s]);const x=l.useRef(null),v=()=>{p||(c.current<i.length-1?(c.current++,d(i[c.current])):(c.current=0,m(!0),setTimeout(()=>{var C;(C=x.current)==null||C.focus()},0),d("")))},y=()=>{p?(m(!1),c.current=i.length-1,d(i[c.current])):c.current>0&&(c.current--,d(i[c.current]))};return a.jsx(go,{title:s,trigger:o,open:e,onOpenChange:t,desc:`This dialog displays the level goals and instructions for the
            ${s} level. You can close it by clicking the close button or
            pressing the escape key.`,children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex flex-1 flex-row",children:[a.jsx("div",{className:"my-auto w-1/3",children:a.jsx("div",{style:{aspectRatio:"7 / 6",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),a.jsxs("div",{className:"relative my-auto h-36 w-full rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[a.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),a.jsx("p",{className:"h-full overflow-auto pr-2 text-lg italic [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-slate-500 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-slate-900",children:p?a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"not-italic",children:"Goals:"}),r.map(C=>a.jsx("li",{className:"text-lg italic",children:C},C.slice(0,20)))]}):u})]})]}),a.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[a.jsx("button",{onClick:y,disabled:p?!1:c.current===0,className:Ke("rounded-lg bg-slate-700/80 px-3 py-2 focus:outline-1 focus:outline-blue-300",!p&&c.current===0?"opacity-50":"cursor-pointer hover:bg-slate-600"),children:"Previous"}),p?a.jsx(Ge,{asChild:!0,children:a.jsx("button",{ref:x,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"})}):a.jsx("button",{onClick:v,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next"})]})]})})},Aa=()=>{const e=ie(s=>s.currentLevel),t=ie(s=>s.isPaused),n=ie(s=>s.play),o=ie(s=>s.pause);return a.jsxs(ut,{position:"top-left",className:"flex flex-col items-center justify-center gap-2",children:[a.jsx(be,{tooltip:"Play/Pause",side:"right",onClick:()=>{t?n():o()},children:t?a.jsx(Xr,{className:"text-white"}):a.jsx(qr,{className:"text-white"})}),a.jsx(be,{tooltip:"Reset Level",side:"right",onClick:()=>{ct.getState().reset(),ye.getState().reset(),Lt.getState().reset(),Se.getState().init(de[e].modifiableGameObjects)},children:a.jsx(Zr,{className:"text-white"})}),a.jsx(xo,{skip:!0,trigger:a.jsx(be,{tooltip:"Level Info",side:"right",children:a.jsx(Jr,{className:"text-white"})})})]})},Ht=({x:e,y:t,onClose:n,parentLoopId:o,children:s,parentId:r})=>{const i=ie(E=>E.currentLevel),c=de[i].availableNodes,u=Object.values(ws).flat(),{addNodes:f,addEdges:h,screenToFlowPosition:d,getNodes:p,getNode:m}=me(),x=l.useRef(null),[v,y]=l.useState(""),[g,b]=l.useState(0),[C,P]=l.useState(c.map(E=>({nodeType:E}))),M=m(r??"");l.useEffect(()=>{var E;(E=x.current)==null||E.focus()},[]),l.useEffect(()=>{const E=c.filter(j=>j.toLowerCase().includes(v.toLowerCase())).map(j=>({nodeType:j}));if(v===""||!c.some(j=>j==="Math"))return P(E);const A=u.filter(j=>j.toLowerCase().includes(v.toLowerCase())).map(j=>({nodeType:"Math",computeType:j})),T=[...E,...A];P(T),b(0)},[v]);const I=(E,A)=>{const T=d({x:e,y:t}),j={x:M?T.x-M.position.x:T.x,y:M?T.y-M.position.y:T.y},H={x:M?T.x-M.position.x+300:T.x+300,y:M?T.y-M.position.y:T.y},K=[],G=[];if(E==="ForLoop"){const U=ls(j,H,o,r);K.push(U.mainConnectorEdge),G.push(...U.nodes)}else G.push(S(E,A));if(f(G),o){const U=p().filter(q=>q.data.loopId===o);K.push(...cs(U,G.map(q=>q.id)))}h(K),n()},S=(E,A)=>{const T=us(),j=d({x:e,y:t}),H={x:M?j.x-M.position.x:j.x,y:M?j.y-M.position.y:j.y};return{id:T,type:E,position:H,parentId:r,data:{initialComputeType:A,parentLoopId:o},height:E==="Group"?nn.height:void 0,width:E==="Group"?nn.width:void 0,selected:!1,dragging:!1}},w=E=>{if(E.key==="ArrowDown")E.preventDefault(),b(A=>(A+1)%C.length);else if(E.key==="ArrowUp")E.preventDefault(),b(A=>(A-1+C.length)%C.length);else if(E.key==="Enter"){E.preventDefault();const A=C[g];A&&I(A.nodeType,A.computeType)}};return l.useEffect(()=>(window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)),[C,g]),a.jsxs("div",{className:"flex w-65 flex-col gap-2 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[a.jsx("div",{className:"shadow",children:a.jsx("input",{ref:x,type:"text",spellCheck:"false",placeholder:"Search",className:"w-full rounded bg-slate-900 p-2 text-sm text-white focus:border-gray-300 focus:ring-0 focus:outline-none",onChange:E=>y(E.target.value)})}),a.jsx("div",{className:"flex flex-col gap-1",children:C.map((E,A)=>a.jsx("button",{className:Ke("w-full cursor-pointer rounded px-2 py-1 text-left text-sm text-white",g===A?"bg-slate-700":"hover:bg-slate-700"),onClick:()=>I(E.nodeType,E.computeType),children:E.computeType?a.jsxs("span",{children:[a.jsx("span",{className:"text-slate-400",children:E.nodeType}),a.jsx(Qr,{className:"inline-block h-4 w-4 text-slate-400"}),a.jsx("span",{className:"",children:E.computeType})]}):a.jsx(a.Fragment,{children:E.nodeType})},`add_node_${E}_${A}`))}),v===""&&a.jsx(a.Fragment,{children:s})]})},_a=({nodeId:e,nodeType:t,nodeLoopId:n,x:o,y:s,onClose:r,nodeParentId:i})=>a.jsx("div",{style:{position:"absolute",top:s,left:o,zIndex:1e3},children:t==="ForStart"||t==="ForEnd"?a.jsxs(Ht,{onClose:r,x:o,y:s,parentLoopId:n,parentId:i,children:[a.jsx("hr",{className:"mx-auto h-1 w-44 rounded-sm border-0 bg-slate-700"}),a.jsx(fn,{nodeId:e,onClose:r})]}):a.jsx("div",{className:"flex w-36 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:a.jsx(fn,{nodeId:e,onClose:r})})}),fn=({nodeId:e,onClose:t})=>{const{getNode:n,getNodes:o,getEdges:s,setNodes:r,setEdges:i}=me(),c=l.useCallback(()=>{const f=n(e);if(!f)return;const h=o().filter(d=>d.id===f.id||d.parentId===f.id||(d.data.loopId===f.data.loopId||d.data.parentLoopId===f.data.loopId)&&f.data.loopId!=null);Rn(h,s,o,i,r),t()},[s,n,o,e,t,i,r]),u=l.useCallback(()=>{var h;const f=[e];if(((h=n(e))==null?void 0:h.type)==="Group"){const d=o().filter(m=>m.parentId===e),p=n(e);r(m=>m.map(x=>d.some(v=>v.id===x.id)?{...x,position:{x:p?x.position.x+p.position.x:x.position.x,y:p?x.position.y+p.position.y:x.position.y},parentId:void 0}:x))}r(d=>d.filter(p=>!f.includes(p.id))),i(d=>d.filter(p=>!(f.includes(p.source)||f.includes(p.target)))),t()},[e,n,r,i,t,o]);return a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:c,children:[a.jsx("span",{children:"Duplicate"}),a.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Ctrl+D"})]}),a.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[a.jsx("span",{children:"Delete"}),a.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})},Da=({x:e,y:t,onClose:n})=>a.jsx("div",{style:{position:"absolute",top:t,left:e,zIndex:1e3},children:a.jsx(Ht,{onClose:n,x:e,y:t})});var Oa="DismissableLayer",At="dismissableLayer.update",Ta="dismissableLayer.pointerDownOutside",La="dismissableLayer.focusOutside",pn,vo=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yo=l.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:i,onDismiss:c,...u}=e,f=l.useContext(vo),[h,d]=l.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,m]=l.useState({}),x=oe(t,S=>d(S)),v=Array.from(f.layers),[y]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),g=v.indexOf(y),b=h?v.indexOf(h):-1,C=f.layersWithOutsidePointerEventsDisabled.size>0,P=b>=g,M=$a(S=>{const w=S.target,E=[...f.branches].some(A=>A.contains(w));!P||E||(s==null||s(S),i==null||i(S),S.defaultPrevented||c==null||c())},p),I=Fa(S=>{const w=S.target;[...f.branches].some(A=>A.contains(w))||(r==null||r(S),i==null||i(S),S.defaultPrevented||c==null||c())},p);return es(S=>{b===f.layers.size-1&&(o==null||o(S),!S.defaultPrevented&&c&&(S.preventDefault(),c()))},p),l.useEffect(()=>{if(h)return n&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(pn=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),hn(),()=>{n&&f.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=pn)}},[h,p,n,f]),l.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),hn())},[h,f]),l.useEffect(()=>{const S=()=>m({});return document.addEventListener(At,S),()=>document.removeEventListener(At,S)},[]),a.jsx(re.div,{...u,ref:x,style:{pointerEvents:C?P?"auto":"none":void 0,...e.style},onFocusCapture:F(e.onFocusCapture,I.onFocusCapture),onBlurCapture:F(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:F(e.onPointerDownCapture,M.onPointerDownCapture)})});yo.displayName=Oa;var ka="DismissableLayerBranch",za=l.forwardRef((e,t)=>{const n=l.useContext(vo),o=l.useRef(null),s=oe(t,o);return l.useEffect(()=>{const r=o.current;if(r)return n.branches.add(r),()=>{n.branches.delete(r)}},[n.branches]),a.jsx(re.div,{...e,ref:s})});za.displayName=ka;function $a(e,t=globalThis==null?void 0:globalThis.document){const n=he(e),o=l.useRef(!1),s=l.useRef(()=>{});return l.useEffect(()=>{const r=c=>{if(c.target&&!o.current){let u=function(){bo(Ta,n,f,{discrete:!0})};const f={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);o.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",r),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function Fa(e,t=globalThis==null?void 0:globalThis.document){const n=he(e),o=l.useRef(!1);return l.useEffect(()=>{const s=r=>{r.target&&!o.current&&bo(La,n,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function hn(){const e=new CustomEvent(At);document.dispatchEvent(e)}function bo(e,t,n,{discrete:o}){const s=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),o?En(s,r):s.dispatchEvent(r)}var St="focusScope.autoFocusOnMount",It="focusScope.autoFocusOnUnmount",mn={bubbles:!1,cancelable:!0},Ha="FocusScope",wo=l.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...i}=e,[c,u]=l.useState(null),f=he(s),h=he(r),d=l.useRef(null),p=oe(t,v=>u(v)),m=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(o){let v=function(C){if(m.paused||!c)return;const P=C.target;c.contains(P)?d.current=P:xe(d.current,{select:!0})},y=function(C){if(m.paused||!c)return;const P=C.relatedTarget;P!==null&&(c.contains(P)||xe(d.current,{select:!0}))},g=function(C){if(document.activeElement===document.body)for(const M of C)M.removedNodes.length>0&&xe(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const b=new MutationObserver(g);return c&&b.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),b.disconnect()}}},[o,c,m.paused]),l.useEffect(()=>{if(c){xn.add(m);const v=document.activeElement;if(!c.contains(v)){const g=new CustomEvent(St,mn);c.addEventListener(St,f),c.dispatchEvent(g),g.defaultPrevented||(Ga(Va(Co(c)),{select:!0}),document.activeElement===v&&xe(c))}return()=>{c.removeEventListener(St,f),setTimeout(()=>{const g=new CustomEvent(It,mn);c.addEventListener(It,h),c.dispatchEvent(g),g.defaultPrevented||xe(v??document.body,{select:!0}),c.removeEventListener(It,h),xn.remove(m)},0)}}},[c,f,h,m]);const x=l.useCallback(v=>{if(!n&&!o||m.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,g=document.activeElement;if(y&&g){const b=v.currentTarget,[C,P]=Ka(b);C&&P?!v.shiftKey&&g===P?(v.preventDefault(),n&&xe(C,{select:!0})):v.shiftKey&&g===C&&(v.preventDefault(),n&&xe(P,{select:!0})):g===b&&v.preventDefault()}},[n,o,m.paused]);return a.jsx(re.div,{tabIndex:-1,...i,ref:p,onKeyDown:x})});wo.displayName=Ha;function Ga(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(xe(o,{select:t}),document.activeElement!==n)return}function Ka(e){const t=Co(e),n=gn(t,e),o=gn(t.reverse(),e);return[n,o]}function Co(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const s=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||s?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function gn(e,t){for(const n of e)if(!Ua(n,{upTo:t}))return n}function Ua(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ba(e){return e instanceof HTMLInputElement&&"select"in e}function xe(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Ba(e)&&t&&e.select()}}var xn=Wa();function Wa(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=vn(e,t),e.unshift(t)},remove(t){var n;e=vn(e,t),(n=e[0])==null||n.resume()}}}function vn(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function Va(e){return e.filter(t=>t.tagName!=="A")}var Ya="Arrow",Po=l.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...r}=e;return a.jsx(re.svg,{...r,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});Po.displayName=Ya;var Xa=Po,Gt="Popper",[Eo,So]=Le(Gt),[qa,Io]=Eo(Gt),No=e=>{const{__scopePopper:t,children:n}=e,[o,s]=l.useState(null);return a.jsx(qa,{scope:t,anchor:o,onAnchorChange:s,children:n})};No.displayName=Gt;var Ro="PopperAnchor",Mo=l.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,r=Io(Ro,n),i=l.useRef(null),c=oe(t,i);return l.useEffect(()=>{r.onAnchorChange((o==null?void 0:o.current)||i.current)}),o?null:a.jsx(re.div,{...s,ref:c})});Mo.displayName=Ro;var Kt="PopperContent",[Za,Ja]=Eo(Kt),jo=l.forwardRef((e,t)=>{var R,L,z,W,te,ne;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:r="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...v}=e,y=Io(Kt,n),[g,b]=l.useState(null),C=oe(t,B=>b(B)),[P,M]=l.useState(null),I=jn(P),S=(I==null?void 0:I.width)??0,w=(I==null?void 0:I.height)??0,E=o+(r!=="center"?"-"+r:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},T=Array.isArray(f)?f:[f],j=T.length>0,H={padding:A,boundary:T.filter(ei),altBoundary:j},{refs:K,floatingStyles:G,placement:U,isPositioned:q,middlewareData:Y}=An({strategy:"fixed",placement:E,whileElementsMounted:(...B)=>$n(...B,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[_n({mainAxis:s+w,alignmentAxis:i}),u&&Dn({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?zn():void 0,...H}),u&&On({...H}),Tn({...H,apply:({elements:B,rects:ee,availableWidth:fe,availableHeight:ge})=>{const{width:Ce,height:Q}=ee.reference,le=B.floating.style;le.setProperty("--radix-popper-available-width",`${fe}px`),le.setProperty("--radix-popper-available-height",`${ge}px`),le.setProperty("--radix-popper-anchor-width",`${Ce}px`),le.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),P&&Ln({element:P,padding:c}),ti({arrowWidth:S,arrowHeight:w}),p&&kn({strategy:"referenceHidden",...H})]}),[D,Z]=Do(U),V=he(x);Ue(()=>{q&&(V==null||V())},[q,V]);const J=(R=Y.arrow)==null?void 0:R.x,N=(L=Y.arrow)==null?void 0:L.y,O=((z=Y.arrow)==null?void 0:z.centerOffset)!==0,[k,_]=l.useState();return Ue(()=>{g&&_(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:k,"--radix-popper-transform-origin":[(W=Y.transformOrigin)==null?void 0:W.x,(te=Y.transformOrigin)==null?void 0:te.y].join(" "),...((ne=Y.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(Za,{scope:n,placedSide:D,onArrowChange:M,arrowX:J,arrowY:N,shouldHideArrow:O,children:a.jsx(re.div,{"data-side":D,"data-align":Z,...v,ref:C,style:{...v.style,animation:q?void 0:"none"}})})})});jo.displayName=Kt;var Ao="PopperArrow",Qa={top:"bottom",right:"left",bottom:"top",left:"right"},_o=l.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,r=Ja(Ao,o),i=Qa[r.placedSide];return a.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:a.jsx(Xa,{...s,ref:n,style:{...s.style,display:"block"}})})});_o.displayName=Ao;function ei(e){return e!==null}var ti=e=>({name:"transformOrigin",options:e,fn(t){var y,g,b;const{placement:n,rects:o,middlewareData:s}=t,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,c=i?0:e.arrowWidth,u=i?0:e.arrowHeight,[f,h]=Do(n),d={start:"0%",center:"50%",end:"100%"}[h],p=(((g=s.arrow)==null?void 0:g.x)??0)+c/2,m=(((b=s.arrow)==null?void 0:b.y)??0)+u/2;let x="",v="";return f==="bottom"?(x=i?d:`${p}px`,v=`${-u}px`):f==="top"?(x=i?d:`${p}px`,v=`${o.floating.height+u}px`):f==="right"?(x=`${-u}px`,v=i?d:`${m}px`):f==="left"&&(x=`${o.floating.width+u}px`,v=i?d:`${m}px`),{data:{x,y:v}}}});function Do(e){const[t,n="center"]=e.split("-");return[t,n]}var ni=No,oi=Mo,ri=jo,si=_o,ai="Portal",Oo=l.forwardRef((e,t)=>{var c;const{container:n,...o}=e,[s,r]=l.useState(!1);Ue(()=>r(!0),[]);const i=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return i?Xs.createPortal(a.jsx(re.div,{...o,ref:t}),i):null});Oo.displayName=ai;var Nt="rovingFocusGroup.onEntryFocus",ii={bubbles:!1,cancelable:!0},qe="RovingFocusGroup",[_t,To,li]=Fn(qe),[ci,Lo]=Le(qe,[li]),[ui,di]=ci(qe),ko=l.forwardRef((e,t)=>a.jsx(_t.Provider,{scope:e.__scopeRovingFocusGroup,children:a.jsx(_t.Slot,{scope:e.__scopeRovingFocusGroup,children:a.jsx(fi,{...e,ref:t})})}));ko.displayName=qe;var fi=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:s=!1,dir:r,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:h=!1,...d}=e,p=l.useRef(null),m=oe(t,p),x=Hn(r),[v,y]=Ot({prop:i,defaultProp:c??null,onChange:u,caller:qe}),[g,b]=l.useState(!1),C=he(f),P=To(n),M=l.useRef(!1),[I,S]=l.useState(0);return l.useEffect(()=>{const w=p.current;if(w)return w.addEventListener(Nt,C),()=>w.removeEventListener(Nt,C)},[C]),a.jsx(ui,{scope:n,orientation:o,dir:x,loop:s,currentTabStopId:v,onItemFocus:l.useCallback(w=>y(w),[y]),onItemShiftTab:l.useCallback(()=>b(!0),[]),onFocusableItemAdd:l.useCallback(()=>S(w=>w+1),[]),onFocusableItemRemove:l.useCallback(()=>S(w=>w-1),[]),children:a.jsx(re.div,{tabIndex:g||I===0?-1:0,"data-orientation":o,...d,ref:m,style:{outline:"none",...e.style},onMouseDown:F(e.onMouseDown,()=>{M.current=!0}),onFocus:F(e.onFocus,w=>{const E=!M.current;if(w.target===w.currentTarget&&E&&!g){const A=new CustomEvent(Nt,ii);if(w.currentTarget.dispatchEvent(A),!A.defaultPrevented){const T=P().filter(U=>U.focusable),j=T.find(U=>U.active),H=T.find(U=>U.id===v),G=[j,H,...T].filter(Boolean).map(U=>U.ref.current);Fo(G,h)}}M.current=!1}),onBlur:F(e.onBlur,()=>b(!1))})})}),zo="RovingFocusGroupItem",$o=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:s=!1,tabStopId:r,children:i,...c}=e,u=nt(),f=r||u,h=di(zo,n),d=h.currentTabStopId===f,p=To(n),{onFocusableItemAdd:m,onFocusableItemRemove:x,currentTabStopId:v}=h;return l.useEffect(()=>{if(o)return m(),()=>x()},[o,m,x]),a.jsx(_t.ItemSlot,{scope:n,id:f,focusable:o,active:s,children:a.jsx(re.span,{tabIndex:d?0:-1,"data-orientation":h.orientation,...c,ref:t,onMouseDown:F(e.onMouseDown,y=>{o?h.onItemFocus(f):y.preventDefault()}),onFocus:F(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:F(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){h.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const g=mi(y,h.orientation,h.dir);if(g!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let C=p().filter(P=>P.focusable).map(P=>P.ref.current);if(g==="last")C.reverse();else if(g==="prev"||g==="next"){g==="prev"&&C.reverse();const P=C.indexOf(y.currentTarget);C=h.loop?gi(C,P+1):C.slice(P+1)}setTimeout(()=>Fo(C))}}),children:typeof i=="function"?i({isCurrentTabStop:d,hasTabStop:v!=null}):i})})});$o.displayName=zo;var pi={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function hi(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function mi(e,t,n){const o=hi(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return pi[o]}function Fo(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function gi(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var xi=ko,vi=$o;function yi(e){const t=bi(e),n=l.forwardRef((o,s)=>{const{children:r,...i}=o,c=l.Children.toArray(r),u=c.find(Ci);if(u){const f=u.props.children,h=c.map(d=>d===u?l.Children.count(f)>1?l.Children.only(null):l.isValidElement(f)?f.props.children:null:d);return a.jsx(t,{...i,ref:s,children:l.isValidElement(f)?l.cloneElement(f,void 0,h):null})}return a.jsx(t,{...i,ref:s,children:r})});return n.displayName=`${e}.Slot`,n}function bi(e){const t=l.forwardRef((n,o)=>{const{children:s,...r}=n;if(l.isValidElement(s)){const i=Ei(s),c=Pi(r,s.props);return s.type!==l.Fragment&&(c.ref=o?Tt(o,i):i),l.cloneElement(s,c)}return l.Children.count(s)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var wi=Symbol("radix.slottable");function Ci(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===wi}function Pi(e,t){const n={...t};for(const o in t){const s=e[o],r=t[o];/^on[A-Z]/.test(o)?s&&r?n[o]=(...c)=>{r(...c),s(...c)}:s&&(n[o]=s):o==="style"?n[o]={...s,...r}:o==="className"&&(n[o]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}function Ei(e){var o,s;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Dt=["Enter"," "],Si=["ArrowDown","PageUp","Home"],Ho=["ArrowUp","PageDown","End"],Ii=[...Si,...Ho],Ni={ltr:[...Dt,"ArrowRight"],rtl:[...Dt,"ArrowLeft"]},Ri={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ze="Menu",[Ve,Mi,ji]=Fn(Ze),[Re,Go]=Le(Ze,[ji,So,Lo]),mt=So(),Ko=Lo(),[Ai,Me]=Re(Ze),[_i,Je]=Re(Ze),Uo=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:s,onOpenChange:r,modal:i=!0}=e,c=mt(t),[u,f]=l.useState(null),h=l.useRef(!1),d=he(r),p=Hn(s);return l.useEffect(()=>{const m=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),a.jsx(ni,{...c,children:a.jsx(Ai,{scope:t,open:n,onOpenChange:d,content:u,onContentChange:f,children:a.jsx(_i,{scope:t,onClose:l.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:h,dir:p,modal:i,children:o})})})};Uo.displayName=Ze;var Di="MenuAnchor",Ut=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=mt(n);return a.jsx(oi,{...s,...o,ref:t})});Ut.displayName=Di;var Bt="MenuPortal",[Oi,Bo]=Re(Bt,{forceMount:void 0}),Wo=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:s}=e,r=Me(Bt,t);return a.jsx(Oi,{scope:t,forceMount:n,children:a.jsx(ke,{present:n||r.open,children:a.jsx(Oo,{asChild:!0,container:s,children:o})})})};Wo.displayName=Bt;var ce="MenuContent",[Ti,Wt]=Re(ce),Vo=l.forwardRef((e,t)=>{const n=Bo(ce,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,r=Me(ce,e.__scopeMenu),i=Je(ce,e.__scopeMenu);return a.jsx(Ve.Provider,{scope:e.__scopeMenu,children:a.jsx(ke,{present:o||r.open,children:a.jsx(Ve.Slot,{scope:e.__scopeMenu,children:i.modal?a.jsx(Li,{...s,ref:t}):a.jsx(ki,{...s,ref:t})})})})}),Li=l.forwardRef((e,t)=>{const n=Me(ce,e.__scopeMenu),o=l.useRef(null),s=oe(t,o);return l.useEffect(()=>{const r=o.current;if(r)return Sn(r)},[]),a.jsx(Vt,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:F(e.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ki=l.forwardRef((e,t)=>{const n=Me(ce,e.__scopeMenu);return a.jsx(Vt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),zi=yi("MenuContent.ScrollLock"),Vt=l.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:p,onDismiss:m,disableOutsideScroll:x,...v}=e,y=Me(ce,n),g=Je(ce,n),b=mt(n),C=Ko(n),P=Mi(n),[M,I]=l.useState(null),S=l.useRef(null),w=oe(t,S,y.onContentChange),E=l.useRef(0),A=l.useRef(""),T=l.useRef(0),j=l.useRef(null),H=l.useRef("right"),K=l.useRef(0),G=x?Nn:l.Fragment,U=x?{as:zi,allowPinchZoom:!0}:void 0,q=D=>{var R,L;const Z=A.current+D,V=P().filter(z=>!z.disabled),J=document.activeElement,N=(R=V.find(z=>z.ref.current===J))==null?void 0:R.textValue,O=V.map(z=>z.textValue),k=qi(O,Z,N),_=(L=V.find(z=>z.textValue===k))==null?void 0:L.ref.current;(function z(W){A.current=W,window.clearTimeout(E.current),W!==""&&(E.current=window.setTimeout(()=>z(""),1e3))})(Z),_&&setTimeout(()=>_.focus())};l.useEffect(()=>()=>window.clearTimeout(E.current),[]),In();const Y=l.useCallback(D=>{var V,J;return H.current===((V=j.current)==null?void 0:V.side)&&Ji(D,(J=j.current)==null?void 0:J.area)},[]);return a.jsx(Ti,{scope:n,searchRef:A,onItemEnter:l.useCallback(D=>{Y(D)&&D.preventDefault()},[Y]),onItemLeave:l.useCallback(D=>{var Z;Y(D)||((Z=S.current)==null||Z.focus(),I(null))},[Y]),onTriggerLeave:l.useCallback(D=>{Y(D)&&D.preventDefault()},[Y]),pointerGraceTimerRef:T,onPointerGraceIntentChange:l.useCallback(D=>{j.current=D},[]),children:a.jsx(G,{...U,children:a.jsx(wo,{asChild:!0,trapped:s,onMountAutoFocus:F(r,D=>{var Z;D.preventDefault(),(Z=S.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:a.jsx(yo,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:d,onInteractOutside:p,onDismiss:m,children:a.jsx(xi,{asChild:!0,...C,dir:g.dir,orientation:"vertical",loop:o,currentTabStopId:M,onCurrentTabStopIdChange:I,onEntryFocus:F(u,D=>{g.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:a.jsx(ri,{role:"menu","aria-orientation":"vertical","data-state":cr(y.open),"data-radix-menu-content":"",dir:g.dir,...b,...v,ref:w,style:{outline:"none",...v.style},onKeyDown:F(v.onKeyDown,D=>{const V=D.target.closest("[data-radix-menu-content]")===D.currentTarget,J=D.ctrlKey||D.altKey||D.metaKey,N=D.key.length===1;V&&(D.key==="Tab"&&D.preventDefault(),!J&&N&&q(D.key));const O=S.current;if(D.target!==O||!Ii.includes(D.key))return;D.preventDefault();const _=P().filter(R=>!R.disabled).map(R=>R.ref.current);Ho.includes(D.key)&&_.reverse(),Yi(_)}),onBlur:F(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(E.current),A.current="")}),onPointerMove:F(e.onPointerMove,Ye(D=>{const Z=D.target,V=K.current!==D.clientX;if(D.currentTarget.contains(Z)&&V){const J=D.clientX>K.current?"right":"left";H.current=J,K.current=D.clientX}}))})})})})})})});Vo.displayName=ce;var $i="MenuGroup",Yt=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return a.jsx(re.div,{role:"group",...o,ref:t})});Yt.displayName=$i;var Fi="MenuLabel",Yo=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return a.jsx(re.div,{...o,ref:t})});Yo.displayName=Fi;var it="MenuItem",yn="menu.itemSelect",gt=l.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...s}=e,r=l.useRef(null),i=Je(it,e.__scopeMenu),c=Wt(it,e.__scopeMenu),u=oe(t,r),f=l.useRef(!1),h=()=>{const d=r.current;if(!n&&d){const p=new CustomEvent(yn,{bubbles:!0,cancelable:!0});d.addEventListener(yn,m=>o==null?void 0:o(m),{once:!0}),En(d,p),p.defaultPrevented?f.current=!1:i.onClose()}};return a.jsx(Xo,{...s,ref:u,disabled:n,onClick:F(e.onClick,h),onPointerDown:d=>{var p;(p=e.onPointerDown)==null||p.call(e,d),f.current=!0},onPointerUp:F(e.onPointerUp,d=>{var p;f.current||(p=d.currentTarget)==null||p.click()}),onKeyDown:F(e.onKeyDown,d=>{const p=c.searchRef.current!=="";n||p&&d.key===" "||Dt.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});gt.displayName=it;var Xo=l.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:s,...r}=e,i=Wt(it,n),c=Ko(n),u=l.useRef(null),f=oe(t,u),[h,d]=l.useState(!1),[p,m]=l.useState("");return l.useEffect(()=>{const x=u.current;x&&m((x.textContent??"").trim())},[r.children]),a.jsx(Ve.ItemSlot,{scope:n,disabled:o,textValue:s??p,children:a.jsx(vi,{asChild:!0,...c,focusable:!o,children:a.jsx(re.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...r,ref:f,onPointerMove:F(e.onPointerMove,Ye(x=>{o?i.onItemLeave(x):(i.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:F(e.onPointerLeave,Ye(x=>i.onItemLeave(x))),onFocus:F(e.onFocus,()=>d(!0)),onBlur:F(e.onBlur,()=>d(!1))})})})}),Hi="MenuCheckboxItem",qo=l.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...s}=e;return a.jsx(tr,{scope:e.__scopeMenu,checked:n,children:a.jsx(gt,{role:"menuitemcheckbox","aria-checked":lt(n)?"mixed":n,...s,ref:t,"data-state":qt(n),onSelect:F(s.onSelect,()=>o==null?void 0:o(lt(n)?!0:!n),{checkForDefaultPrevented:!1})})})});qo.displayName=Hi;var Zo="MenuRadioGroup",[Gi,Ki]=Re(Zo,{value:void 0,onValueChange:()=>{}}),Jo=l.forwardRef((e,t)=>{const{value:n,onValueChange:o,...s}=e,r=he(o);return a.jsx(Gi,{scope:e.__scopeMenu,value:n,onValueChange:r,children:a.jsx(Yt,{...s,ref:t})})});Jo.displayName=Zo;var Qo="MenuRadioItem",er=l.forwardRef((e,t)=>{const{value:n,...o}=e,s=Ki(Qo,e.__scopeMenu),r=n===s.value;return a.jsx(tr,{scope:e.__scopeMenu,checked:r,children:a.jsx(gt,{role:"menuitemradio","aria-checked":r,...o,ref:t,"data-state":qt(r),onSelect:F(o.onSelect,()=>{var i;return(i=s.onValueChange)==null?void 0:i.call(s,n)},{checkForDefaultPrevented:!1})})})});er.displayName=Qo;var Xt="MenuItemIndicator",[tr,Ui]=Re(Xt,{checked:!1}),nr=l.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...s}=e,r=Ui(Xt,n);return a.jsx(ke,{present:o||lt(r.checked)||r.checked===!0,children:a.jsx(re.span,{...s,ref:t,"data-state":qt(r.checked)})})});nr.displayName=Xt;var Bi="MenuSeparator",or=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return a.jsx(re.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});or.displayName=Bi;var Wi="MenuArrow",rr=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=mt(n);return a.jsx(si,{...s,...o,ref:t})});rr.displayName=Wi;var Vi="MenuSub",[Tc,sr]=Re(Vi),He="MenuSubTrigger",ar=l.forwardRef((e,t)=>{const n=Me(He,e.__scopeMenu),o=Je(He,e.__scopeMenu),s=sr(He,e.__scopeMenu),r=Wt(He,e.__scopeMenu),i=l.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=r,f={__scopeMenu:e.__scopeMenu},h=l.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return l.useEffect(()=>h,[h]),l.useEffect(()=>{const d=c.current;return()=>{window.clearTimeout(d),u(null)}},[c,u]),a.jsx(Ut,{asChild:!0,...f,children:a.jsx(Xo,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":cr(n.open),...e,ref:Tt(t,s.onTriggerChange),onClick:d=>{var p;(p=e.onClick)==null||p.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:F(e.onPointerMove,Ye(d=>{r.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(r.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:F(e.onPointerLeave,Ye(d=>{var m,x;h();const p=(m=n.content)==null?void 0:m.getBoundingClientRect();if(p){const v=(x=n.content)==null?void 0:x.dataset.side,y=v==="right",g=y?-5:5,b=p[y?"left":"right"],C=p[y?"right":"left"];r.onPointerGraceIntentChange({area:[{x:d.clientX+g,y:d.clientY},{x:b,y:p.top},{x:C,y:p.top},{x:C,y:p.bottom},{x:b,y:p.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(d),d.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:F(e.onKeyDown,d=>{var m;const p=r.searchRef.current!=="";e.disabled||p&&d.key===" "||Ni[o.dir].includes(d.key)&&(n.onOpenChange(!0),(m=n.content)==null||m.focus(),d.preventDefault())})})})});ar.displayName=He;var ir="MenuSubContent",lr=l.forwardRef((e,t)=>{const n=Bo(ce,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,r=Me(ce,e.__scopeMenu),i=Je(ce,e.__scopeMenu),c=sr(ir,e.__scopeMenu),u=l.useRef(null),f=oe(t,u);return a.jsx(Ve.Provider,{scope:e.__scopeMenu,children:a.jsx(ke,{present:o||r.open,children:a.jsx(Ve.Slot,{scope:e.__scopeMenu,children:a.jsx(Vt,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:f,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var d;i.isUsingKeyboardRef.current&&((d=u.current)==null||d.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:F(e.onFocusOutside,h=>{h.target!==c.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:F(e.onEscapeKeyDown,h=>{i.onClose(),h.preventDefault()}),onKeyDown:F(e.onKeyDown,h=>{var m;const d=h.currentTarget.contains(h.target),p=Ri[i.dir].includes(h.key);d&&p&&(r.onOpenChange(!1),(m=c.trigger)==null||m.focus(),h.preventDefault())})})})})})});lr.displayName=ir;function cr(e){return e?"open":"closed"}function lt(e){return e==="indeterminate"}function qt(e){return lt(e)?"indeterminate":e?"checked":"unchecked"}function Yi(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Xi(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function qi(e,t,n){const s=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let i=Xi(e,Math.max(r,0));s.length===1&&(i=i.filter(f=>f!==n));const u=i.find(f=>f.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Zi(e,t){const{x:n,y:o}=e;let s=!1;for(let r=0,i=t.length-1;r<t.length;i=r++){const c=t[r],u=t[i],f=c.x,h=c.y,d=u.x,p=u.y;h>o!=p>o&&n<(d-f)*(o-h)/(p-h)+f&&(s=!s)}return s}function Ji(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Zi(n,t)}function Ye(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Qi=Uo,el=Ut,tl=Wo,nl=Vo,ol=Yt,rl=Yo,sl=gt,al=qo,il=Jo,ll=er,cl=nr,ul=or,dl=rr,fl=ar,pl=lr,xt="DropdownMenu",[hl,Lc]=Le(xt,[Go]),se=Go(),[ml,ur]=hl(xt),dr=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:s,defaultOpen:r,onOpenChange:i,modal:c=!0}=e,u=se(t),f=l.useRef(null),[h,d]=Ot({prop:s,defaultProp:r??!1,onChange:i,caller:xt});return a.jsx(ml,{scope:t,triggerId:nt(),triggerRef:f,contentId:nt(),open:h,onOpenChange:d,onOpenToggle:l.useCallback(()=>d(p=>!p),[d]),modal:c,children:a.jsx(Qi,{...u,open:h,onOpenChange:d,dir:o,modal:c,children:n})})};dr.displayName=xt;var fr="DropdownMenuTrigger",pr=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...s}=e,r=ur(fr,n),i=se(n);return a.jsx(el,{asChild:!0,...i,children:a.jsx(re.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:Tt(t,r.triggerRef),onPointerDown:F(e.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(r.onOpenToggle(),r.open||c.preventDefault())}),onKeyDown:F(e.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&r.onOpenToggle(),c.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});pr.displayName=fr;var gl="DropdownMenuPortal",hr=e=>{const{__scopeDropdownMenu:t,...n}=e,o=se(t);return a.jsx(tl,{...o,...n})};hr.displayName=gl;var mr="DropdownMenuContent",gr=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ur(mr,n),r=se(n),i=l.useRef(!1);return a.jsx(nl,{id:s.contentId,"aria-labelledby":s.triggerId,...r,...o,ref:t,onCloseAutoFocus:F(e.onCloseAutoFocus,c=>{var u;i.current||(u=s.triggerRef.current)==null||u.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:F(e.onInteractOutside,c=>{const u=c.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;(!s.modal||h)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gr.displayName=mr;var xl="DropdownMenuGroup",vl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(ol,{...s,...o,ref:t})});vl.displayName=xl;var yl="DropdownMenuLabel",bl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(rl,{...s,...o,ref:t})});bl.displayName=yl;var wl="DropdownMenuItem",Cl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(sl,{...s,...o,ref:t})});Cl.displayName=wl;var Pl="DropdownMenuCheckboxItem",El=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(al,{...s,...o,ref:t})});El.displayName=Pl;var Sl="DropdownMenuRadioGroup",Il=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(il,{...s,...o,ref:t})});Il.displayName=Sl;var Nl="DropdownMenuRadioItem",Rl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(ll,{...s,...o,ref:t})});Rl.displayName=Nl;var Ml="DropdownMenuItemIndicator",jl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(cl,{...s,...o,ref:t})});jl.displayName=Ml;var Al="DropdownMenuSeparator",_l=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(ul,{...s,...o,ref:t})});_l.displayName=Al;var Dl="DropdownMenuArrow",Ol=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(dl,{...s,...o,ref:t})});Ol.displayName=Dl;var Tl="DropdownMenuSubTrigger",Ll=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(fl,{...s,...o,ref:t})});Ll.displayName=Tl;var kl="DropdownMenuSubContent",zl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=se(n);return a.jsx(pl,{...s,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zl.displayName=kl;var $l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Fl=$l.reduce((e,t)=>{const n=Xe(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:i,...c}=s,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Hl="Arrow",xr=l.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...r}=e;return a.jsx(Fl.svg,{...r,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});xr.displayName=Hl;var Gl=xr,Kl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vr=Kl.reduce((e,t)=>{const n=Xe(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:i,...c}=s,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Zt="Popper",[yr,br]=Le(Zt),[Ul,wr]=yr(Zt),Cr=e=>{const{__scopePopper:t,children:n}=e,[o,s]=l.useState(null);return a.jsx(Ul,{scope:t,anchor:o,onAnchorChange:s,children:n})};Cr.displayName=Zt;var Pr="PopperAnchor",Er=l.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,r=wr(Pr,n),i=l.useRef(null),c=oe(t,i);return l.useEffect(()=>{r.onAnchorChange((o==null?void 0:o.current)||i.current)}),o?null:a.jsx(vr.div,{...s,ref:c})});Er.displayName=Pr;var Jt="PopperContent",[Bl,Wl]=yr(Jt),Sr=l.forwardRef((e,t)=>{var R,L,z,W,te,ne;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:r="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:d="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:x,...v}=e,y=wr(Jt,n),[g,b]=l.useState(null),C=oe(t,B=>b(B)),[P,M]=l.useState(null),I=jn(P),S=(I==null?void 0:I.width)??0,w=(I==null?void 0:I.height)??0,E=o+(r!=="center"?"-"+r:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},T=Array.isArray(f)?f:[f],j=T.length>0,H={padding:A,boundary:T.filter(Yl),altBoundary:j},{refs:K,floatingStyles:G,placement:U,isPositioned:q,middlewareData:Y}=An({strategy:"fixed",placement:E,whileElementsMounted:(...B)=>$n(...B,{animationFrame:m==="always"}),elements:{reference:y.anchor},middleware:[_n({mainAxis:s+w,alignmentAxis:i}),u&&Dn({mainAxis:!0,crossAxis:!1,limiter:d==="partial"?zn():void 0,...H}),u&&On({...H}),Tn({...H,apply:({elements:B,rects:ee,availableWidth:fe,availableHeight:ge})=>{const{width:Ce,height:Q}=ee.reference,le=B.floating.style;le.setProperty("--radix-popper-available-width",`${fe}px`),le.setProperty("--radix-popper-available-height",`${ge}px`),le.setProperty("--radix-popper-anchor-width",`${Ce}px`),le.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),P&&Ln({element:P,padding:c}),Xl({arrowWidth:S,arrowHeight:w}),p&&kn({strategy:"referenceHidden",...H})]}),[D,Z]=Rr(U),V=he(x);Ue(()=>{q&&(V==null||V())},[q,V]);const J=(R=Y.arrow)==null?void 0:R.x,N=(L=Y.arrow)==null?void 0:L.y,O=((z=Y.arrow)==null?void 0:z.centerOffset)!==0,[k,_]=l.useState();return Ue(()=>{g&&_(window.getComputedStyle(g).zIndex)},[g]),a.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:k,"--radix-popper-transform-origin":[(W=Y.transformOrigin)==null?void 0:W.x,(te=Y.transformOrigin)==null?void 0:te.y].join(" "),...((ne=Y.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:a.jsx(Bl,{scope:n,placedSide:D,onArrowChange:M,arrowX:J,arrowY:N,shouldHideArrow:O,children:a.jsx(vr.div,{"data-side":D,"data-align":Z,...v,ref:C,style:{...v.style,animation:q?void 0:"none"}})})})});Sr.displayName=Jt;var Ir="PopperArrow",Vl={top:"bottom",right:"left",bottom:"top",left:"right"},Nr=l.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,r=Wl(Ir,o),i=Vl[r.placedSide];return a.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:a.jsx(Gl,{...s,ref:n,style:{...s.style,display:"block"}})})});Nr.displayName=Ir;function Yl(e){return e!==null}var Xl=e=>({name:"transformOrigin",options:e,fn(t){var y,g,b;const{placement:n,rects:o,middlewareData:s}=t,i=((y=s.arrow)==null?void 0:y.centerOffset)!==0,c=i?0:e.arrowWidth,u=i?0:e.arrowHeight,[f,h]=Rr(n),d={start:"0%",center:"50%",end:"100%"}[h],p=(((g=s.arrow)==null?void 0:g.x)??0)+c/2,m=(((b=s.arrow)==null?void 0:b.y)??0)+u/2;let x="",v="";return f==="bottom"?(x=i?d:`${p}px`,v=`${-u}px`):f==="top"?(x=i?d:`${p}px`,v=`${o.floating.height+u}px`):f==="right"?(x=`${-u}px`,v=i?d:`${m}px`):f==="left"&&(x=`${o.floating.width+u}px`,v=i?d:`${m}px`),{data:{x,y:v}}}});function Rr(e){const[t,n="center"]=e.split("-");return[t,n]}var ql=Cr,Mr=Er,Zl=Sr,Jl=Nr,Ql=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jr=Ql.reduce((e,t)=>{const n=Xe(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:i,...c}=s,u=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),vt="Popover",[Ar,kc]=Le(vt,[br]),Qe=br(),[ec,we]=Ar(vt),_r=e=>{const{__scopePopover:t,children:n,open:o,defaultOpen:s,onOpenChange:r,modal:i=!1}=e,c=Qe(t),u=l.useRef(null),[f,h]=l.useState(!1),[d,p]=Ot({prop:o,defaultProp:s??!1,onChange:r,caller:vt});return a.jsx(ql,{...c,children:a.jsx(ec,{scope:t,contentId:nt(),triggerRef:u,open:d,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(m=>!m),[p]),hasCustomAnchor:f,onCustomAnchorAdd:l.useCallback(()=>h(!0),[]),onCustomAnchorRemove:l.useCallback(()=>h(!1),[]),modal:i,children:n})})};_r.displayName=vt;var Dr="PopoverAnchor",tc=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=we(Dr,n),r=Qe(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=s;return l.useEffect(()=>(i(),()=>c()),[i,c]),a.jsx(Mr,{...r,...o,ref:t})});tc.displayName=Dr;var Or="PopoverTrigger",Tr=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=we(Or,n),r=Qe(n),i=oe(t,s.triggerRef),c=a.jsx(jr.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Fr(s.open),...o,ref:i,onClick:F(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:a.jsx(Mr,{asChild:!0,...r,children:c})});Tr.displayName=Or;var Qt="PopoverPortal",[nc,oc]=Ar(Qt,{forceMount:void 0}),Lr=e=>{const{__scopePopover:t,forceMount:n,children:o,container:s}=e,r=we(Qt,t);return a.jsx(nc,{scope:t,forceMount:n,children:a.jsx(ke,{present:n||r.open,children:a.jsx(Ws,{asChild:!0,container:s,children:o})})})};Lr.displayName=Qt;var Te="PopoverContent",kr=l.forwardRef((e,t)=>{const n=oc(Te,e.__scopePopover),{forceMount:o=n.forceMount,...s}=e,r=we(Te,e.__scopePopover);return a.jsx(ke,{present:o||r.open,children:r.modal?a.jsx(sc,{...s,ref:t}):a.jsx(ac,{...s,ref:t})})});kr.displayName=Te;var rc=Xe("PopoverContent.RemoveScroll"),sc=l.forwardRef((e,t)=>{const n=we(Te,e.__scopePopover),o=l.useRef(null),s=oe(t,o),r=l.useRef(!1);return l.useEffect(()=>{const i=o.current;if(i)return Sn(i)},[]),a.jsx(Nn,{as:rc,allowPinchZoom:!0,children:a.jsx(zr,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:F(e.onCloseAutoFocus,i=>{var c;i.preventDefault(),r.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:F(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;r.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:F(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),ac=l.forwardRef((e,t)=>{const n=we(Te,e.__scopePopover),o=l.useRef(!1),s=l.useRef(!1);return a.jsx(zr,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var i,c;(i=e.onCloseAutoFocus)==null||i.call(e,r),r.defaultPrevented||(o.current||(c=n.triggerRef.current)==null||c.focus(),r.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:r=>{var u,f;(u=e.onInteractOutside)==null||u.call(e,r),r.defaultPrevented||(o.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=r.target;((f=n.triggerRef.current)==null?void 0:f.contains(i))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),zr=l.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,...d}=e,p=we(Te,n),m=Qe(n);return In(),a.jsx(Vs,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:r,children:a.jsx(Ys,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:f,onDismiss:()=>p.onOpenChange(!1),children:a.jsx(Zl,{"data-state":Fr(p.open),role:"dialog",id:p.contentId,...m,...d,ref:t,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),$r="PopoverClose",ic=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=we($r,n);return a.jsx(jr.button,{type:"button",...o,ref:t,onClick:F(e.onClick,()=>s.onOpenChange(!1))})});ic.displayName=$r;var lc="PopoverArrow",cc=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Qe(n);return a.jsx(Jl,{...s,...o,ref:t})});cc.displayName=lc;function Fr(e){return e?"open":"closed"}const uc=Object.assign({"/content/solutions/playground.json":()=>ns(()=>import("./playground-CPt6jU9v.js"),[])}),dc=()=>{const{setNodes:e,setEdges:t,setViewport:n}=me(),o=ie(f=>f.currentLevel),s=de[o].hints.length?de[o].hints:["No hints here"],[r,i]=l.useState(0),c=uc[`/content/solutions/${o}.json`],u=async()=>{const f=await c();if(f){const{x:h=0,y:d=0,zoom:p=1}=f.viewport;e(f.nodes),t(f.edges),n({x:h,y:d,zoom:p})}};return a.jsxs(_r,{children:[a.jsx(Tr,{asChild:!0,children:a.jsx(be,{side:"left",tooltip:"Help Menu","aria-label":"Help Menu",children:a.jsx(ts,{className:"text-white"})})}),a.jsx(Lr,{children:a.jsx(kr,{side:"bottom",className:"mr-3",children:a.jsxs("div",{className:"flex w-200 flex-col gap-4 rounded bg-slate-800 p-4 font-mono text-white shadow-lg outline-1 outline-slate-700 outline-solid",children:[a.jsx("h1",{className:"text-xl",children:"Hints"}),s[r],a.jsx(De,{className:"text-slate-400 italic hover:underline",target:"_blank",to:"/docs/",children:"Find information on this topic here"}),a.jsx("hr",{className:"mx-auto h-1 w-full rounded-sm border-0 bg-slate-700"}),a.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[a.jsx("button",{disabled:r===0,className:Ke("rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",r===0?"opacity-50":"cursor-pointer hover:bg-slate-600"),onClick:()=>{r>0&&i(r-1)},children:"Previous Hint"}),a.jsx("button",{disabled:r===s.length-1,className:Ke("rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",r===s.length-1?"opacity-50":"cursor-pointer hover:bg-slate-600"),onClick:()=>{r<s.length-1&&i(r+1)},children:"Next Hint"}),a.jsx("button",{className:"cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white hover:bg-slate-600",children:"First Correct Node"}),a.jsx("button",{className:"hover:bg-jam-600 cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",onClick:u,children:"Full Solution"})]})]})})})]})},fc=({rfInstance:e})=>{const{getNodes:t,getEdges:n,setViewport:o,setEdges:s,setNodes:r}=me();ye(u=>u.debugPrint);const[i,c]=l.useState(!1);return a.jsxs(ut,{position:"top-right",className:"flex flex-col items-end justify-center gap-2",children:[a.jsxs(dr,{open:i,onOpenChange:c,children:[a.jsx(pr,{asChild:!0,children:a.jsx(be,{side:"left",tooltip:"Add Node","aria-label":"Add Node",children:a.jsx(os,{className:"text-white"})})}),a.jsx(hr,{children:a.jsx(gr,{align:"end",children:a.jsx(Ht,{onClose:()=>c(!1),x:1800,y:400})})})]}),a.jsx(dc,{}),!1]})},pc=({nodeIds:e,x:t,y:n,onClose:o})=>{const{getNodes:s,getEdges:r,setNodes:i,setEdges:c}=me(),u=l.useCallback(()=>{i(f=>f.filter(h=>!e.includes(h.id))),c(f=>f.filter(h=>!e.includes(h.source)&&!e.includes(h.target))),o()},[e,i,c,o]);return a.jsx("div",{style:{position:"absolute",top:n,left:t,zIndex:1e3},children:a.jsxs(ut,{className:"flex w-55 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[a.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:()=>{Rn(s().filter(f=>e.includes(f.id)),r,s,c,i),o()},children:[a.jsxs("span",{children:["Duplicate ",e.length," nodes "]}),a.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Ctrl+D"})]}),a.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[a.jsxs("span",{children:["Delete ",e.length," nodes "]}),a.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})})};function hc(){const[e,t]=l.useState(null),[n,o]=l.useState(null),[s,r]=l.useState(null),i=l.useCallback(h=>{h.preventDefault();const d=yt(h);t({x:d.x,y:d.y})},[t]),c=l.useCallback((h,d)=>{h.preventDefault();const p=yt(h);o({nodeId:d.id,nodeType:d.type,nodeLoopId:d.data.loopId,nodeParentId:d.parentId,x:p.x,y:p.y})},[o]),u=l.useCallback((h,d)=>{if(h.preventDefault(),d.length===0)return;const p=yt(h);r({nodeIds:d.map(m=>m.id),x:p.x,y:p.y})},[r]),f=l.useCallback(()=>{t(null),o(null),r(null)},[t,o,r]);return{paneContextMenu:e,nodeContextMenu:n,selectionContextMenu:s,setPaneContextMenu:t,setNodeContextMenu:o,setSelectionContextMenu:r,handlePaneContextMenu:i,handleNodeContextMenu:c,handleSelectionContextMenu:u,onPaneClick:f}}const bn=e=>Symbol.iterator in e,wn=e=>"entries"in e,Cn=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),o=t instanceof Map?t:new Map(t.entries());if(n.size!==o.size)return!1;for(const[s,r]of n)if(!Object.is(r,o.get(s)))return!1;return!0},mc=(e,t)=>{const n=e[Symbol.iterator](),o=t[Symbol.iterator]();let s=n.next(),r=o.next();for(;!s.done&&!r.done;){if(!Object.is(s.value,r.value))return!1;s=n.next(),r=o.next()}return!!s.done&&!!r.done};function gc(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!bn(e)||!bn(t)?Cn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):wn(e)&&wn(t)?Cn(e,t):mc(e,t)}function xc(e){const t=Pn.useRef(void 0);return n=>{const o=e(n);return gc(t.current,o)?t.current:t.current=o}}const vc=e=>({nodes:e.nodes,edges:e.edges,setNodes:e.setNodes,setEdges:e.setEdges,highlightDuplicateNodes:e.highlightDuplicateNodes});function yc(){const{getIntersectingNodes:e,getNode:t,getNodes:n}=me(),{nodes:o,edges:s,setNodes:r,setEdges:i,highlightDuplicateNodes:c}=ct(xc(vc)),u=ye(y=>y.replaceNode),f=ye(y=>y.removeNode),h=ye(y=>y.addEdge),d=ye(y=>y.removeEdge),p=l.useCallback(y=>{let g=!1;y.forEach(b=>{switch(b.type){case"add":u(b.item),g=b.item.type==="ExportToGameobject";break;case"remove":{const C=t(b.id);if(C!=null&&C.data.loopStart||C!=null&&C.data.loopEnd){const P=n().filter(M=>M.id!==b.id&&M.data.loopId===C.data.loopId)[0];r(M=>M.filter(I=>I.data.loopId!==(C==null?void 0:C.data.loopId)).map(I=>({...I,data:{...I.data,parentLoopId:I.data.parentLoopId===C.data.loopId?void 0:I.data.parentLoopId}}))),i(M=>M.filter(I=>I.target===P.id||I.source===P.id?(d(I.id),!1):!0)),f(P.id)}f(b.id),g=!0;break}case"replace":u(b.item),g=b.item.type==="ExportToGameobject";break}}),r(b=>ds(y,b)),g&&c()},[r,u,t,f,n,i,d,c]),m=l.useCallback(y=>{y.forEach(g=>{switch(g.type){case"remove":d(g.id);break;case"add":h(g.item);break}}),i(g=>Cs(y,g))},[i,h,d]),x=l.useCallback(y=>{const g=t(y.source),b=t(y.target);(g!=null&&g.data.loopStart&&g.data.loopId===(b==null?void 0:b.data.loopId)||g!=null&&g.data.loopStart&&(b==null?void 0:b.data.parentLoopId)===g.data.loopId||g!=null&&g.data.loopEnd&&g.data.parentLoopId===(b==null?void 0:b.data.parentLoopId)||b!=null&&b.data.loopEnd&&(g==null?void 0:g.data.parentLoopId)===b.data.loopId||!(g!=null&&g.data.loopStart)&&!(b!=null&&b.data.loopEnd)&&(g==null?void 0:g.data.parentLoopId)===(b==null?void 0:b.data.parentLoopId)?!0:(fs({title:"Invalid Loop Connection!",description:"Connections within loops are restricted to other nodes of the same loop. External nodes may only link to the loop's entry point or accept data from its exit point."}),!1))&&(h(y),i(P=>Ps(y,P)))},[i,t,h]);return{nodes:o,edges:s,onNodesChange:p,onEdgesChange:m,onConnect:x,onNodeDragStop:(y,g,b)=>{const C={x:Math.min(...b.map(w=>w.parentId?w.position.x+t(w.parentId).position.x:w.position.x)),y:Math.min(...b.map(w=>w.parentId?w.position.y+t(w.parentId).position.y:w.position.y)),width:Math.max(...b.map(w=>w.position.x+w.measured.width))-Math.min(...b.map(w=>w.position.x)),height:Math.max(...b.map(w=>w.position.y+w.measured.height))-Math.min(...b.map(w=>w.position.y))},P=e(C).filter(w=>w.type==="Group"&&w.selected===!1),M=P.reduce((w,E)=>{const A=E.measured.width*E.measured.height,T=w.measured.width*w.measured.height;return A>T?E:w},P[0]),I=[],S=[];b.forEach(w=>{if(w.type!=="Group"){if(M){if(w.parentId===void 0)I.push({...w,parentId:M.id,position:{x:w.position.x-M.position.x,y:w.position.y-M.position.y}});else if(M.id!==w.parentId){if(!b.some(E=>E.id===w.parentId)){console.log("node is directly adopted",w.id);const E=t(w.parentId);if(!E){console.warn(`recently moved node ${w.id} has an invalid parentId of ${w.parentId}`);return}I.push({...w,parentId:M.id,position:{x:w.position.x+E.position.x-M.position.x,y:w.position.y+E.position.y-M.position.y}}),S.includes(E)||S.push(E)}}}else if(w.parentId!==void 0){if(!b.some(E=>E.id===w.parentId)){const E=t(w.parentId);if(!E){console.warn(`recently moved node ${w.id} has an invalid parentId of ${w.parentId}`);return}I.push({...w,parentId:void 0,position:{x:w.position.x+E.position.x,y:w.position.y+E.position.y}}),S.includes(E)||S.push(E)}}M&&S.push(M)}}),I.push(...S.map(w=>{const E=I.filter(H=>H.parentId===w.id);console.log("updatedChildren",E);const A=n().filter(H=>H.parentId===w.id&&!I.some(K=>K.id===H.id));console.log("nonUpdatedChildren",A);const T=[...E,...A],j=ps(w,T);return T.forEach(H=>{const K={x:H.position.x+j.offset.x,y:H.position.y+j.offset.y};E.some(G=>G.id===H.id)?I.splice(I.findIndex(G=>G.id===H.id),1,{...H,position:K}):I.push({...H,position:K})}),{...w,position:{x:j.bounds.x,y:j.bounds.y},data:{...w.data,isParent:T.length>0,minWidth:j.bounds.minWidth,minHeight:j.bounds.minHeight},style:{zIndex:-1},width:j.bounds.width,height:j.bounds.height}})),r(w=>w.map(A=>{const T=I.find(j=>j.id===A.id);return T?{...T,dragging:!1}:{...A,dragging:!1}}))}}}const bc=l.memo(({id:e,data:t})=>{const n=Se(m=>m.gameObjects),o=Array.from(n.keys()),{isOpen:s,getToggleButtonProps:r,getMenuProps:i,getLabelProps:c,highlightedIndex:u,getItemProps:f,selectedGameObjects:h}=Gn(o,t.selectedGameObjects?t.selectedGameObjects:[o[0]],e),d=l.useMemo(()=>Mn("get",n,h),[n,h]),{updateNodeData:p}=me();return l.useEffect(()=>{p(e,{compute:(m,x)=>{const v=h.length===1?0:Math.round(Rt(m,ot,-1));if(0>v||v>=h.length){x.clear();return}const y=h[v];d.forEach(g=>{x.set(g,n.get(y).get(g).value)})},selectedGameObjects:h})},[h]),a.jsx("div",{className:"min-w-48",children:a.jsxs(Kn,{label:"Import From Gameobject",type:"import",docsName:"import",children:[a.jsxs("div",{className:"text-left",children:[h.length>1&&a.jsx(Un,{id:ot,position:rt.Left}),a.jsx(Bn,{highlightedIndex:u,isOpen:s,selectableObjects:o,selectedObjects:h,useSelectProps:{getItemProps:f,getLabelProps:c,getMenuProps:i,getToggleButtonProps:r}})]}),d.map(m=>a.jsx(Wn,{id:m,position:rt.Right,label:m},m))]})})}),wc=l.memo(({id:e,data:t,selected:n})=>{const o=ie(P=>P.currentLevel),s=de[o].modifiableGameObjects,r=Se(P=>P.gameObjects),i=Array.from(r.keys()),{isOpen:c,getToggleButtonProps:u,getMenuProps:f,getLabelProps:h,highlightedIndex:d,getItemProps:p,selectedGameObjects:m}=Gn(i,t.selectedGameObjects?t.selectedGameObjects:[i[0]],e),x=l.useMemo(()=>Mn("set",r,m),[r,m]),v=Se(P=>P.setData),y=Se(P=>P.addHandle),g=Se(P=>P.removeHandle),b=l.useRef(t.curLabel?t.curLabel.current:""),{updateNodeData:C}=me();return l.useEffect(()=>{C(e,{compute:(P,M)=>{const I=m.length===1?0:Math.round(Rt(P,ot,-1));if(0>I||I>=m.length)return;const S=m[I];x.forEach(w=>{v(S,w,Rt(P,w,0))})},selectedGameObjects:m})},[m]),a.jsx("div",{children:a.jsxs(Kn,{label:"Export To Gameobject",type:"export",docsName:"export",children:[a.jsxs("div",{className:"text-left",children:[m.length>1&&a.jsx(Un,{id:ot,position:rt.Left}),a.jsx(Bn,{highlightedIndex:d,isOpen:c,selectableObjects:i,selectedObjects:m,useSelectProps:{getItemProps:p,getLabelProps:h,getMenuProps:f,getToggleButtonProps:u}})]}),x.map(P=>a.jsxs("div",{className:"flex w-full items-center [&>*:nth-child(even)]:pointer-events-none [&>*:nth-child(even)]:opacity-0 hover:[&>*:nth-child(even)]:pointer-events-auto hover:[&>*:nth-child(even)]:opacity-100 "+(n?"hover:bg-slate-800":"hover:bg-slate-700"),children:[a.jsx(Wn,{id:P,position:rt.Left,label:P},P),!s.some(({id:M,connections:I})=>m.includes(M)&&I.some(S=>S.label===P))&&a.jsx(rs,{className:"mt-[1px] ml-2 cursor-pointer text-red-400",onClick:()=>{m.forEach(M=>g(M,P))}})]},P)),!!m.length&&a.jsx(Es,{addHandle:(P,M)=>y(P,M),handleIdentifiers:m,handleLabel:b,nodeId:e,updateNodeData:C})]})})}),Cc={Value:Os,Display:Ds,Time:_s,KeyPress:As,Math:js,ExportToGameobject:wc,ImportFromGameobject:bc,Switch:Ms,Group:Rs,ForStart:Ns,ForEnd:Is,MousePosition:Ss},Pc=()=>{const[e,t]=l.useState(),{nodes:n,edges:o,onNodesChange:s,onEdgesChange:r,onConnect:i,onNodeDragStop:c}=yc(),{paneContextMenu:u,nodeContextMenu:f,selectionContextMenu:h,handlePaneContextMenu:d,handleNodeContextMenu:p,handleSelectionContextMenu:m,onPaneClick:x,setNodeContextMenu:v,setPaneContextMenu:y,setSelectionContextMenu:g}=hc();return a.jsxs(a.Fragment,{children:[a.jsxs(ks,{id:"node-editor",onInit:t,nodeTypes:Cc,edgeTypes:Sa,nodes:n,edges:o,onNodesChange:s,onEdgesChange:r,onPaneContextMenu:d,onNodeContextMenu:p,onSelectionContextMenu:m,onConnect:i,onPaneClick:x,disableKeyboardA11y:!0,fitView:!1,proOptions:{hideAttribution:!0},deleteKeyCode:["Delete","Backspace"],onNodeDragStop:c,defaultEdgeOptions:{type:"Deletable"},children:[a.jsx(zs,{bgColor:"#14141d",color:"#a7abc2"}),a.jsx(fc,{rfInstance:e}),a.jsx(Ia,{}),a.jsx(Aa,{}),a.jsx(hs,{})]}),u&&a.jsx(Da,{x:u.x,y:u.y,onClose:()=>y(null)}),f&&a.jsx(_a,{nodeId:f.nodeId,nodeType:f.nodeType,nodeLoopId:f.nodeLoopId,nodeParentId:f.nodeParentId,x:f.x,y:f.y,onClose:()=>v(null)}),h&&a.jsx(pc,{nodeIds:h.nodeIds,x:h.x,y:h.y,onClose:()=>g(null)})]})},Ec=()=>a.jsx(Ts,{children:a.jsx(Ls,{children:a.jsx(Pc,{})})}),Sc=()=>{var s;const e=ie(r=>r.currentLevel),t=(s=ho(e))==null?void 0:s.next,n=ie(r=>r.levelCompleteDialogOpen),o=ie(r=>r.setLevelCompleteDialogOpen);return a.jsx(go,{title:e,open:n,onOpenChange:o,desc:`This dialog displays the level completion dialog of the
            ${e} level. You can now get to the main menu 
            using the To Menu button or to the next level using the 
            Next Level button.`,children:a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("div",{className:"flex flex-1 flex-row",children:[a.jsx("div",{className:"my-auto w-1/3 pr-4",children:a.jsx("div",{style:{aspectRatio:"1 / 1",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),a.jsxs("div",{className:"relative my-auto flex h-36 w-full flex-col items-center justify-center rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[a.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),a.jsx("p",{className:"mb-2 text-2xl font-bold",children:de[e].success}),a.jsx("p",{className:"text-lg italic",children:"Congratulations!"})]})]}),a.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[a.jsx(Ge,{asChild:!0,children:a.jsx(De,{to:"/",className:"cursor-pointer rounded-lg bg-slate-700/80 px-4 py-2 text-white hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"To Menu"})}),a.jsx(Ge,{asChild:!0,children:a.jsx("button",{className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Continue Playing"})}),t&&a.jsx(Ge,{asChild:!0,children:a.jsx(De,{to:`/levels/${t}`,className:"cursor-pointer rounded-lg bg-slate-700/80 px-4 py-2 text-white hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next Level"})})]})]})})},Ic=({params:e})=>{const t=l.useRef(null),n=e.id||"calculator",[o,s]=l.useState(!0);return l.useEffect(()=>{if(!t.current)return;if(tn.init(),as(t.current),!(n in de))throw new Error(`Level ${n} not found`);Pa(n);const r=setInterval(()=>{ct.getState().save(),ye.getState().save(),Lt.getState().save()},1e3);return()=>{is(),clearInterval(r),s(!0),tn.cleanup()}},[n]),a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"md:hidden absolute top-0 left-0 z-10 h-full w-full bg-slate-900 p-8 text-center",children:a.jsx("div",{className:"flex h-full w-full items-center justify-center",children:a.jsx("h1",{className:"text-2xl font-bold text-white",children:"Please use a desktop browser to play the game."})})}),a.jsx(xo,{open:o,onOpenChange:s}),a.jsx(Sc,{}),a.jsxs(fo,{direction:"horizontal",children:[a.jsx(Mt,{id:"game-panel",minSize:25,order:1,children:a.jsx("canvas",{id:"game-canvas",ref:t,className:"w-1/2"})}),a.jsx(po,{className:"flex w-2 items-center justify-center bg-slate-800",children:a.jsx(ss,{width:32,height:32,className:"scale-125 text-slate-400"})}),a.jsx(Mt,{id:"nodes-panel",minSize:25,order:2,children:a.jsx(Ec,{})})]})]})},zc=Kr(Ic);export{zc as default};
