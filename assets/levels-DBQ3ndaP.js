import{n as P,o as z,p as G,u as i,b as K,M as I,d as l}from"./time-B46M-L-w.js";const _="/dumpster/assets/alley_one-Ch0po_m1.jpg",Y="/dumpster/assets/calc_card-CwUVh-Iy.png",X="/dumpster/assets/iffies_card-CYinWxcs.png",R="/dumpster/assets/playground_card-CtvQjKSv.png",U="/dumpster/assets/sitting_card-DW_YTAz0.png",H="/dumpster/assets/house-BZR3Z7t1.png",f=new Set,T=new Set,E=new Set;let C=!1,F,L;function O(e){const t=e.toLowerCase();return t==="space"?" ":t==="enter"?"Enter":e}function A(){C||(C=!0,F=e=>{const t=e.key;f.has(t)||T.add(t),f.add(t)},L=e=>{const t=e.key;f.delete(t),E.add(t)},window.addEventListener("keydown",F),window.addEventListener("keyup",L))}function N(){C&&(window.removeEventListener("keydown",F),window.removeEventListener("keyup",L),C=!1,f.clear(),T.clear(),E.clear())}function V(e){return f.has(O(e))}function q(e){return T.has(O(e))}function W(e){return E.has(O(e))}function B(){T.clear(),E.clear()}const x={init:A,cleanup:N,isKeyDown:V,isKeyPressed:q,isKeyReleased:W,clearPressedAndReleased:B},j={first:!0};function oe(e){if(!j.first)return;j.first=!1;let t=0,a=0;const{k:s,game:o}=p(e);return P.getState().setKeyDownFunction(x.isKeyDown),P.getState().setKeyPressedFunction(x.isKeyPressed),P.getState().setKeyReleasedFunction(x.isKeyReleased),z.getState().setMousePosFunction(()=>s.mousePos()),G.getState().setTimeFunction(()=>s.time()-a),G.getState().setDeltaTimeFunction(()=>s.dt()),s.onUpdate(()=>{if(i.getState().isPaused){o.paused||(t=s.time()),o.paused=!0;return}o.paused&&(a+=s.time()-t,t=0,o.paused=!1),K.getState().compute(),x.clearPressedAndReleased()}),s}let m;function p(e){if(m)return m;const t=I({global:!1,pixelDensity:2,touchToMouse:!0,debug:!1,debugKey:"f1",canvas:e,background:"#2b292f"}),a=t.add([t.timer()]);return m={k:t,game:a},m}function se(){if(!m)return;const{game:e,app:t}=m.k._k;e.events.onOnce("frameEnd",()=>{t.quit()}),m=void 0,j.first=!0}function y(e){const{k:t,game:a}=p(),s={};if(e.includes("raccoon")){t.loadSprite("raccoon","/game/sprites/raccoon_spritesheet.png",{sliceX:4,sliceY:4,anims:{idle:{from:0,to:0,loop:!1},idleHolding:{from:1,to:1,loop:!1},walk:{from:2,to:7,loop:!0},walkHolding:{from:8,to:13,loop:!0}}});const o=a.add([t.sprite("raccoon",{anim:"walkHolding"}),t.pos(0,0),t.rotate(0),t.scale(d),t.anchor("bot"),t.area(),t.z(2),"raccoon",t.state("idle",["idle","walkLeft","walkRight"])]);o.onStateEnter("idle",()=>{o.play("idle")}),o.onStateEnter("walkLeft",()=>{o.play("walk"),o.scaleTo(t.vec2(-.1,d))}),o.onStateEnter("walkRight",()=>{o.play("walk"),o.scaleTo(t.vec2(d,d))}),s.raccoon=o}if((e.includes("trashcanEmpty")||e.includes("trashcanFilled"))&&t.loadSprite("trashcan","/game/sprites/trashcan_spritesheet.png",{sliceX:2,sliceY:1,anims:{empty:{from:0,to:0,loop:!1},filled:{from:1,to:1,loop:!1}}}),e.includes("trashcanEmpty")){const o=a.add([t.sprite("trashcan",{anim:"empty"}),t.anchor("bot"),t.pos(0,0),t.scale(d),t.area(),t.z(1),"trashcanEmpty"]);s.trashcanEmpty=o}if(e.includes("trashcanFilled")){const o=a.add([t.sprite("trashcan",{anim:"filled"}),t.anchor("bot"),t.pos(0,0),t.scale(d),t.area(),t.z(1),"trashcanFilled"]);s.trashcanFilled=o}if(e.includes("goalFlag")){t.loadSprite("flag","/game/sprites/flag_spritesheet.png",{sliceX:2,sliceY:2,anims:{default:{from:0,to:3,loop:!0}}});const o=a.add([t.sprite("flag",{anim:"default"}),t.anchor("bot"),t.pos(0,0),t.area(),t.scale(d),t.z(1)]);s.goalFlag=o}return s}function b(e,t=0){const{k:a,game:s}=p();e.includes("background1")&&(a.loadSprite("background","/game/backgrounds/background1.png"),a.loadSprite("backgroundLight","/game/backgrounds/background1_light.png")),e.includes("backgroundCalc")&&(a.loadSprite("background","/game/backgrounds/background_calculator.png"),a.loadSprite("backgroundLight","/game/backgrounds/background1_light.png")),s.add([a.sprite("background"),a.anchor("center"),a.scale(d),a.pos(0,-4.727),a.z(0)]),s.add([a.sprite("backgroundLight"),a.anchor("center"),a.scale(d),a.pos(t,-4.727),a.z(100),a.opacity(.75)])}function D(e,t,a="node",s,o={minX:-22.7,maxX:22.7},n={minX:-15,maxX:15}){var u,M,h,k;const g=e.pos.x;a==="node"?(e.pos.x=((M=(u=l.getState().gameObjects.get("raccoon"))==null?void 0:u.get("xpos"))==null?void 0:M.value)??0,e.pos.y=((k=(h=l.getState().gameObjects.get("raccoon"))==null?void 0:h.get("ypos"))==null?void 0:k.value)??0):a==="input"&&(t.isKeyDown("left")&&(e.pos.x-=7*t.dt()),t.isKeyDown("right")&&(e.pos.x+=7*t.dt())),e.pos.x=Math.max(o.minX,Math.min(o.maxX,e.pos.x));const c=Math.max(n.minX,Math.min(n.maxX,e.pos.x));t.setCamPos(t.lerp(t.getCamPos(),t.vec2(c,-4.727),.1));const r=e.pos.x-g,w=r===0?"idle":r<0?"walkLeft":"walkRight";e.state!==w&&e.enterState(w)}function v(e,t){e==null||e.scaleTo(d*t,d),l.setState({initData:!1})}const Q=()=>{const{k:e,game:t}=p();b(["background1"]);const{raccoon:a}=y(["raccoon"]);e.setCamPos(0,-4.727),e.setCamScale(S*e.height()/947),e.loadSprite("trashcan","/game/sprites/trashcan_spritesheet.png",{sliceX:2,sliceY:1,anims:{empty:{from:0,to:0,loop:!1},filled:{from:1,to:1,loop:!1}}});const s=t.add([e.sprite("trashcan",{anim:"empty"}),e.anchor("bot"),e.pos(0,0),e.scale(d),e.area(),e.z(1),"trashcan1"]),o=t.add([e.sprite("trashcan",{anim:"filled"}),e.anchor("bot"),e.pos(0,0),e.scale(d),e.area(),e.z(1),"trashcan2"]);l.getState().gameObjects.set("trashcan1",new Map([["filled",{access:"get",value:0}],["xpos",{access:"get",value:3.63}],["ypos",{access:"get",value:-.45}]])),l.getState().gameObjects.set("trashcan2",new Map([["filled",{access:"get",value:1}],["xpos",{access:"get",value:-5}],["ypos",{access:"get",value:-2}]])),s.z=3,s.pos.x=3.63,s.pos.y=-.45,o.z=3,o.pos.x=-5,o.pos.y=-2;let n=0,g=Math.random()*4+1,c=0,r=0;const w=.2,u=t.add([e.text("5",{size:2,font:"satoshi"}),e.pos(0,-8),e.anchor("center"),e.z(10),e.opacity(0),"timerText"]);t.onUpdate(()=>{if(i.getState().isPaused)return;if(n+=e.dt(),n>=g){const h=s.pos.x,k=s.pos.y;s.pos.x=o.pos.x,s.pos.y=o.pos.y,o.pos.x=h,o.pos.y=k,l.getState().gameObjects.set("trashcan1",new Map([["filled",{access:"get",value:0}],["xpos",{access:"get",value:s.pos.x}],["ypos",{access:"get",value:s.pos.y}]])),l.getState().gameObjects.set("trashcan2",new Map([["filled",{access:"get",value:1}],["xpos",{access:"get",value:o.pos.x}],["ypos",{access:"get",value:o.pos.y}]])),n=0,g=Math.random()*4+1}if(D(a,e),a.pos.dist(o.pos)<=.5&&!i.getState().levelCompleted){c+=e.dt(),r=0,u.opacity=1;const h=Math.max(0,Math.ceil(5-c));u.text=h.toString(),c>=5&&(i.getState().setLevelCompleteDialogOpen(!0),i.getState().setLevelCompleted(!0),u.opacity=0)}else c>0&&!i.getState().levelCompleted&&(r+=e.dt(),r>=w&&(c=0,r=0,u.opacity=0));l.getState().initData&&v(a,1)})},d=.1,S=55,Z=()=>{const{k:e,game:t}=p();b(["backgroundCalc"],-200);const{raccoon:a}=y(["raccoon"]);e.setCamPos(-5,-4.727),e.setCamScale(S*e.height()/947),a.scaleBy(-1,1),t.onUpdate(()=>{var o,n;if(i.getState().isPaused)return;(((n=(o=l.getState().gameObjects.get("raccoon"))==null?void 0:o.get("solution"))==null?void 0:n.value)??0)==16&&!i.getState().levelCompleted&&(i.getState().setLevelCompleteDialogOpen(!0),i.getState().setLevelCompleted(!0)),l.getState().initData&&v(a,-1)})},J=()=>{const{k:e,game:t}=p();e.loadSprite("raccoon","/game/sprites/raccoon_spritesheet.png",{sliceX:4,sliceY:4,anims:{idle:{from:0,to:0,loop:!1},idleHolding:{from:1,to:1,loop:!1},walk:{from:2,to:7,loop:!0},walkHolding:{from:8,to:13,loop:!0}}}),e.loadSprite("trashcan","/game/sprites/trashcan_spritesheet.png",{sliceX:2,sliceY:1,anims:{empty:{from:0,to:0,loop:!1},filled:{from:1,to:1,loop:!1}}}),e.loadSprite("flag","/game/sprites/flag_spritesheet.png",{sliceX:2,sliceY:2,anims:{default:{from:0,to:3,loop:!0}}}),e.setGravity(2e3);const a=t.add([e.sprite("raccoon",{anim:"walkHolding"}),e.pos(100,e.height()-100),e.scale(5),e.area(),e.body(),"raccoon"]);t.add([e.sprite("flag",{anim:"default"}),e.pos(800,125),e.scale(5),e.area(),"flag"]),t.add([e.rect(e.width(),5),e.pos(0,e.height()-5),e.color(255,200,200),e.area(),e.body({isStatic:!0}),"floor"]);const s=t.add([e.rect(100,300),e.pos(e.width()-200,e.height()-325),e.color(50,50,50),e.area(),"ladderRight"]);t.add([e.rect(e.width()-50,40),e.pos(25,e.height()-345),e.color(100,100,100),e.area(),e.body({isStatic:!0}),e.platformEffector(),"platformMiddle"]);const o=t.add([e.rect(100,300),e.pos(50,e.height()-665),e.color(50,50,50),e.area(),"ladderLeft"]);t.add([e.rect(e.width()-50,40),e.pos(25,e.height()-690),e.color(100,100,100),e.area(),e.body({isStatic:!0}),e.platformEffector(),"platformTop"]),e.onCollide("raccoon","flag",(n,g)=>{n.pos.x=100,n.pos.y=e.height()-100,n.vel.x=0,n.vel.y=0,console.log("Collided with finish line")}),t.onUpdate(()=>{var c,r;if(i.getState().isPaused)return;a.isOverlapping(s||o)?a.gravityScale=0:a.gravityScale=1;const n=((r=(c=l.getState().gameObjects.get("raccoon"))==null?void 0:c.get("value"))==null?void 0:r.value)??0,g=i.getState().levelCompleted;n==24&&!g&&(a.pos.x=.5*e.width(),i.getState().setLevelCompleteDialogOpen(!0),i.getState().setLevelCompleted(!0))})},$=()=>{const{k:e,game:t}=p();b(["background1"]);const{raccoon:a,trashcanFilled:s,goalFlag:o}=y(["raccoon","trashcanFilled","goalFlag"]);e.setCamPos(0,-4.727),e.setCamScale(S*e.height()/947),t.onUpdate(()=>{var n,g,c,r;i.getState().isPaused||(D(a,e),s.pos.x=((g=(n=l.getState().gameObjects.get("trashcanFilled"))==null?void 0:n.get("xpos"))==null?void 0:g.value)??0,s.pos.y=((r=(c=l.getState().gameObjects.get("trashcanFilled"))==null?void 0:c.get("ypos"))==null?void 0:r.value)??0,l.getState().initData&&v(a,1))})},ee=()=>{const{k:e,game:t}=p();b(["background1"]);const{raccoon:a,trashcanFilled:s}=y(["raccoon","trashcanFilled"]);e.setCamPos(0,-4.727),e.setCamScale(S*e.height()/947),s.z=3,s.pos.x=-5,s.pos.y=-2,t.onUpdate(()=>{if(i.getState().isPaused)return;D(a,e),a.pos.dist(s.pos)<=.5&&!i.getState().levelCompleted&&(i.getState().setLevelCompleteDialogOpen(!0),i.getState().setLevelCompleted(!0)),l.getState().initData&&v(a,1)})},te=()=>{const{k:e,game:t}=p();b(["background1"]);const{raccoon:a}=y(["raccoon"]);e.setCamPos(0,-4.727),e.setCamScale(S*e.height()/947),t.add([e.rect(.1,15),e.opacity(0),e.anchor("bot"),e.pos(-11,-1),e.rotate(0),e.area(),"ladder"]);let s=!1;e.onCollideUpdate("raccoon","ladder",o=>{s=!1,o.pos.y<0&&(s=!0),e.isKeyDown("up")&&o.pos.y>=-15&&(o.pos.y-=7*e.dt()),e.isKeyDown("down")&&o.pos.y<=0&&(o.pos.y+=7*e.dt())}),t.onUpdate(()=>{i.getState().isPaused||(s||D(a,e,"input"),l.getState().initData&&v(a,1))})},ie={calculator:{slug:"calculator",name:"Calculator",description:"This is the first level of the game, introducing basic mechanics.",dialog:["Whoa... what's this on that wall? Some kinda ancient scribble? Wait... it looks like an equation!","Hmm... maybe it's a clue - maybe if I solve it, I'll figure out what this place is hiding","Quick, human buddy - help me solve it before my brain melts into raccoon soup!!","You! Yes you - my opposable-thumbed hero!","I bet we can solve it using the math nodes in your toolbox.","Once you've figured it out, plug the result into the 'solution' handle on the Export node"],goals:["Create your first nodes.","Solve the equation."],success:"Yesss! You nailed it! That number was exactly what we needed.",category:"Introduction",image:Y,nodes:[],edges:[],initialState:Z,hints:["Start by placing Value nodes to represent the numbers in the equation.","Use Math nodes like Add, Subtract, Multiply, or Divide to build the equation step by step.","Connect the result of your math operation to the 'solution' input on the Export node.","Check that each node has the correct inputs - missing values will result in an incorrect or empty output.","Double-check your order of operation."],modifiableGameObjects:[{id:"raccoon",connections:[{label:"solution",access:"set"}]}],availableNodes:["Display","Value","Math","ExportToGameobject"],difficulty:0},sitting:{slug:"sitting",name:"Sitting",description:"This is the second level of the game, introducing position of game objects.",dialog:["Okay okay okay listen - I've had a long day solving equations and being adorable.","Now all I want... is to plop into that cozy, slightly smelly trash can over there.","Can you move me into it? Please? I promise not to knock it over. (Maybe.)"],goals:["Move the raccoon into the trashcan by changing his position."],success:"Aaaahhh... perfect! Crunchy banana peels, the scent of mystery leftovers... this is luxury.",category:"Introduction",image:U,nodes:[],edges:[],initialState:ee,hints:[],modifiableGameObjects:[{id:"raccoon",connections:[{label:"xpos",access:"set"},{label:"ypos",access:"set"}]}],availableNodes:["Display","Value","ExportToGameobject"],difficulty:0},iffies:{slug:"iffies",name:"Iffies",description:"This is the third level of the game, introducing if statements.",dialog:[`This is the third level of the game. Complete the "sitting" level first, if you haven't done so yet.`,"You will learn how to use if statements to control game object behavior."],goals:["Use an if statement to make the raccoon move into the filled trashcan."],success:"Luckily the raccoon doesn't have to search for food in an empty trashcan!",category:"Introduction",image:X,nodes:[],edges:[],initialState:Q,hints:[],modifiableGameObjects:[{id:"raccoon",connections:[{label:"xpos",access:"set"},{label:"ypos",access:"set"}]},{id:"trashcan1",connections:[{label:"filled",access:"get"},{label:"xpos",access:"get"},{label:"ypos",access:"get"}]},{id:"trashcan2",connections:[{label:"filled",access:"get"},{label:"xpos",access:"get"},{label:"ypos",access:"get"}]}],availableNodes:["Display","Value","Math","ImportFromGameobject","Switch","ExportToGameobject"],difficulty:1},timeTransform:{slug:"timeTransform",name:"Time Transform",description:"This is a level of the main game, introducing time-based transformations.",dialog:["In this level, you will learn how time transformations can affect game objects."],goals:["Do something!"],success:"Wow!",category:"Main Game",image:_,nodes:[],edges:[],initialState:te,hints:[],modifiableGameObjects:[{id:"raccoon",connections:[{label:"speed",access:"set"}]}],availableNodes:["Display","Value","Math","ImportFromGameobject","Switch","ExportToGameobject","Time"],difficulty:1},move:{slug:"move",name:"Move",description:"This is the first level of the main game, introducing movement mechanics.",dialog:["This is the first level of the main game. It introduces movement mechanics.","You will learn how to move a game object using key inputs."],goals:["Move the raccoon to the flag."],success:"Look, he just learned how to use his feet!",category:"Main Game",image:H,nodes:[],edges:[],initialState:J,hints:[],modifiableGameObjects:[{id:"raccoon",connections:[{label:"xpos",access:"set"},{label:"ypos",access:"set"}]}],availableNodes:["Display","ExportToGameobject"],difficulty:2},playground:{slug:"playground",name:"Playground",description:"This is a sandbox level where you can freely test game mechanics.",dialog:["This is a playground level where you can freely implement game mechanics.","You are allowed to use all available nodes."],goals:["No goals, this level is designed for experimentation and testing."],success:"How did you complete a sandbox level?",category:"Sandbox",image:R,nodes:[],edges:[],initialState:$,hints:["This is a playground level","You don't need hints here","stop clicking there is nothing coming","42"],modifiableGameObjects:[{id:"raccoon",connections:[{label:"xpos",access:"all"},{label:"ypos",access:"all"}]},{id:"trashcanFilled",connections:[{label:"xpos",access:"set"},{label:"ypos",access:"set"}]}],availableNodes:["Display","Value","Time","KeyPress","Math","ExportToGameobject","ImportFromGameobject","Switch","Group","ForLoop","MousePosition"],difficulty:0}};export{ie as L,se as c,x as g,oe as i};
