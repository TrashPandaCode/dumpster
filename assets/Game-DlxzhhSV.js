import{w as Jr}from"./with-props-Cqy6QlFa.js";import{a as l,t as Qr,o as i,s as kn,N as Te}from"./chunk-AYJ5UCUI-BEyWwyKY.js";import{c as Be,A as es,H as ts,a as ns,b as Ze,d as Fe,u as re,e as ge,f as We,g as zt,h as rt,i as $,P as $e,j as Ln,R as zn,k as Fn,l as os,m as rs,n as ss,T as is,o as as,p as ls,q as cs,r as se,s as $n,t as Ft,Q as us,_ as ds,v as fs,w as ps,D as hs}from"./index-ys613WY_.js";import{u as oe,a as dt,b as we,c as $t,d as be,L as de,e as gs,f as ms,g as xs,v as vs,I as mn,h as Ht,i as me,j as Ct,k as ys,t as ws,l as bs,m as Hn,n as Dt,o as st,T as Cs,p as Ps,q as Es}from"./levels-CipXFxXm.js";import{g as Ss,u as fe,B as Ns,E as Is,T as Ms,a as js,b as Rs,P as ft,c as Gn,d as Kn,o as Un,s as Bn,f as Wn,e as Yn,h as Vn,i as Xn,l as qn,j as Zn,k as As,m as Jn,n as Qn,p as Ds,q as _s,r as eo,N as to,t as no,v as it,M as oo,L as ro,A as Os,w as Ts,F as ks,x as Ls,G as zs,S as Fs,y as $s,K as Hs,z as Gs,D as Ks,V as Us,R as Bs,C as Ws,H as Ys,I as Vs}from"./Value-D0Liw5yn.js";import{P as Xs,F as qs,D as Zs,a as Gt,b as Js,c as Kt,d as so,e as Ut,f as Bt,g as Wt,h as ke}from"./index-QNPkzcIK.js";import{R as Qs}from"./index-B7JuJiwu.js";const pt=l.createContext(null);pt.displayName="PanelGroupContext";const X={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Yt=10,Ie=l.useLayoutEffect,xn=Qr.useId,ei=typeof xn=="function"?xn:()=>null;let ti=0;function Vt(e=null){const t=ei(),n=l.useRef(e||t||null);return n.current===null&&(n.current=""+ti++),e??n.current}function io({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:s,forwardedRef:r,id:a,maxSize:c,minSize:u,onCollapse:d,onExpand:h,onResize:f,order:p,style:g,tagName:x="div",...v}){const y=l.useContext(pt);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:w,getPanelSize:N,getPanelStyle:C,groupId:I,isPanelCollapsed:P,reevaluatePanelConstraints:E,registerPanel:b,resizePanel:S,unregisterPanel:A}=y,T=Vt(a),R=l.useRef({callbacks:{onCollapse:d,onExpand:h,onResize:f},constraints:{collapsedSize:n,collapsible:o,defaultSize:s,maxSize:c,minSize:u},id:T,idIsFromProps:a!==void 0,order:p});l.useRef({didLogMissingDefaultSizeWarning:!1}),Ie(()=>{const{callbacks:K,constraints:G}=R.current,U={...G};R.current.id=T,R.current.idIsFromProps=a!==void 0,R.current.order=p,K.onCollapse=d,K.onExpand=h,K.onResize=f,G.collapsedSize=n,G.collapsible=o,G.defaultSize=s,G.maxSize=c,G.minSize=u,(U.collapsedSize!==G.collapsedSize||U.collapsible!==G.collapsible||U.maxSize!==G.maxSize||U.minSize!==G.minSize)&&E(R.current,U)}),Ie(()=>{const K=R.current;return b(K),()=>{A(K)}},[p,T,b,A]),l.useImperativeHandle(r,()=>({collapse:()=>{m(R.current)},expand:K=>{w(R.current,K)},getId(){return T},getSize(){return N(R.current)},isCollapsed(){return P(R.current)},isExpanded(){return!P(R.current)},resize:K=>{S(R.current,K)}}),[m,w,N,P,T,S]);const H=C(R.current,s);return l.createElement(x,{...v,children:e,className:t,id:T,style:{...H,...g},[X.groupId]:I,[X.panel]:"",[X.panelCollapsible]:o||void 0,[X.panelId]:T,[X.panelSize]:parseFloat(""+H.flexGrow).toFixed(1)})}const _t=l.forwardRef((e,t)=>l.createElement(io,{...e,forwardedRef:t}));io.displayName="Panel";_t.displayName="forwardRef(Panel)";let Ot=null,ot=-1,ye=null;function ni(e,t){if(t){const n=(t&fo)!==0,o=(t&po)!==0,s=(t&ho)!==0,r=(t&go)!==0;if(n)return s?"se-resize":r?"ne-resize":"e-resize";if(o)return s?"sw-resize":r?"nw-resize":"w-resize";if(s)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function oi(){ye!==null&&(document.head.removeChild(ye),Ot=null,ye=null,ot=-1)}function Pt(e,t){var n,o;const s=ni(e,t);if(Ot!==s){if(Ot=s,ye===null&&(ye=document.createElement("style"),document.head.appendChild(ye)),ot>=0){var r;(r=ye.sheet)===null||r===void 0||r.removeRule(ot)}ot=(n=(o=ye.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function ao(e){return e.type==="keydown"}function lo(e){return e.type.startsWith("pointer")}function co(e){return e.type.startsWith("mouse")}function ht(e){if(lo(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(co(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function ri(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function si(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function ii(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:wn(e),b:wn(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;F(o,"Stacking order can only be calculated for elements with a common ancestor");const s={a:yn(vn(n.a)),b:yn(vn(n.b))};if(s.a===s.b){const r=o.childNodes,a={a:n.a.at(-1),b:n.b.at(-1)};let c=r.length;for(;c--;){const u=r[c];if(u===a.a)return 1;if(u===a.b)return-1}}return Math.sign(s.a-s.b)}const ai=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function li(e){var t;const n=getComputedStyle((t=uo(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function ci(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||li(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||ai.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function vn(e){let t=e.length;for(;t--;){const n=e[t];if(F(n,"Missing node"),ci(n))return n}return null}function yn(e){return e&&Number(getComputedStyle(e).zIndex)||0}function wn(e){const t=[];for(;e;)t.push(e),e=uo(e);return t}function uo(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const fo=1,po=2,ho=4,go=8,ui=ri()==="coarse";let ue=[],Le=!1,Ne=new Map,gt=new Map;const Ye=new Set;function di(e,t,n,o,s){var r;const{ownerDocument:a}=t,c={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:s},u=(r=Ne.get(a))!==null&&r!==void 0?r:0;return Ne.set(a,u+1),Ye.add(c),at(),function(){var h;gt.delete(e),Ye.delete(c);const f=(h=Ne.get(a))!==null&&h!==void 0?h:1;if(Ne.set(a,f-1),at(),f===1&&Ne.delete(a),ue.includes(c)){const p=ue.indexOf(c);p>=0&&ue.splice(p,1),qt(),s("up",!0,null)}}}function fi(e){const{target:t}=e,{x:n,y:o}=ht(e);Le=!0,Xt({target:t,x:n,y:o}),at(),ue.length>0&&(lt("down",e),e.preventDefault(),mo(t)||e.stopImmediatePropagation())}function Et(e){const{x:t,y:n}=ht(e);if(Le&&e.buttons===0&&(Le=!1,lt("up",e)),!Le){const{target:o}=e;Xt({target:o,x:t,y:n})}lt("move",e),qt(),ue.length>0&&e.preventDefault()}function St(e){const{target:t}=e,{x:n,y:o}=ht(e);gt.clear(),Le=!1,ue.length>0&&(e.preventDefault(),mo(t)||e.stopImmediatePropagation()),lt("up",e),Xt({target:t,x:n,y:o}),qt(),at()}function mo(e){let t=e;for(;t;){if(t.hasAttribute(X.resizeHandle))return!0;t=t.parentElement}return!1}function Xt({target:e,x:t,y:n}){ue.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),Ye.forEach(s=>{const{element:r,hitAreaMargins:a}=s,c=r.getBoundingClientRect(),{bottom:u,left:d,right:h,top:f}=c,p=ui?a.coarse:a.fine;if(t>=d-p&&t<=h+p&&n>=f-p&&n<=u+p){if(o!==null&&document.contains(o)&&r!==o&&!r.contains(o)&&!o.contains(r)&&ii(o,r)>0){let x=o,v=!1;for(;x&&!x.contains(r);){if(si(x.getBoundingClientRect(),c)){v=!0;break}x=x.parentElement}if(v)return}ue.push(s)}})}function Nt(e,t){gt.set(e,t)}function qt(){let e=!1,t=!1;ue.forEach(o=>{const{direction:s}=o;s==="horizontal"?e=!0:t=!0});let n=0;gt.forEach(o=>{n|=o}),e&&t?Pt("intersection",n):e?Pt("horizontal",n):t?Pt("vertical",n):oi()}let It=new AbortController;function at(){It.abort(),It=new AbortController;const e={capture:!0,signal:It.signal};Ye.size&&(Le?(ue.length>0&&Ne.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",St,e),o.addEventListener("pointerleave",Et,e),o.addEventListener("pointermove",Et,e))}),window.addEventListener("pointerup",St,e),window.addEventListener("pointercancel",St,e)):Ne.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",fi,e),o.addEventListener("pointermove",Et,e))}))}function lt(e,t){Ye.forEach(n=>{const{setResizeHandlerState:o}=n,s=ue.includes(n);o(e,s,t)})}function pi(){const[e,t]=l.useState(0);return l.useCallback(()=>t(n=>n+1),[])}function F(e,t){if(!e)throw console.error(t),Error(t)}function je(e,t,n=Yt){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function he(e,t,n=Yt){return je(e,t,n)===0}function ae(e,t,n){return je(e,t,n)===0}function hi(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const s=e[o],r=t[o];if(!ae(s,r,n))return!1}return!0}function Oe({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];F(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:r,maxSize:a=100,minSize:c=0}=o;if(je(n,c)<0)if(r){const u=(s+c)/2;je(n,u)<0?n=s:n=c}else n=c;return n=Math.min(a,n),n=parseFloat(n.toFixed(Yt)),n}function Ge({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:s,trigger:r}){if(ae(e,0))return t;const a=[...t],[c,u]=o;F(c!=null,"Invalid first pivot index"),F(u!=null,"Invalid second pivot index");let d=0;if(r==="keyboard"){{const f=e<0?u:c,p=n[f];F(p,`Panel constraints not found for index ${f}`);const{collapsedSize:g=0,collapsible:x,minSize:v=0}=p;if(x){const y=t[f];if(F(y!=null,`Previous layout not found for panel index ${f}`),ae(y,g)){const m=v-y;je(m,Math.abs(e))>0&&(e=e<0?0-m:m)}}}{const f=e<0?c:u,p=n[f];F(p,`No panel constraints found for index ${f}`);const{collapsedSize:g=0,collapsible:x,minSize:v=0}=p;if(x){const y=t[f];if(F(y!=null,`Previous layout not found for panel index ${f}`),ae(y,v)){const m=y-g;je(m,Math.abs(e))>0&&(e=e<0?0-m:m)}}}}{const f=e<0?1:-1;let p=e<0?u:c,g=0;for(;;){const v=t[p];F(v!=null,`Previous layout not found for panel index ${p}`);const m=Oe({panelConstraints:n,panelIndex:p,size:100})-v;if(g+=m,p+=f,p<0||p>=n.length)break}const x=Math.min(Math.abs(e),Math.abs(g));e=e<0?0-x:x}{let p=e<0?c:u;for(;p>=0&&p<n.length;){const g=Math.abs(e)-Math.abs(d),x=t[p];F(x!=null,`Previous layout not found for panel index ${p}`);const v=x-g,y=Oe({panelConstraints:n,panelIndex:p,size:v});if(!ae(x,y)&&(d+=x-y,a[p]=y,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?p--:p++}}if(hi(s,a))return s;{const f=e<0?u:c,p=t[f];F(p!=null,`Previous layout not found for panel index ${f}`);const g=p+d,x=Oe({panelConstraints:n,panelIndex:f,size:g});if(a[f]=x,!ae(x,g)){let v=g-x,m=e<0?u:c;for(;m>=0&&m<n.length;){const w=a[m];F(w!=null,`Previous layout not found for panel index ${m}`);const N=w+v,C=Oe({panelConstraints:n,panelIndex:m,size:N});if(ae(w,C)||(v-=C-w,a[m]=C),ae(v,0))break;e>0?m--:m++}}}const h=a.reduce((f,p)=>p+f,0);return ae(h,100)?a:s}function gi({layout:e,panelsArray:t,pivotIndices:n}){let o=0,s=100,r=0,a=0;const c=n[0];F(c!=null,"No pivot index found"),t.forEach((f,p)=>{const{constraints:g}=f,{maxSize:x=100,minSize:v=0}=g;p===c?(o=v,s=x):(r+=v,a+=x)});const u=Math.min(s,100-r),d=Math.max(o,100-a),h=e[c];return{valueMax:u,valueMin:d,valueNow:h}}function Ve(e,t=document){return Array.from(t.querySelectorAll(`[${X.resizeHandleId}][data-panel-group-id="${e}"]`))}function xo(e,t,n=document){const s=Ve(e,n).findIndex(r=>r.getAttribute(X.resizeHandleId)===t);return s??null}function vo(e,t,n){const o=xo(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function yo(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function mt(e,t=document){const n=t.querySelector(`[${X.resizeHandleId}="${e}"]`);return n||null}function mi(e,t,n,o=document){var s,r,a,c;const u=mt(t,o),d=Ve(e,o),h=u?d.indexOf(u):-1,f=(s=(r=n[h])===null||r===void 0?void 0:r.id)!==null&&s!==void 0?s:null,p=(a=(c=n[h+1])===null||c===void 0?void 0:c.id)!==null&&a!==void 0?a:null;return[f,p]}function xi({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:s,panelGroupElement:r,setLayout:a}){l.useRef({didWarnAboutMissingResizeHandle:!1}),Ie(()=>{if(!r)return;const c=Ve(n,r);for(let u=0;u<s.length-1;u++){const{valueMax:d,valueMin:h,valueNow:f}=gi({layout:o,panelsArray:s,pivotIndices:[u,u+1]}),p=c[u];if(p!=null){const g=s[u];F(g,`No panel data found for index "${u}"`),p.setAttribute("aria-controls",g.id),p.setAttribute("aria-valuemax",""+Math.round(d)),p.setAttribute("aria-valuemin",""+Math.round(h)),p.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{c.forEach((u,d)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,o,s,r]),l.useEffect(()=>{if(!r)return;const c=t.current;F(c,"Eager values not found");const{panelDataArray:u}=c,d=yo(n,r);F(d!=null,`No group found for id "${n}"`);const h=Ve(n,r);F(h,`No resize handles found for group id "${n}"`);const f=h.map(p=>{const g=p.getAttribute(X.resizeHandleId);F(g,"Resize handle element has no handle id attribute");const[x,v]=mi(n,g,u,r);if(x==null||v==null)return()=>{};const y=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const w=u.findIndex(N=>N.id===x);if(w>=0){const N=u[w];F(N,`No panel data found for index ${w}`);const C=o[w],{collapsedSize:I=0,collapsible:P,minSize:E=0}=N.constraints;if(C!=null&&P){const b=Ge({delta:ae(C,I)?E-I:I-C,initialLayout:o,panelConstraints:u.map(S=>S.constraints),pivotIndices:vo(n,g,r),prevLayout:o,trigger:"keyboard"});o!==b&&a(b)}}break}}};return p.addEventListener("keydown",y),()=>{p.removeEventListener("keydown",y)}});return()=>{f.forEach(p=>p())}},[r,e,t,n,o,s,a])}function bn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function wo(e,t){const n=e==="horizontal",{x:o,y:s}=ht(t);return n?o:s}function vi(e,t,n,o,s){const r=n==="horizontal",a=mt(t,s);F(a,`No resize handle element found for id "${t}"`);const c=a.getAttribute(X.groupId);F(c,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=o;const d=wo(n,e),h=yo(c,s);F(h,`No group element found for id "${c}"`);const f=h.getBoundingClientRect(),p=r?f.width:f.height;return(d-u)/p*100}function yi(e,t,n,o,s,r){if(ao(e)){const a=n==="horizontal";let c=0;e.shiftKey?c=100:s!=null?c=s:c=10;let u=0;switch(e.key){case"ArrowDown":u=a?0:c;break;case"ArrowLeft":u=a?-c:0;break;case"ArrowRight":u=a?c:0;break;case"ArrowUp":u=a?0:-c;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return o==null?0:vi(e,t,n,o,r)}function wi({panelDataArray:e}){const t=Array(e.length),n=e.map(r=>r.constraints);let o=0,s=100;for(let r=0;r<e.length;r++){const a=n[r];F(a,`Panel constraints not found for index ${r}`);const{defaultSize:c}=a;c!=null&&(o++,t[r]=c,s-=c)}for(let r=0;r<e.length;r++){const a=n[r];F(a,`Panel constraints not found for index ${r}`);const{defaultSize:c}=a;if(c!=null)continue;const u=e.length-o,d=s/u;o++,t[r]=d,s-=d}return t}function De(e,t,n){t.forEach((o,s)=>{const r=e[s];F(r,`Panel data not found for index ${s}`);const{callbacks:a,constraints:c,id:u}=r,{collapsedSize:d=0,collapsible:h}=c,f=n[u];if(f==null||o!==f){n[u]=o;const{onCollapse:p,onExpand:g,onResize:x}=a;x&&x(o,f),h&&(p||g)&&(g&&(f==null||he(f,d))&&!he(o,d)&&g(),p&&(f==null||!he(f,d))&&he(o,d)&&p())}})}function nt(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function bi({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:s,precision:r=3}){const a=n[s];let c;return a==null?c=e!=null?e.toPrecision(r):"1":o.length===1?c="1":c=a.toPrecision(r),{flexBasis:0,flexGrow:c,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Ci(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function Cn(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function bo(e){return`react-resizable-panels:${e}`}function Co(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:s,order:r}=t;return s?o:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function Po(e,t){try{const n=bo(e),o=t.getItem(n);if(o){const s=JSON.parse(o);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Pi(e,t,n){var o,s;const r=(o=Po(e,n))!==null&&o!==void 0?o:{},a=Co(t);return(s=r[a])!==null&&s!==void 0?s:null}function Ei(e,t,n,o,s){var r;const a=bo(e),c=Co(t),u=(r=Po(e,s))!==null&&r!==void 0?r:{};u[c]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{s.setItem(a,JSON.stringify(u))}catch(d){console.error(d)}}function Pn({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((r,a)=>r+a,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!ae(o,100)&&n.length>0)for(let r=0;r<t.length;r++){const a=n[r];F(a!=null,`No layout data found for index ${r}`);const c=100/o*a;n[r]=c}let s=0;for(let r=0;r<t.length;r++){const a=n[r];F(a!=null,`No layout data found for index ${r}`);const c=Oe({panelConstraints:t,panelIndex:r,size:a});a!=c&&(s+=a-c,n[r]=c)}if(!ae(s,0))for(let r=0;r<t.length;r++){const a=n[r];F(a!=null,`No layout data found for index ${r}`);const c=a+s,u=Oe({panelConstraints:t,panelIndex:r,size:c});if(a!==u&&(s-=u-a,n[r]=u,ae(s,0)))break}return n}const Si=100,Ke={getItem:e=>(Cn(Ke),Ke.getItem(e)),setItem:(e,t)=>{Cn(Ke),Ke.setItem(e,t)}},En={};function Eo({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:s,id:r=null,onLayout:a=null,keyboardResizeBy:c=null,storage:u=Ke,style:d,tagName:h="div",...f}){const p=Vt(r),g=l.useRef(null),[x,v]=l.useState(null),[y,m]=l.useState([]),w=pi(),N=l.useRef({}),C=l.useRef(new Map),I=l.useRef(0),P=l.useRef({autoSaveId:e,direction:o,dragState:x,id:p,keyboardResizeBy:c,onLayout:a,storage:u}),E=l.useRef({layout:y,panelDataArray:[],panelDataArrayChanged:!1});l.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),l.useImperativeHandle(s,()=>({getId:()=>P.current.id,getLayout:()=>{const{layout:M}=E.current;return M},setLayout:M=>{const{onLayout:O}=P.current,{layout:L,panelDataArray:D}=E.current,j=Pn({layout:M,panelConstraints:D.map(k=>k.constraints)});bn(L,j)||(m(j),E.current.layout=j,O&&O(j),De(D,j,N.current))}}),[]),Ie(()=>{P.current.autoSaveId=e,P.current.direction=o,P.current.dragState=x,P.current.id=p,P.current.onLayout=a,P.current.storage=u}),xi({committedValuesRef:P,eagerValuesRef:E,groupId:p,layout:y,panelDataArray:E.current.panelDataArray,setLayout:m,panelGroupElement:g.current}),l.useEffect(()=>{const{panelDataArray:M}=E.current;if(e){if(y.length===0||y.length!==M.length)return;let O=En[e];O==null&&(O=Ci(Ei,Si),En[e]=O);const L=[...M],D=new Map(C.current);O(e,L,D,y,u)}},[e,y,u]),l.useEffect(()=>{});const b=l.useCallback(M=>{const{onLayout:O}=P.current,{layout:L,panelDataArray:D}=E.current;if(M.constraints.collapsible){const j=D.map(te=>te.constraints),{collapsedSize:k=0,panelSize:z,pivotIndices:W}=Se(D,M,L);if(F(z!=null,`Panel size not found for panel "${M.id}"`),!he(z,k)){C.current.set(M.id,z);const ne=_e(D,M)===D.length-1?z-k:k-z,B=Ge({delta:ne,initialLayout:L,panelConstraints:j,pivotIndices:W,prevLayout:L,trigger:"imperative-api"});nt(L,B)||(m(B),E.current.layout=B,O&&O(B),De(D,B,N.current))}}},[]),S=l.useCallback((M,O)=>{const{onLayout:L}=P.current,{layout:D,panelDataArray:j}=E.current;if(M.constraints.collapsible){const k=j.map(ee=>ee.constraints),{collapsedSize:z=0,panelSize:W=0,minSize:te=0,pivotIndices:ne}=Se(j,M,D),B=O??te;if(he(W,z)){const ee=C.current.get(M.id),pe=ee!=null&&ee>=B?ee:B,Ee=_e(j,M)===j.length-1?W-pe:pe-W,Q=Ge({delta:Ee,initialLayout:D,panelConstraints:k,pivotIndices:ne,prevLayout:D,trigger:"imperative-api"});nt(D,Q)||(m(Q),E.current.layout=Q,L&&L(Q),De(j,Q,N.current))}}},[]),A=l.useCallback(M=>{const{layout:O,panelDataArray:L}=E.current,{panelSize:D}=Se(L,M,O);return F(D!=null,`Panel size not found for panel "${M.id}"`),D},[]),T=l.useCallback((M,O)=>{const{panelDataArray:L}=E.current,D=_e(L,M);return bi({defaultSize:O,dragState:x,layout:y,panelData:L,panelIndex:D})},[x,y]),R=l.useCallback(M=>{const{layout:O,panelDataArray:L}=E.current,{collapsedSize:D=0,collapsible:j,panelSize:k}=Se(L,M,O);return F(k!=null,`Panel size not found for panel "${M.id}"`),j===!0&&he(k,D)},[]),H=l.useCallback(M=>{const{layout:O,panelDataArray:L}=E.current,{collapsedSize:D=0,collapsible:j,panelSize:k}=Se(L,M,O);return F(k!=null,`Panel size not found for panel "${M.id}"`),!j||je(k,D)>0},[]),K=l.useCallback(M=>{const{panelDataArray:O}=E.current;O.push(M),O.sort((L,D)=>{const j=L.order,k=D.order;return j==null&&k==null?0:j==null?-1:k==null?1:j-k}),E.current.panelDataArrayChanged=!0,w()},[w]);Ie(()=>{if(E.current.panelDataArrayChanged){E.current.panelDataArrayChanged=!1;const{autoSaveId:M,onLayout:O,storage:L}=P.current,{layout:D,panelDataArray:j}=E.current;let k=null;if(M){const W=Pi(M,j,L);W&&(C.current=new Map(Object.entries(W.expandToSizes)),k=W.layout)}k==null&&(k=wi({panelDataArray:j}));const z=Pn({layout:k,panelConstraints:j.map(W=>W.constraints)});bn(D,z)||(m(z),E.current.layout=z,O&&O(z),De(j,z,N.current))}}),Ie(()=>{const M=E.current;return()=>{M.layout=[]}},[]);const G=l.useCallback(M=>{let O=!1;const L=g.current;return L&&window.getComputedStyle(L,null).getPropertyValue("direction")==="rtl"&&(O=!0),function(j){j.preventDefault();const k=g.current;if(!k)return()=>null;const{direction:z,dragState:W,id:te,keyboardResizeBy:ne,onLayout:B}=P.current,{layout:ee,panelDataArray:pe}=E.current,{initialLayout:xe}=W??{},Ee=vo(te,M,k);let Q=yi(j,M,z,W,ne,k);const le=z==="horizontal";le&&O&&(Q=-Q);const qr=pe.map(Zr=>Zr.constraints),He=Ge({delta:Q,initialLayout:xe??ee,panelConstraints:qr,pivotIndices:Ee,prevLayout:ee,trigger:ao(j)?"keyboard":"mouse-or-touch"}),gn=!nt(ee,He);(lo(j)||co(j))&&I.current!=Q&&(I.current=Q,!gn&&Q!==0?le?Nt(M,Q<0?fo:po):Nt(M,Q<0?ho:go):Nt(M,0)),gn&&(m(He),E.current.layout=He,B&&B(He),De(pe,He,N.current))}},[]),U=l.useCallback((M,O)=>{const{onLayout:L}=P.current,{layout:D,panelDataArray:j}=E.current,k=j.map(ee=>ee.constraints),{panelSize:z,pivotIndices:W}=Se(j,M,D);F(z!=null,`Panel size not found for panel "${M.id}"`);const ne=_e(j,M)===j.length-1?z-O:O-z,B=Ge({delta:ne,initialLayout:D,panelConstraints:k,pivotIndices:W,prevLayout:D,trigger:"imperative-api"});nt(D,B)||(m(B),E.current.layout=B,L&&L(B),De(j,B,N.current))},[]),q=l.useCallback((M,O)=>{const{layout:L,panelDataArray:D}=E.current,{collapsedSize:j=0,collapsible:k}=O,{collapsedSize:z=0,collapsible:W,maxSize:te=100,minSize:ne=0}=M.constraints,{panelSize:B}=Se(D,M,L);B!=null&&(k&&W&&he(B,j)?he(j,z)||U(M,z):B<ne?U(M,ne):B>te&&U(M,te))},[U]),V=l.useCallback((M,O)=>{const{direction:L}=P.current,{layout:D}=E.current;if(!g.current)return;const j=mt(M,g.current);F(j,`Drag handle element not found for id "${M}"`);const k=wo(L,O);v({dragHandleId:M,dragHandleRect:j.getBoundingClientRect(),initialCursorPosition:k,initialLayout:D})},[]),_=l.useCallback(()=>{v(null)},[]),Z=l.useCallback(M=>{const{panelDataArray:O}=E.current,L=_e(O,M);L>=0&&(O.splice(L,1),delete N.current[M.id],E.current.panelDataArrayChanged=!0,w())},[w]),Y=l.useMemo(()=>({collapsePanel:b,direction:o,dragState:x,expandPanel:S,getPanelSize:A,getPanelStyle:T,groupId:p,isPanelCollapsed:R,isPanelExpanded:H,reevaluatePanelConstraints:q,registerPanel:K,registerResizeHandle:G,resizePanel:U,startDragging:V,stopDragging:_,unregisterPanel:Z,panelGroupElement:g.current}),[b,x,o,S,A,T,p,R,H,q,K,G,U,V,_,Z]),J={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return l.createElement(pt.Provider,{value:Y},l.createElement(h,{...f,children:t,className:n,id:r,ref:g,style:{...J,...d},[X.group]:"",[X.groupDirection]:o,[X.groupId]:p}))}const So=l.forwardRef((e,t)=>l.createElement(Eo,{...e,forwardedRef:t}));Eo.displayName="PanelGroup";So.displayName="forwardRef(PanelGroup)";function _e(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Se(e,t,n){const o=_e(e,t),r=o===e.length-1?[o-1,o]:[o,o+1],a=n[o];return{...t.constraints,panelSize:a,pivotIndices:r}}function Ni({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){l.useEffect(()=>{if(e||n==null||o==null)return;const s=mt(t,o);if(s==null)return;const r=a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{a.preventDefault(),n(a);break}case"F6":{a.preventDefault();const c=s.getAttribute(X.groupId);F(c,`No group element found for id "${c}"`);const u=Ve(c,o),d=xo(c,t,o);F(d!==null,`No resize element found for id "${t}"`);const h=a.shiftKey?d>0?d-1:u.length-1:d+1<u.length?d+1:0;u[h].focus();break}}};return s.addEventListener("keydown",r),()=>{s.removeEventListener("keydown",r)}},[o,e,t,n])}function No({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:s,onBlur:r,onClick:a,onDragging:c,onFocus:u,onPointerDown:d,onPointerUp:h,style:f={},tabIndex:p=0,tagName:g="div",...x}){var v,y;const m=l.useRef(null),w=l.useRef({onClick:a,onDragging:c,onPointerDown:d,onPointerUp:h});l.useEffect(()=>{w.current.onClick=a,w.current.onDragging=c,w.current.onPointerDown=d,w.current.onPointerUp=h});const N=l.useContext(pt);if(N===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:C,groupId:I,registerResizeHandle:P,startDragging:E,stopDragging:b,panelGroupElement:S}=N,A=Vt(s),[T,R]=l.useState("inactive"),[H,K]=l.useState(!1),[G,U]=l.useState(null),q=l.useRef({state:T});Ie(()=>{q.current.state=T}),l.useEffect(()=>{if(n)U(null);else{const Y=P(A);U(()=>Y)}},[n,A,P]);const V=(v=o==null?void 0:o.coarse)!==null&&v!==void 0?v:15,_=(y=o==null?void 0:o.fine)!==null&&y!==void 0?y:5;l.useEffect(()=>{if(n||G==null)return;const Y=m.current;F(Y,"Element ref not attached");let J=!1;return di(A,Y,C,{coarse:V,fine:_},(O,L,D)=>{if(!L){R("inactive");return}switch(O){case"down":{R("drag"),J=!1,F(D,'Expected event to be defined for "down" action'),E(A,D);const{onDragging:j,onPointerDown:k}=w.current;j==null||j(!0),k==null||k();break}case"move":{const{state:j}=q.current;J=!0,j!=="drag"&&R("hover"),F(D,'Expected event to be defined for "move" action'),G(D);break}case"up":{R("hover"),b();const{onClick:j,onDragging:k,onPointerUp:z}=w.current;k==null||k(!1),z==null||z(),J||j==null||j();break}}})},[V,C,n,_,P,A,G,E,b]),Ni({disabled:n,handleId:A,resizeHandler:G,panelGroupElement:S});const Z={touchAction:"none",userSelect:"none"};return l.createElement(g,{...x,children:e,className:t,id:s,onBlur:()=>{K(!1),r==null||r()},onFocus:()=>{K(!0),u==null||u()},ref:m,role:"separator",style:{...Z,...f},tabIndex:p,[X.groupDirection]:C,[X.groupId]:I,[X.resizeHandle]:"",[X.resizeHandleActive]:T==="drag"?"pointer":H?"keyboard":void 0,[X.resizeHandleEnabled]:!n,[X.resizeHandleId]:A,[X.resizeHandleState]:T})}No.displayName="PanelResizeHandle";const Ii=e=>{const t=de[e];oe.getState().init(e),dt.getState().init(e),we.getState().init(),$t.getState().init(),be.getState().init(e),t.initialState()};let Mt=!1;const Me=gs((e,t)=>({mousePosition:null,setMousePosition:n=>e({mousePosition:n}),initMouseTracking:n=>{if(Mt)return;Mt=!0;const o=r=>{const a=n.getBoundingClientRect(),c=r.clientX-a.left,u=r.clientY-a.top;c>=0&&u>=0&&c<=a.width&&u<=a.height?t().setMousePosition({x:c,y:u,clientX:r.clientX,clientY:r.clientY}):t().setMousePosition(null)},s=()=>{t().setMousePosition(null)};return n.addEventListener("mousemove",o),n.addEventListener("mouseleave",s),()=>{n.removeEventListener("mousemove",o),n.removeEventListener("mouseleave",s),Mt=!1,t().setMousePosition(null)}},menuX:0,menuY:0,visible:!1,openAddMenu:(n,o)=>{const s=t();if(n===void 0||o===void 0){const r=s.mousePosition;if(!r){console.warn("Cannot open add menu: no coordinates provided and no mouse position available");return}n=r.clientX,o=r.clientY}e({menuX:n,menuY:o,visible:!0})},closeAddMenu:()=>e({visible:!1})}));function Mi(e){const t=Me(n=>n.initMouseTracking);l.useEffect(()=>{if(!e.current)return;const n=t(e.current);return()=>n==null?void 0:n()},[e,t])}function ji({id:e,sourceX:t,sourceY:n,targetX:o,targetY:s,sourcePosition:r,targetPosition:a,style:c={},markerEnd:u}){const[d,h,f]=Ss({sourceX:t,sourceY:n,sourcePosition:r,targetX:o,targetY:s,targetPosition:a}),{setEdges:p}=fe(),g=()=>{p(x=>x.filter(v=>v.id!==e))};return i.jsxs(i.Fragment,{children:[i.jsx(Ns,{path:d,markerEnd:u,style:c}),i.jsx(Is,{children:i.jsx("div",{className:"nodrag nopan pointer-events-auto absolute",style:{transform:`translate(-50%, -50%) translate(${h}px,${f}px)`},children:i.jsx("button",{className:"flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border-3 border-[#14141d] bg-slate-800 text-xs text-slate-400 hover:bg-slate-900",onClick:g,children:"×"})})})]})}const Ri={Deletable:ji};function Io(e){const t=Object.keys(de),n=t.indexOf(e);if(n!==-1)return{prev:n===0?void 0:t[n-1],next:n===t.length-1?void 0:t[n+1]}}const Ce=kn.forwardRef(({tooltip:e,className:t,children:n,side:o,...s},r)=>i.jsxs(Ms,{children:[i.jsx(js,{asChild:!0,children:i.jsx("button",{ref:r,className:Be("cursor-pointer rounded bg-slate-800 p-2 outline outline-slate-500 hover:bg-slate-900",t),...s,children:n})}),i.jsx(Rs,{side:o,children:typeof e=="string"?i.jsx("p",{children:e}):e})]})),Ai=()=>{const e=oe(n=>n.currentLevel),t=Io(e);return i.jsxs(ft,{position:"top-center",className:"flex flex-row items-center justify-center gap-2",children:[(t==null?void 0:t.prev)&&i.jsx(Te,{to:`/levels/${t==null?void 0:t.prev}`,children:i.jsx(Ce,{tooltip:"Previous Level",side:"left",className:"text-white",children:i.jsx(es,{className:"text-white"})})}),i.jsx(Te,{to:"/",children:i.jsx(Ce,{tooltip:"Home",side:"bottom",children:i.jsx(ts,{className:"text-white"})})}),(t==null?void 0:t.next)&&i.jsx(Te,{to:`/levels/${t==null?void 0:t.next}`,children:i.jsx(Ce,{tooltip:"Next Level",side:"right",children:i.jsx(ns,{className:"text-white"})})})]})};var Di=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],_i=Di.reduce((e,t)=>{const n=Ze(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:a,...c}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Oi="Arrow",Mo=l.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...r}=e;return i.jsx(_i.svg,{...r,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});Mo.displayName=Oi;var Ti=Mo,ki=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jo=ki.reduce((e,t)=>{const n=Ze(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:a,...c}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Zt="Popper",[Ro,Ao]=Fe(Zt),[Li,Do]=Ro(Zt),_o=e=>{const{__scopePopper:t,children:n}=e,[o,s]=l.useState(null);return i.jsx(Li,{scope:t,anchor:o,onAnchorChange:s,children:n})};_o.displayName=Zt;var Oo="PopperAnchor",To=l.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,r=Do(Oo,n),a=l.useRef(null),c=re(t,a);return l.useEffect(()=>{r.onAnchorChange((o==null?void 0:o.current)||a.current)}),o?null:i.jsx(jo.div,{...s,ref:c})});To.displayName=Oo;var Jt="PopperContent",[zi,Fi]=Ro(Jt),ko=l.forwardRef((e,t)=>{var j,k,z,W,te,ne;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:r="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...v}=e,y=Do(Jt,n),[m,w]=l.useState(null),N=re(t,B=>w(B)),[C,I]=l.useState(null),P=Gn(C),E=(P==null?void 0:P.width)??0,b=(P==null?void 0:P.height)??0,S=o+(r!=="center"?"-"+r:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},T=Array.isArray(d)?d:[d],R=T.length>0,H={padding:A,boundary:T.filter(Hi),altBoundary:R},{refs:K,floatingStyles:G,placement:U,isPositioned:q,middlewareData:V}=Kn({strategy:"fixed",placement:S,whileElementsMounted:(...B)=>Zn(...B,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[Un({mainAxis:s+b,alignmentAxis:a}),u&&Bn({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qn():void 0,...H}),u&&Wn({...H}),Yn({...H,apply:({elements:B,rects:ee,availableWidth:pe,availableHeight:xe})=>{const{width:Ee,height:Q}=ee.reference,le=B.floating.style;le.setProperty("--radix-popper-available-width",`${pe}px`),le.setProperty("--radix-popper-available-height",`${xe}px`),le.setProperty("--radix-popper-anchor-width",`${Ee}px`),le.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),C&&Vn({element:C,padding:c}),Gi({arrowWidth:E,arrowHeight:b}),p&&Xn({strategy:"referenceHidden",...H})]}),[_,Z]=Fo(U),Y=ge(x);We(()=>{q&&(Y==null||Y())},[q,Y]);const J=(j=V.arrow)==null?void 0:j.x,M=(k=V.arrow)==null?void 0:k.y,O=((z=V.arrow)==null?void 0:z.centerOffset)!==0,[L,D]=l.useState();return We(()=>{m&&D(window.getComputedStyle(m).zIndex)},[m]),i.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(W=V.transformOrigin)==null?void 0:W.x,(te=V.transformOrigin)==null?void 0:te.y].join(" "),...((ne=V.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(zi,{scope:n,placedSide:_,onArrowChange:I,arrowX:J,arrowY:M,shouldHideArrow:O,children:i.jsx(jo.div,{"data-side":_,"data-align":Z,...v,ref:N,style:{...v.style,animation:q?void 0:"none"}})})})});ko.displayName=Jt;var Lo="PopperArrow",$i={top:"bottom",right:"left",bottom:"top",left:"right"},zo=l.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,r=Fi(Lo,o),a=$i[r.placedSide];return i.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:i.jsx(Ti,{...s,ref:n,style:{...s.style,display:"block"}})})});zo.displayName=Lo;function Hi(e){return e!==null}var Gi=e=>({name:"transformOrigin",options:e,fn(t){var y,m,w;const{placement:n,rects:o,middlewareData:s}=t,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,c=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[d,h]=Fo(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((m=s.arrow)==null?void 0:m.x)??0)+c/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+u/2;let x="",v="";return d==="bottom"?(x=a?f:`${p}px`,v=`${-u}px`):d==="top"?(x=a?f:`${p}px`,v=`${o.floating.height+u}px`):d==="right"?(x=`${-u}px`,v=a?f:`${g}px`):d==="left"&&(x=`${o.floating.width+u}px`,v=a?f:`${g}px`),{data:{x,y:v}}}});function Fo(e){const[t,n="center"]=e.split("-");return[t,n]}var Ki=_o,$o=To,Ui=ko,Bi=zo,Wi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ho=Wi.reduce((e,t)=>{const n=Ze(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:a,...c}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),xt="Popover",[Go,Kc]=Fe(xt,[Ao]),Je=Ao(),[Yi,Pe]=Go(xt),Qt=e=>{const{__scopePopover:t,children:n,open:o,defaultOpen:s,onOpenChange:r,modal:a=!1}=e,c=Je(t),u=l.useRef(null),[d,h]=l.useState(!1),[f,p]=zt({prop:o,defaultProp:s??!1,onChange:r,caller:xt});return i.jsx(Ki,{...c,children:i.jsx(Yi,{scope:t,contentId:rt(),triggerRef:u,open:f,onOpenChange:p,onOpenToggle:l.useCallback(()=>p(g=>!g),[p]),hasCustomAnchor:d,onCustomAnchorAdd:l.useCallback(()=>h(!0),[]),onCustomAnchorRemove:l.useCallback(()=>h(!1),[]),modal:a,children:n})})};Qt.displayName=xt;var Ko="PopoverAnchor",Vi=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Pe(Ko,n),r=Je(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:c}=s;return l.useEffect(()=>(a(),()=>c()),[a,c]),i.jsx($o,{...r,...o,ref:t})});Vi.displayName=Ko;var Uo="PopoverTrigger",en=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Pe(Uo,n),r=Je(n),a=re(t,s.triggerRef),c=i.jsx(Ho.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Vo(s.open),...o,ref:a,onClick:$(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?c:i.jsx($o,{asChild:!0,...r,children:c})});en.displayName=Uo;var tn="PopoverPortal",[Xi,qi]=Go(tn,{forceMount:void 0}),nn=e=>{const{__scopePopover:t,forceMount:n,children:o,container:s}=e,r=Pe(tn,t);return i.jsx(Xi,{scope:t,forceMount:n,children:i.jsx($e,{present:n||r.open,children:i.jsx(Xs,{asChild:!0,container:s,children:o})})})};nn.displayName=tn;var ze="PopoverContent",on=l.forwardRef((e,t)=>{const n=qi(ze,e.__scopePopover),{forceMount:o=n.forceMount,...s}=e,r=Pe(ze,e.__scopePopover);return i.jsx($e,{present:o||r.open,children:r.modal?i.jsx(Ji,{...s,ref:t}):i.jsx(Qi,{...s,ref:t})})});on.displayName=ze;var Zi=Ze("PopoverContent.RemoveScroll"),Ji=l.forwardRef((e,t)=>{const n=Pe(ze,e.__scopePopover),o=l.useRef(null),s=re(t,o),r=l.useRef(!1);return l.useEffect(()=>{const a=o.current;if(a)return Ln(a)},[]),i.jsx(zn,{as:Zi,allowPinchZoom:!0,children:i.jsx(Bo,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$(e.onCloseAutoFocus,a=>{var c;a.preventDefault(),r.current||(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:$(e.onPointerDownOutside,a=>{const c=a.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;r.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:$(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),Qi=l.forwardRef((e,t)=>{const n=Pe(ze,e.__scopePopover),o=l.useRef(!1),s=l.useRef(!1);return i.jsx(Bo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var a,c;(a=e.onCloseAutoFocus)==null||a.call(e,r),r.defaultPrevented||(o.current||(c=n.triggerRef.current)==null||c.focus(),r.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:r=>{var u,d;(u=e.onInteractOutside)==null||u.call(e,r),r.defaultPrevented||(o.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=r.target;((d=n.triggerRef.current)==null?void 0:d.contains(a))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),Bo=l.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:a,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,...f}=e,p=Pe(ze,n),g=Je(n);return Fn(),i.jsx(qs,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:r,children:i.jsx(Zs,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:h,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>p.onOpenChange(!1),children:i.jsx(Ui,{"data-state":Vo(p.open),role:"dialog",id:p.contentId,...g,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Wo="PopoverClose",Yo=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Pe(Wo,n);return i.jsx(Ho.button,{type:"button",...o,ref:t,onClick:$(e.onClick,()=>s.onOpenChange(!1))})});Yo.displayName=Wo;var ea="PopoverArrow",ta=l.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Je(n);return i.jsx(Bi,{...s,...o,ref:t})});ta.displayName=ea;function Vo(e){return e?"open":"closed"}var na=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],oa=na.reduce((e,t)=>{const n=Ze(`Primitive.${t}`),o=l.forwardRef((s,r)=>{const{asChild:a,...c}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...c,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),ra=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),sa="VisuallyHidden",vt=l.forwardRef((e,t)=>i.jsx(oa.span,{...e,ref:t,style:{...ra,...e.style}}));vt.displayName=sa;const Xo=({title:e,trigger:t,defaultOpen:n,open:o,onOpenChange:s,desc:r,children:a})=>i.jsxs(Gt,{defaultOpen:n,open:o,onOpenChange:s,children:[i.jsx(Js,{asChild:!0,children:t}),i.jsxs(Kt,{children:[i.jsx(so,{className:"fixed inset-0 bg-black/25"}),i.jsxs(Ut,{className:"fixed top-1/2 left-1/2 flex w-1/2 -translate-x-1/2 -translate-y-1/2 flex-col gap-6 rounded-lg border-2 border-blue-300 bg-slate-800/85 p-8 font-mono text-white",children:[i.jsx(vt,{asChild:!0,children:i.jsx(Bt,{children:r})}),i.jsx(Wt,{className:"text-center text-4xl font-bold capitalize",children:e}),i.jsx("div",{id:"dialog",children:a}),i.jsx(ke,{asChild:!0,children:i.jsx("button",{className:"absolute top-2.5 right-2.5 inline-flex size-[25px] cursor-pointer appearance-none items-center justify-center rounded-full bg-slate-700 focus:outline-1 focus:outline-blue-300","aria-label":"Close",children:i.jsx(os,{})})})]})]})]}),qo=({open:e,onOpenChange:t,trigger:n})=>{var g;const o=oe(x=>x.currentLevel),s=((g=de[o])==null?void 0:g.dialog)||["No dialog available for this level."],[r,a]=l.useState(0),c=s[r],[u,d]=l.useState("");l.useEffect(()=>{let x=0;const v=setInterval(()=>{x<=c.length?(d(c.slice(0,x)),x++):clearInterval(v)},10);return()=>{clearInterval(v),d("")}},[c]);const h=l.useRef(null),f=()=>{if(r<s.length-1){const x=r+1;a(x)}},p=()=>{if(r>0){const x=r-1;a(x)}};return i.jsx(Xo,{title:o,trigger:n,open:e,onOpenChange:t,desc:`This dialog displays the level goals and instructions for the
            ${o} level. You can close it by clicking the close button or
            pressing the escape key.`,children:i.jsxs("div",{className:"flex flex-col gap-5",children:[i.jsxs("div",{className:"flex flex-1 flex-row",children:[i.jsx("div",{className:"my-auto w-1/3",children:i.jsx("div",{style:{aspectRatio:"7 / 6",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),i.jsxs("div",{className:"relative my-auto h-36 w-full rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[i.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),i.jsx("p",{className:"h-full overflow-auto pr-2 text-lg italic [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-slate-500 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-slate-900",children:u})]})]}),i.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[i.jsx("button",{onClick:p,disabled:r===0,className:Be("rounded-lg bg-slate-700/80 px-3 py-2 focus:outline-1 focus:outline-blue-300",r===0?"opacity-50":"cursor-pointer hover:bg-slate-600"),children:"Previous"}),r===s.length-1?i.jsx(ke,{asChild:!0,children:i.jsx("button",{ref:h,onClick:()=>{a(0)},className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"})}):i.jsx("button",{onClick:f,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next"})]})]})})},ia=()=>{const e=oe(s=>s.currentLevel),t=oe(s=>s.isPaused),n=oe(s=>s.play),o=oe(s=>s.pause);return i.jsxs(ft,{position:"top-left",className:"flex flex-col items-center justify-center gap-2",children:[i.jsx(Ce,{tooltip:"Play/Pause",side:"right",onClick:()=>{t?n():o()},children:t?i.jsx(rs,{className:"text-white"}):i.jsx(ss,{className:"text-white"})}),i.jsxs(Qt,{children:[i.jsx(en,{asChild:!0,children:i.jsx(Ce,{tooltip:"Reset Level",side:"right",children:i.jsx(is,{className:"text-white"})})}),i.jsx(nn,{children:i.jsx(on,{side:"right",sideOffset:10,className:"mr-3",children:i.jsx("div",{className:"flex w-42 flex-col rounded bg-slate-800 p-2 font-mono text-white shadow-lg outline-1 outline-slate-700 outline-solid",children:i.jsx(Yo,{asChild:!0,children:i.jsx("button",{className:"hover:bg-jam-600 cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",onClick:()=>{dt.getState().reset(e),we.getState().reset(),$t.getState().reset(),be.getState().reset(e),oe.getState().setLevelCompleted(!1),oe.getState().init(e)},children:"Reset Level?"})})})})})]}),i.jsx(qo,{trigger:i.jsx(Ce,{tooltip:"Level Info",side:"right",children:i.jsx(as,{className:"text-white"})})})]})},rn=({x:e,y:t,onClose:n,parentLoopId:o,children:s,parentId:r})=>{const a=oe(S=>S.currentLevel),c=de[a].availableNodes,u=Object.values(As).flat(),{addNodes:d,addEdges:h,screenToFlowPosition:f,getNodes:p,getNode:g}=fe(),x=l.useRef(null),[v,y]=l.useState(""),[m,w]=l.useState(0),[N,C]=l.useState(c.map(S=>({nodeType:S}))),I=g(r??"");l.useEffect(()=>{var S;(S=x.current)==null||S.focus()},[]),l.useEffect(()=>{const S=c.filter(R=>R.toLowerCase().includes(v.toLowerCase())).map(R=>({nodeType:R}));if(v===""||!c.some(R=>R==="Math"))return C(S);const A=u.filter(R=>R.toLowerCase().includes(v.toLowerCase())).map(R=>({nodeType:"Math",computeType:R})),T=[...S,...A];C(T),w(0)},[v]);const P=(S,A)=>{const T=f({x:e,y:t}),R={x:I?T.x-I.position.x:T.x,y:I?T.y-I.position.y:T.y},H={x:I?T.x-I.position.x+300:T.x+300,y:I?T.y-I.position.y:T.y},K=[],G=[];if(S==="ForLoop"){const U=ms(R,H,o,r);K.push(U.mainConnectorEdge),G.push(...U.nodes)}else G.push(E(S,A));if(d(G),o){const U=p().filter(q=>q.data.loopId===o);K.push(...xs(U,G.map(q=>q.id)))}h(K),n()},E=(S,A)=>{const T=vs(),R=f({x:e,y:t}),H={x:I?R.x-I.position.x:R.x,y:I?R.y-I.position.y:R.y};return{id:T,type:S,position:H,parentId:r,data:{initialComputeType:A,parentLoopId:o},height:S==="Group"?mn.height:void 0,width:S==="Group"?mn.width:void 0,selected:!1,dragging:!1}},b=S=>{if(S.key==="ArrowDown")S.preventDefault(),w(A=>(A+1)%N.length);else if(S.key==="ArrowUp")S.preventDefault(),w(A=>(A-1+N.length)%N.length);else if(S.key==="Enter"){S.preventDefault();const A=N[m];A&&P(A.nodeType,A.computeType)}};return l.useEffect(()=>(window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)),[N,m]),i.jsxs("div",{className:"flex w-65 flex-col gap-2 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[i.jsx("div",{className:"shadow",children:i.jsx("input",{ref:x,type:"text",spellCheck:"false",placeholder:"Search",className:"w-full rounded bg-slate-900 p-2 text-sm text-white focus:border-gray-300 focus:ring-0 focus:outline-none",onChange:S=>y(S.target.value)})}),i.jsx("div",{className:"flex flex-col gap-1",children:N.map((S,A)=>i.jsx("button",{className:Be("w-full cursor-pointer rounded px-2 py-1 text-left text-sm text-white",m===A?"bg-slate-700":"hover:bg-slate-700"),onClick:()=>P(S.nodeType,S.computeType),children:S.computeType?i.jsxs("span",{children:[i.jsx("span",{className:"text-slate-400",children:S.nodeType}),i.jsx(ls,{className:"inline-block h-4 w-4 text-slate-400"}),i.jsx("span",{className:"",children:S.computeType})]}):i.jsx(i.Fragment,{children:S.nodeType})},`add_node_${S}_${A}`))}),v===""&&i.jsx(i.Fragment,{children:s})]})},aa=({nodeId:e,nodeType:t,nodeLoopId:n,x:o,y:s,onClose:r,nodeParentId:a})=>i.jsx("div",{style:{position:"absolute",top:s,left:o,zIndex:1e3},children:t==="ForStart"||t==="ForEnd"?i.jsxs(rn,{x:o,y:s,onClose:r,parentLoopId:n,parentId:a,children:[i.jsx("hr",{className:"mx-auto h-1 w-44 rounded-sm border-0 bg-slate-700"}),i.jsx(Sn,{nodeId:e,onClose:r})]}):i.jsx("div",{className:"flex w-36 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:i.jsx(Sn,{nodeId:e,onClose:r})})}),Sn=({nodeId:e,onClose:t})=>{const{getNode:n,getNodes:o,getEdges:s,setNodes:r,setEdges:a}=fe(),c=l.useCallback(()=>{const d=n(e);if(!d)return;const h=o().filter(f=>f.id===d.id||f.parentId===d.id||(f.data.loopId===d.data.loopId||f.data.parentLoopId===d.data.loopId)&&d.data.loopId!=null);Ht(h,s,o,a,r),t()},[s,n,o,e,t,a,r]),u=l.useCallback(()=>{var h;const d=[e];if(((h=n(e))==null?void 0:h.type)==="Group"){const f=o().filter(g=>g.parentId===e),p=n(e);r(g=>g.map(x=>f.some(v=>v.id===x.id)?{...x,position:{x:p?x.position.x+p.position.x:x.position.x,y:p?x.position.y+p.position.y:x.position.y},parentId:void 0}:x))}r(f=>f.filter(p=>!d.includes(p.id))),a(f=>f.filter(p=>!(d.includes(p.source)||d.includes(p.target)))),t()},[e,n,r,a,t,o]);return i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:c,children:[i.jsx("span",{children:"Duplicate"}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:me.isMac?"Shift+D":"Ctrl+D"})]}),i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[i.jsx("span",{children:"Delete"}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})},la=({x:e,y:t,onClose:n})=>i.jsx("div",{style:{position:"absolute",top:t,left:e,zIndex:1e3},children:i.jsx(rn,{onClose:n,x:e,y:t})});var ca="DismissableLayer",Tt="dismissableLayer.update",ua="dismissableLayer.pointerDownOutside",da="dismissableLayer.focusOutside",Nn,Zo=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Jo=l.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:a,onDismiss:c,...u}=e,d=l.useContext(Zo),[h,f]=l.useState(null),p=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=l.useState({}),x=re(t,E=>f(E)),v=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),m=v.indexOf(y),w=h?v.indexOf(h):-1,N=d.layersWithOutsidePointerEventsDisabled.size>0,C=w>=m,I=ha(E=>{const b=E.target,S=[...d.branches].some(A=>A.contains(b));!C||S||(s==null||s(E),a==null||a(E),E.defaultPrevented||c==null||c())},p),P=ga(E=>{const b=E.target;[...d.branches].some(A=>A.contains(b))||(r==null||r(E),a==null||a(E),E.defaultPrevented||c==null||c())},p);return cs(E=>{w===d.layers.size-1&&(o==null||o(E),!E.defaultPrevented&&c&&(E.preventDefault(),c()))},p),l.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(Nn=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),In(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=Nn)}},[h,p,n,d]),l.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),In())},[h,d]),l.useEffect(()=>{const E=()=>g({});return document.addEventListener(Tt,E),()=>document.removeEventListener(Tt,E)},[]),i.jsx(se.div,{...u,ref:x,style:{pointerEvents:N?C?"auto":"none":void 0,...e.style},onFocusCapture:$(e.onFocusCapture,P.onFocusCapture),onBlurCapture:$(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:$(e.onPointerDownCapture,I.onPointerDownCapture)})});Jo.displayName=ca;var fa="DismissableLayerBranch",pa=l.forwardRef((e,t)=>{const n=l.useContext(Zo),o=l.useRef(null),s=re(t,o);return l.useEffect(()=>{const r=o.current;if(r)return n.branches.add(r),()=>{n.branches.delete(r)}},[n.branches]),i.jsx(se.div,{...e,ref:s})});pa.displayName=fa;function ha(e,t=globalThis==null?void 0:globalThis.document){const n=ge(e),o=l.useRef(!1),s=l.useRef(()=>{});return l.useEffect(()=>{const r=c=>{if(c.target&&!o.current){let u=function(){Qo(ua,n,d,{discrete:!0})};const d={originalEvent:c};c.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);o.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",r),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function ga(e,t=globalThis==null?void 0:globalThis.document){const n=ge(e),o=l.useRef(!1);return l.useEffect(()=>{const s=r=>{r.target&&!o.current&&Qo(da,n,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function In(){const e=new CustomEvent(Tt);document.dispatchEvent(e)}function Qo(e,t,n,{discrete:o}){const s=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),o?$n(s,r):s.dispatchEvent(r)}var jt="focusScope.autoFocusOnMount",Rt="focusScope.autoFocusOnUnmount",Mn={bubbles:!1,cancelable:!0},ma="FocusScope",er=l.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...a}=e,[c,u]=l.useState(null),d=ge(s),h=ge(r),f=l.useRef(null),p=re(t,v=>u(v)),g=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(o){let v=function(N){if(g.paused||!c)return;const C=N.target;c.contains(C)?f.current=C:ve(f.current,{select:!0})},y=function(N){if(g.paused||!c)return;const C=N.relatedTarget;C!==null&&(c.contains(C)||ve(f.current,{select:!0}))},m=function(N){if(document.activeElement===document.body)for(const I of N)I.removedNodes.length>0&&ve(c)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const w=new MutationObserver(m);return c&&w.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),w.disconnect()}}},[o,c,g.paused]),l.useEffect(()=>{if(c){Rn.add(g);const v=document.activeElement;if(!c.contains(v)){const m=new CustomEvent(jt,Mn);c.addEventListener(jt,d),c.dispatchEvent(m),m.defaultPrevented||(xa(Ca(tr(c)),{select:!0}),document.activeElement===v&&ve(c))}return()=>{c.removeEventListener(jt,d),setTimeout(()=>{const m=new CustomEvent(Rt,Mn);c.addEventListener(Rt,h),c.dispatchEvent(m),m.defaultPrevented||ve(v??document.body,{select:!0}),c.removeEventListener(Rt,h),Rn.remove(g)},0)}}},[c,d,h,g]);const x=l.useCallback(v=>{if(!n&&!o||g.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,m=document.activeElement;if(y&&m){const w=v.currentTarget,[N,C]=va(w);N&&C?!v.shiftKey&&m===C?(v.preventDefault(),n&&ve(N,{select:!0})):v.shiftKey&&m===N&&(v.preventDefault(),n&&ve(C,{select:!0})):m===w&&v.preventDefault()}},[n,o,g.paused]);return i.jsx(se.div,{tabIndex:-1,...a,ref:p,onKeyDown:x})});er.displayName=ma;function xa(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(ve(o,{select:t}),document.activeElement!==n)return}function va(e){const t=tr(e),n=jn(t,e),o=jn(t.reverse(),e);return[n,o]}function tr(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const s=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||s?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function jn(e,t){for(const n of e)if(!ya(n,{upTo:t}))return n}function ya(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function wa(e){return e instanceof HTMLInputElement&&"select"in e}function ve(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&wa(e)&&t&&e.select()}}var Rn=ba();function ba(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=An(e,t),e.unshift(t)},remove(t){var n;e=An(e,t),(n=e[0])==null||n.resume()}}}function An(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function Ca(e){return e.filter(t=>t.tagName!=="A")}var Pa="Arrow",nr=l.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...r}=e;return i.jsx(se.svg,{...r,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});nr.displayName=Pa;var Ea=nr,sn="Popper",[or,rr]=Fe(sn),[Sa,sr]=or(sn),ir=e=>{const{__scopePopper:t,children:n}=e,[o,s]=l.useState(null);return i.jsx(Sa,{scope:t,anchor:o,onAnchorChange:s,children:n})};ir.displayName=sn;var ar="PopperAnchor",lr=l.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,r=sr(ar,n),a=l.useRef(null),c=re(t,a);return l.useEffect(()=>{r.onAnchorChange((o==null?void 0:o.current)||a.current)}),o?null:i.jsx(se.div,{...s,ref:c})});lr.displayName=ar;var an="PopperContent",[Na,Ia]=or(an),cr=l.forwardRef((e,t)=>{var j,k,z,W,te,ne;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:r="center",alignOffset:a=0,arrowPadding:c=0,avoidCollisions:u=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:p=!1,updatePositionStrategy:g="optimized",onPlaced:x,...v}=e,y=sr(an,n),[m,w]=l.useState(null),N=re(t,B=>w(B)),[C,I]=l.useState(null),P=Gn(C),E=(P==null?void 0:P.width)??0,b=(P==null?void 0:P.height)??0,S=o+(r!=="center"?"-"+r:""),A=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},T=Array.isArray(d)?d:[d],R=T.length>0,H={padding:A,boundary:T.filter(ja),altBoundary:R},{refs:K,floatingStyles:G,placement:U,isPositioned:q,middlewareData:V}=Kn({strategy:"fixed",placement:S,whileElementsMounted:(...B)=>Zn(...B,{animationFrame:g==="always"}),elements:{reference:y.anchor},middleware:[Un({mainAxis:s+b,alignmentAxis:a}),u&&Bn({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?qn():void 0,...H}),u&&Wn({...H}),Yn({...H,apply:({elements:B,rects:ee,availableWidth:pe,availableHeight:xe})=>{const{width:Ee,height:Q}=ee.reference,le=B.floating.style;le.setProperty("--radix-popper-available-width",`${pe}px`),le.setProperty("--radix-popper-available-height",`${xe}px`),le.setProperty("--radix-popper-anchor-width",`${Ee}px`),le.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),C&&Vn({element:C,padding:c}),Ra({arrowWidth:E,arrowHeight:b}),p&&Xn({strategy:"referenceHidden",...H})]}),[_,Z]=fr(U),Y=ge(x);We(()=>{q&&(Y==null||Y())},[q,Y]);const J=(j=V.arrow)==null?void 0:j.x,M=(k=V.arrow)==null?void 0:k.y,O=((z=V.arrow)==null?void 0:z.centerOffset)!==0,[L,D]=l.useState();return We(()=>{m&&D(window.getComputedStyle(m).zIndex)},[m]),i.jsx("div",{ref:K.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:L,"--radix-popper-transform-origin":[(W=V.transformOrigin)==null?void 0:W.x,(te=V.transformOrigin)==null?void 0:te.y].join(" "),...((ne=V.hide)==null?void 0:ne.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Na,{scope:n,placedSide:_,onArrowChange:I,arrowX:J,arrowY:M,shouldHideArrow:O,children:i.jsx(se.div,{"data-side":_,"data-align":Z,...v,ref:N,style:{...v.style,animation:q?void 0:"none"}})})})});cr.displayName=an;var ur="PopperArrow",Ma={top:"bottom",right:"left",bottom:"top",left:"right"},dr=l.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,r=Ia(ur,o),a=Ma[r.placedSide];return i.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:i.jsx(Ea,{...s,ref:n,style:{...s.style,display:"block"}})})});dr.displayName=ur;function ja(e){return e!==null}var Ra=e=>({name:"transformOrigin",options:e,fn(t){var y,m,w;const{placement:n,rects:o,middlewareData:s}=t,a=((y=s.arrow)==null?void 0:y.centerOffset)!==0,c=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[d,h]=fr(n),f={start:"0%",center:"50%",end:"100%"}[h],p=(((m=s.arrow)==null?void 0:m.x)??0)+c/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+u/2;let x="",v="";return d==="bottom"?(x=a?f:`${p}px`,v=`${-u}px`):d==="top"?(x=a?f:`${p}px`,v=`${o.floating.height+u}px`):d==="right"?(x=`${-u}px`,v=a?f:`${g}px`):d==="left"&&(x=`${o.floating.width+u}px`,v=a?f:`${g}px`),{data:{x,y:v}}}});function fr(e){const[t,n="center"]=e.split("-");return[t,n]}var Aa=ir,Da=lr,_a=cr,Oa=dr,Ta="Portal",pr=l.forwardRef((e,t)=>{var c;const{container:n,...o}=e,[s,r]=l.useState(!1);We(()=>r(!0),[]);const a=n||s&&((c=globalThis==null?void 0:globalThis.document)==null?void 0:c.body);return a?Qs.createPortal(i.jsx(se.div,{...o,ref:t}),a):null});pr.displayName=Ta;var At="rovingFocusGroup.onEntryFocus",ka={bubbles:!1,cancelable:!0},Qe="RovingFocusGroup",[kt,hr,La]=Jn(Qe),[za,gr]=Fe(Qe,[La]),[Fa,$a]=za(Qe),mr=l.forwardRef((e,t)=>i.jsx(kt.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx(kt.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Ha,{...e,ref:t})})}));mr.displayName=Qe;var Ha=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:s=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:u,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=e,p=l.useRef(null),g=re(t,p),x=Qn(r),[v,y]=zt({prop:a,defaultProp:c??null,onChange:u,caller:Qe}),[m,w]=l.useState(!1),N=ge(d),C=hr(n),I=l.useRef(!1),[P,E]=l.useState(0);return l.useEffect(()=>{const b=p.current;if(b)return b.addEventListener(At,N),()=>b.removeEventListener(At,N)},[N]),i.jsx(Fa,{scope:n,orientation:o,dir:x,loop:s,currentTabStopId:v,onItemFocus:l.useCallback(b=>y(b),[y]),onItemShiftTab:l.useCallback(()=>w(!0),[]),onFocusableItemAdd:l.useCallback(()=>E(b=>b+1),[]),onFocusableItemRemove:l.useCallback(()=>E(b=>b-1),[]),children:i.jsx(se.div,{tabIndex:m||P===0?-1:0,"data-orientation":o,...f,ref:g,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{I.current=!0}),onFocus:$(e.onFocus,b=>{const S=!I.current;if(b.target===b.currentTarget&&S&&!m){const A=new CustomEvent(At,ka);if(b.currentTarget.dispatchEvent(A),!A.defaultPrevented){const T=C().filter(U=>U.focusable),R=T.find(U=>U.active),H=T.find(U=>U.id===v),G=[R,H,...T].filter(Boolean).map(U=>U.ref.current);yr(G,h)}}I.current=!1}),onBlur:$(e.onBlur,()=>w(!1))})})}),xr="RovingFocusGroupItem",vr=l.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:s=!1,tabStopId:r,children:a,...c}=e,u=rt(),d=r||u,h=$a(xr,n),f=h.currentTabStopId===d,p=hr(n),{onFocusableItemAdd:g,onFocusableItemRemove:x,currentTabStopId:v}=h;return l.useEffect(()=>{if(o)return g(),()=>x()},[o,g,x]),i.jsx(kt.ItemSlot,{scope:n,id:d,focusable:o,active:s,children:i.jsx(se.span,{tabIndex:f?0:-1,"data-orientation":h.orientation,...c,ref:t,onMouseDown:$(e.onMouseDown,y=>{o?h.onItemFocus(d):y.preventDefault()}),onFocus:$(e.onFocus,()=>h.onItemFocus(d)),onKeyDown:$(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){h.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const m=Ua(y,h.orientation,h.dir);if(m!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let N=p().filter(C=>C.focusable).map(C=>C.ref.current);if(m==="last")N.reverse();else if(m==="prev"||m==="next"){m==="prev"&&N.reverse();const C=N.indexOf(y.currentTarget);N=h.loop?Ba(N,C+1):N.slice(C+1)}setTimeout(()=>yr(N))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:v!=null}):a})})});vr.displayName=xr;var Ga={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ka(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ua(e,t,n){const o=Ka(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ga[o]}function yr(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function Ba(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var Wa=mr,Ya=vr;function Va(e){const t=Xa(e),n=l.forwardRef((o,s)=>{const{children:r,...a}=o,c=l.Children.toArray(r),u=c.find(Za);if(u){const d=u.props.children,h=c.map(f=>f===u?l.Children.count(d)>1?l.Children.only(null):l.isValidElement(d)?d.props.children:null:f);return i.jsx(t,{...a,ref:s,children:l.isValidElement(d)?l.cloneElement(d,void 0,h):null})}return i.jsx(t,{...a,ref:s,children:r})});return n.displayName=`${e}.Slot`,n}function Xa(e){const t=l.forwardRef((n,o)=>{const{children:s,...r}=n;if(l.isValidElement(s)){const a=Qa(s),c=Ja(r,s.props);return s.type!==l.Fragment&&(c.ref=o?Ft(o,a):a),l.cloneElement(s,c)}return l.Children.count(s)>1?l.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var qa=Symbol("radix.slottable");function Za(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===qa}function Ja(e,t){const n={...t};for(const o in t){const s=e[o],r=t[o];/^on[A-Z]/.test(o)?s&&r?n[o]=(...c)=>{r(...c),s(...c)}:s&&(n[o]=s):o==="style"?n[o]={...s,...r}:o==="className"&&(n[o]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}function Qa(e){var o,s;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Lt=["Enter"," "],el=["ArrowDown","PageUp","Home"],wr=["ArrowUp","PageDown","End"],tl=[...el,...wr],nl={ltr:[...Lt,"ArrowRight"],rtl:[...Lt,"ArrowLeft"]},ol={ltr:["ArrowLeft"],rtl:["ArrowRight"]},et="Menu",[Xe,rl,sl]=Jn(et),[Re,br]=Fe(et,[sl,rr,gr]),yt=rr(),Cr=gr(),[il,Ae]=Re(et),[al,tt]=Re(et),Pr=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:s,onOpenChange:r,modal:a=!0}=e,c=yt(t),[u,d]=l.useState(null),h=l.useRef(!1),f=ge(r),p=Qn(s);return l.useEffect(()=>{const g=()=>{h.current=!0,document.addEventListener("pointerdown",x,{capture:!0,once:!0}),document.addEventListener("pointermove",x,{capture:!0,once:!0})},x=()=>h.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",x,{capture:!0}),document.removeEventListener("pointermove",x,{capture:!0})}},[]),i.jsx(Aa,{...c,children:i.jsx(il,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:d,children:i.jsx(al,{scope:t,onClose:l.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:h,dir:p,modal:a,children:o})})})};Pr.displayName=et;var ll="MenuAnchor",ln=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=yt(n);return i.jsx(Da,{...s,...o,ref:t})});ln.displayName=ll;var cn="MenuPortal",[cl,Er]=Re(cn,{forceMount:void 0}),Sr=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:s}=e,r=Ae(cn,t);return i.jsx(cl,{scope:t,forceMount:n,children:i.jsx($e,{present:n||r.open,children:i.jsx(pr,{asChild:!0,container:s,children:o})})})};Sr.displayName=cn;var ce="MenuContent",[ul,un]=Re(ce),Nr=l.forwardRef((e,t)=>{const n=Er(ce,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,r=Ae(ce,e.__scopeMenu),a=tt(ce,e.__scopeMenu);return i.jsx(Xe.Provider,{scope:e.__scopeMenu,children:i.jsx($e,{present:o||r.open,children:i.jsx(Xe.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(dl,{...s,ref:t}):i.jsx(fl,{...s,ref:t})})})})}),dl=l.forwardRef((e,t)=>{const n=Ae(ce,e.__scopeMenu),o=l.useRef(null),s=re(t,o);return l.useEffect(()=>{const r=o.current;if(r)return Ln(r)},[]),i.jsx(dn,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$(e.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),fl=l.forwardRef((e,t)=>{const n=Ae(ce,e.__scopeMenu);return i.jsx(dn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),pl=Va("MenuContent.ScrollLock"),dn=l.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:a,disableOutsidePointerEvents:c,onEntryFocus:u,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:g,disableOutsideScroll:x,...v}=e,y=Ae(ce,n),m=tt(ce,n),w=yt(n),N=Cr(n),C=rl(n),[I,P]=l.useState(null),E=l.useRef(null),b=re(t,E,y.onContentChange),S=l.useRef(0),A=l.useRef(""),T=l.useRef(0),R=l.useRef(null),H=l.useRef("right"),K=l.useRef(0),G=x?zn:l.Fragment,U=x?{as:pl,allowPinchZoom:!0}:void 0,q=_=>{var j,k;const Z=A.current+_,Y=C().filter(z=>!z.disabled),J=document.activeElement,M=(j=Y.find(z=>z.ref.current===J))==null?void 0:j.textValue,O=Y.map(z=>z.textValue),L=Sl(O,Z,M),D=(k=Y.find(z=>z.textValue===L))==null?void 0:k.ref.current;(function z(W){A.current=W,window.clearTimeout(S.current),W!==""&&(S.current=window.setTimeout(()=>z(""),1e3))})(Z),D&&setTimeout(()=>D.focus())};l.useEffect(()=>()=>window.clearTimeout(S.current),[]),Fn();const V=l.useCallback(_=>{var Y,J;return H.current===((Y=R.current)==null?void 0:Y.side)&&Il(_,(J=R.current)==null?void 0:J.area)},[]);return i.jsx(ul,{scope:n,searchRef:A,onItemEnter:l.useCallback(_=>{V(_)&&_.preventDefault()},[V]),onItemLeave:l.useCallback(_=>{var Z;V(_)||((Z=E.current)==null||Z.focus(),P(null))},[V]),onTriggerLeave:l.useCallback(_=>{V(_)&&_.preventDefault()},[V]),pointerGraceTimerRef:T,onPointerGraceIntentChange:l.useCallback(_=>{R.current=_},[]),children:i.jsx(G,{...U,children:i.jsx(er,{asChild:!0,trapped:s,onMountAutoFocus:$(r,_=>{var Z;_.preventDefault(),(Z=E.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(Jo,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:h,onFocusOutside:f,onInteractOutside:p,onDismiss:g,children:i.jsx(Wa,{asChild:!0,...N,dir:m.dir,orientation:"vertical",loop:o,currentTabStopId:I,onCurrentTabStopIdChange:P,onEntryFocus:$(u,_=>{m.isUsingKeyboardRef.current||_.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(_a,{role:"menu","aria-orientation":"vertical","data-state":Gr(y.open),"data-radix-menu-content":"",dir:m.dir,...w,...v,ref:b,style:{outline:"none",...v.style},onKeyDown:$(v.onKeyDown,_=>{const Y=_.target.closest("[data-radix-menu-content]")===_.currentTarget,J=_.ctrlKey||_.altKey||_.metaKey,M=_.key.length===1;Y&&(_.key==="Tab"&&_.preventDefault(),!J&&M&&q(_.key));const O=E.current;if(_.target!==O||!tl.includes(_.key))return;_.preventDefault();const D=C().filter(j=>!j.disabled).map(j=>j.ref.current);wr.includes(_.key)&&D.reverse(),Pl(D)}),onBlur:$(e.onBlur,_=>{_.currentTarget.contains(_.target)||(window.clearTimeout(S.current),A.current="")}),onPointerMove:$(e.onPointerMove,qe(_=>{const Z=_.target,Y=K.current!==_.clientX;if(_.currentTarget.contains(Z)&&Y){const J=_.clientX>K.current?"right":"left";H.current=J,K.current=_.clientX}}))})})})})})})});Nr.displayName=ce;var hl="MenuGroup",fn=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return i.jsx(se.div,{role:"group",...o,ref:t})});fn.displayName=hl;var gl="MenuLabel",Ir=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return i.jsx(se.div,{...o,ref:t})});Ir.displayName=gl;var ct="MenuItem",Dn="menu.itemSelect",wt=l.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...s}=e,r=l.useRef(null),a=tt(ct,e.__scopeMenu),c=un(ct,e.__scopeMenu),u=re(t,r),d=l.useRef(!1),h=()=>{const f=r.current;if(!n&&f){const p=new CustomEvent(Dn,{bubbles:!0,cancelable:!0});f.addEventListener(Dn,g=>o==null?void 0:o(g),{once:!0}),$n(f,p),p.defaultPrevented?d.current=!1:a.onClose()}};return i.jsx(Mr,{...s,ref:u,disabled:n,onClick:$(e.onClick,h),onPointerDown:f=>{var p;(p=e.onPointerDown)==null||p.call(e,f),d.current=!0},onPointerUp:$(e.onPointerUp,f=>{var p;d.current||(p=f.currentTarget)==null||p.click()}),onKeyDown:$(e.onKeyDown,f=>{const p=c.searchRef.current!=="";n||p&&f.key===" "||Lt.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});wt.displayName=ct;var Mr=l.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:s,...r}=e,a=un(ct,n),c=Cr(n),u=l.useRef(null),d=re(t,u),[h,f]=l.useState(!1),[p,g]=l.useState("");return l.useEffect(()=>{const x=u.current;x&&g((x.textContent??"").trim())},[r.children]),i.jsx(Xe.ItemSlot,{scope:n,disabled:o,textValue:s??p,children:i.jsx(Ya,{asChild:!0,...c,focusable:!o,children:i.jsx(se.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...r,ref:d,onPointerMove:$(e.onPointerMove,qe(x=>{o?a.onItemLeave(x):(a.onItemEnter(x),x.defaultPrevented||x.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$(e.onPointerLeave,qe(x=>a.onItemLeave(x))),onFocus:$(e.onFocus,()=>f(!0)),onBlur:$(e.onBlur,()=>f(!1))})})})}),ml="MenuCheckboxItem",jr=l.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...s}=e;return i.jsx(Or,{scope:e.__scopeMenu,checked:n,children:i.jsx(wt,{role:"menuitemcheckbox","aria-checked":ut(n)?"mixed":n,...s,ref:t,"data-state":hn(n),onSelect:$(s.onSelect,()=>o==null?void 0:o(ut(n)?!0:!n),{checkForDefaultPrevented:!1})})})});jr.displayName=ml;var Rr="MenuRadioGroup",[xl,vl]=Re(Rr,{value:void 0,onValueChange:()=>{}}),Ar=l.forwardRef((e,t)=>{const{value:n,onValueChange:o,...s}=e,r=ge(o);return i.jsx(xl,{scope:e.__scopeMenu,value:n,onValueChange:r,children:i.jsx(fn,{...s,ref:t})})});Ar.displayName=Rr;var Dr="MenuRadioItem",_r=l.forwardRef((e,t)=>{const{value:n,...o}=e,s=vl(Dr,e.__scopeMenu),r=n===s.value;return i.jsx(Or,{scope:e.__scopeMenu,checked:r,children:i.jsx(wt,{role:"menuitemradio","aria-checked":r,...o,ref:t,"data-state":hn(r),onSelect:$(o.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});_r.displayName=Dr;var pn="MenuItemIndicator",[Or,yl]=Re(pn,{checked:!1}),Tr=l.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...s}=e,r=yl(pn,n);return i.jsx($e,{present:o||ut(r.checked)||r.checked===!0,children:i.jsx(se.span,{...s,ref:t,"data-state":hn(r.checked)})})});Tr.displayName=pn;var wl="MenuSeparator",kr=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return i.jsx(se.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});kr.displayName=wl;var bl="MenuArrow",Lr=l.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=yt(n);return i.jsx(Oa,{...s,...o,ref:t})});Lr.displayName=bl;var Cl="MenuSub",[Uc,zr]=Re(Cl),Ue="MenuSubTrigger",Fr=l.forwardRef((e,t)=>{const n=Ae(Ue,e.__scopeMenu),o=tt(Ue,e.__scopeMenu),s=zr(Ue,e.__scopeMenu),r=un(Ue,e.__scopeMenu),a=l.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:u}=r,d={__scopeMenu:e.__scopeMenu},h=l.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return l.useEffect(()=>h,[h]),l.useEffect(()=>{const f=c.current;return()=>{window.clearTimeout(f),u(null)}},[c,u]),i.jsx(ln,{asChild:!0,...d,children:i.jsx(Mr,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Gr(n.open),...e,ref:Ft(t,s.onTriggerChange),onClick:f=>{var p;(p=e.onClick)==null||p.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$(e.onPointerMove,qe(f=>{r.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(r.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),h()},100))})),onPointerLeave:$(e.onPointerLeave,qe(f=>{var g,x;h();const p=(g=n.content)==null?void 0:g.getBoundingClientRect();if(p){const v=(x=n.content)==null?void 0:x.dataset.side,y=v==="right",m=y?-5:5,w=p[y?"left":"right"],N=p[y?"right":"left"];r.onPointerGraceIntentChange({area:[{x:f.clientX+m,y:f.clientY},{x:w,y:p.top},{x:N,y:p.top},{x:N,y:p.bottom},{x:w,y:p.bottom}],side:v}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(f),f.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:$(e.onKeyDown,f=>{var g;const p=r.searchRef.current!=="";e.disabled||p&&f.key===" "||nl[o.dir].includes(f.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),f.preventDefault())})})})});Fr.displayName=Ue;var $r="MenuSubContent",Hr=l.forwardRef((e,t)=>{const n=Er(ce,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,r=Ae(ce,e.__scopeMenu),a=tt(ce,e.__scopeMenu),c=zr($r,e.__scopeMenu),u=l.useRef(null),d=re(t,u);return i.jsx(Xe.Provider,{scope:e.__scopeMenu,children:i.jsx($e,{present:o||r.open,children:i.jsx(Xe.Slot,{scope:e.__scopeMenu,children:i.jsx(dn,{id:c.contentId,"aria-labelledby":c.triggerId,...s,ref:d,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{var f;a.isUsingKeyboardRef.current&&((f=u.current)==null||f.focus()),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:$(e.onFocusOutside,h=>{h.target!==c.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:$(e.onEscapeKeyDown,h=>{a.onClose(),h.preventDefault()}),onKeyDown:$(e.onKeyDown,h=>{var g;const f=h.currentTarget.contains(h.target),p=ol[a.dir].includes(h.key);f&&p&&(r.onOpenChange(!1),(g=c.trigger)==null||g.focus(),h.preventDefault())})})})})})});Hr.displayName=$r;function Gr(e){return e?"open":"closed"}function ut(e){return e==="indeterminate"}function hn(e){return ut(e)?"indeterminate":e?"checked":"unchecked"}function Pl(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function El(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function Sl(e,t,n){const s=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let a=El(e,Math.max(r,0));s.length===1&&(a=a.filter(d=>d!==n));const u=a.find(d=>d.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Nl(e,t){const{x:n,y:o}=e;let s=!1;for(let r=0,a=t.length-1;r<t.length;a=r++){const c=t[r],u=t[a],d=c.x,h=c.y,f=u.x,p=u.y;h>o!=p>o&&n<(f-d)*(o-h)/(p-h)+d&&(s=!s)}return s}function Il(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Nl(n,t)}function qe(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Ml=Pr,jl=ln,Rl=Sr,Al=Nr,Dl=fn,_l=Ir,Ol=wt,Tl=jr,kl=Ar,Ll=_r,zl=Tr,Fl=kr,$l=Lr,Hl=Fr,Gl=Hr,bt="DropdownMenu",[Kl,Bc]=Fe(bt,[br]),ie=br(),[Ul,Kr]=Kl(bt),Ur=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:s,defaultOpen:r,onOpenChange:a,modal:c=!0}=e,u=ie(t),d=l.useRef(null),[h,f]=zt({prop:s,defaultProp:r??!1,onChange:a,caller:bt});return i.jsx(Ul,{scope:t,triggerId:rt(),triggerRef:d,contentId:rt(),open:h,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(p=>!p),[f]),modal:c,children:i.jsx(Ml,{...u,open:h,onOpenChange:f,dir:o,modal:c,children:n})})};Ur.displayName=bt;var Br="DropdownMenuTrigger",Wr=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...s}=e,r=Kr(Br,n),a=ie(n);return i.jsx(jl,{asChild:!0,...a,children:i.jsx(se.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:Ft(t,r.triggerRef),onPointerDown:$(e.onPointerDown,c=>{!o&&c.button===0&&c.ctrlKey===!1&&(r.onOpenToggle(),r.open||c.preventDefault())}),onKeyDown:$(e.onKeyDown,c=>{o||(["Enter"," "].includes(c.key)&&r.onOpenToggle(),c.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});Wr.displayName=Br;var Bl="DropdownMenuPortal",Yr=e=>{const{__scopeDropdownMenu:t,...n}=e,o=ie(t);return i.jsx(Rl,{...o,...n})};Yr.displayName=Bl;var Vr="DropdownMenuContent",Xr=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=Kr(Vr,n),r=ie(n),a=l.useRef(!1);return i.jsx(Al,{id:s.contentId,"aria-labelledby":s.triggerId,...r,...o,ref:t,onCloseAutoFocus:$(e.onCloseAutoFocus,c=>{var u;a.current||(u=s.triggerRef.current)==null||u.focus(),a.current=!1,c.preventDefault()}),onInteractOutside:$(e.onInteractOutside,c=>{const u=c.detail.originalEvent,d=u.button===0&&u.ctrlKey===!0,h=u.button===2||d;(!s.modal||h)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Xr.displayName=Vr;var Wl="DropdownMenuGroup",Yl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Dl,{...s,...o,ref:t})});Yl.displayName=Wl;var Vl="DropdownMenuLabel",Xl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(_l,{...s,...o,ref:t})});Xl.displayName=Vl;var ql="DropdownMenuItem",Zl=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Ol,{...s,...o,ref:t})});Zl.displayName=ql;var Jl="DropdownMenuCheckboxItem",Ql=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Tl,{...s,...o,ref:t})});Ql.displayName=Jl;var ec="DropdownMenuRadioGroup",tc=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(kl,{...s,...o,ref:t})});tc.displayName=ec;var nc="DropdownMenuRadioItem",oc=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Ll,{...s,...o,ref:t})});oc.displayName=nc;var rc="DropdownMenuItemIndicator",sc=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(zl,{...s,...o,ref:t})});sc.displayName=rc;var ic="DropdownMenuSeparator",ac=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Fl,{...s,...o,ref:t})});ac.displayName=ic;var lc="DropdownMenuArrow",cc=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx($l,{...s,...o,ref:t})});cc.displayName=lc;var uc="DropdownMenuSubTrigger",dc=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Hl,{...s,...o,ref:t})});dc.displayName=uc;var fc="DropdownMenuSubContent",pc=l.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Gl,{...s,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});pc.displayName=fc;const hc=Object.assign({"/content/solutions/playground.json":()=>ds(()=>import("./playground-CPt6jU9v.js"),[])}),gc=()=>{const{setNodes:e,setEdges:t,setViewport:n}=fe(),o=oe(d=>d.currentLevel),s=de[o].hints.length?de[o].hints:["No hints here"],[r,a]=l.useState(0),c=hc[`/content/solutions/${o}.json`],u=async()=>{const d=await c();if(d){const{x:h=0,y:f=0,zoom:p=1}=d.viewport;e(d.nodes),t(d.edges),n({x:h,y:f,zoom:p})}};return i.jsxs(Qt,{children:[i.jsx(en,{asChild:!0,children:i.jsx(Ce,{side:"left",tooltip:"Help Menu","aria-label":"Help Menu",children:i.jsx(us,{className:"text-white"})})}),i.jsx(nn,{children:i.jsx(on,{side:"bottom",className:"mr-3",children:i.jsxs("div",{className:"flex w-200 flex-col gap-4 rounded bg-slate-800 p-4 font-mono text-white shadow-lg outline-1 outline-slate-700 outline-solid",children:[i.jsx("h1",{className:"text-xl",children:"Hints"}),s[r],i.jsx(Te,{className:"text-slate-400 italic hover:underline",target:"_blank",to:"/docs/",children:"Find information on this topic here"}),i.jsx("hr",{className:"mx-auto h-1 w-full rounded-sm border-0 bg-slate-700"}),i.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[i.jsx("button",{disabled:r===0,className:Be("rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",r===0?"opacity-50":"cursor-pointer hover:bg-slate-600"),onClick:()=>{r>0&&a(r-1)},children:"Previous Hint"}),i.jsx("button",{disabled:r===s.length-1,className:Be("rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",r===s.length-1?"opacity-50":"cursor-pointer hover:bg-slate-600"),onClick:()=>{r<s.length-1&&a(r+1)},children:"Next Hint"}),i.jsx("button",{className:"cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white hover:bg-slate-600",children:"First Correct Node"}),i.jsx("button",{className:"hover:bg-jam-600 cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",onClick:u,children:"Full Solution"})]})]})})})]})},mc=({rfInstance:e})=>{const{getNodes:t,getEdges:n,setViewport:o,setEdges:s,setNodes:r}=fe();we(u=>u.debugPrint);const[a,c]=l.useState(!1);return i.jsxs(ft,{position:"top-right",className:"flex flex-col items-end justify-center gap-2",children:[i.jsxs(Ur,{open:a,onOpenChange:c,children:[i.jsx(Wr,{asChild:!0,children:i.jsx(Ce,{side:"left",tooltip:"Add Node","aria-label":"Add Node",children:i.jsx(fs,{className:"text-white"})})}),i.jsx(Yr,{children:i.jsx(Xr,{align:"end",children:i.jsx(rn,{onClose:()=>c(!1),x:1800,y:400})})})]}),i.jsx(gc,{}),!1]})},xc=({nodeIds:e,x:t,y:n,onClose:o})=>{const{getNodes:s,getEdges:r,setNodes:a,setEdges:c}=fe(),u=l.useCallback(()=>{a(d=>d.filter(h=>!e.includes(h.id))),c(d=>d.filter(h=>!e.includes(h.source)&&!e.includes(h.target))),o()},[e,a,c,o]);return i.jsx("div",{style:{position:"absolute",top:n,left:t,zIndex:1e3},children:i.jsxs(ft,{className:"flex w-55 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:()=>{Ht(s().filter(d=>e.includes(d.id)),r,s,c,a),o()},children:[i.jsxs("span",{children:["Duplicate ",e.length," nodes "]}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:me.isMac?"Shift+D":"Ctrl+D"})]}),i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[i.jsxs("span",{children:["Delete ",e.length," nodes "]}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})})};function vc(){const{getNodes:e,getEdges:t,setEdges:n,setNodes:o}=fe();l.useEffect(()=>{const s=me.appendPlatformModifier("d");return me.registerShortcut(s,a=>{const c=e().filter(u=>u.selected);c.length>0&&Ht(c,t,e,n,o)})},[e,t,n,o])}function yc(){l.useEffect(()=>{const e=me.appendPlatformModifier(" ");return me.registerShortcut(e,n=>{Me.getState().visible?Me.getState().closeAddMenu():Me.getState().openAddMenu()})},[])}function wc(e,t=!0){l.useEffect(()=>me.registerShortcut("Escape",o=>{t&&e&&e()}),[e,t])}function bc(){const[e,t]=l.useState(null),[n,o]=l.useState(null),[s,r]=l.useState(null),{visible:a,closeAddMenu:c,menuX:u,menuY:d}=Me(),h=l.useCallback(C=>{C.preventDefault();const I=Ct(C);t({x:I.x,y:I.y})},[t]),f=l.useCallback((C,I)=>{C.preventDefault();const P=Ct(C);o({nodeId:I.id,nodeType:I.type,nodeLoopId:I.data.loopId,nodeParentId:I.parentId,x:P.x,y:P.y})},[o]),p=l.useCallback((C,I)=>{if(C.preventDefault(),I.length===0)return;const P=Ct(C);r({nodeIds:I.map(E=>E.id),x:P.x,y:P.y})},[r]),g=l.useCallback(()=>{t(null),o(null),r(null),Me.getState().closeAddMenu()},[]),x=g,v=e!==null||n!==null||s!==null||Me.getState().visible;wc(g,v),vc(),yc();const y=e||a,m=(e==null?void 0:e.x)??u,w=(e==null?void 0:e.y)??d;return{paneContextMenu:e,nodeContextMenu:n,selectionContextMenu:s,shouldShowPaneContextMenu:y,paneContextMenuX:m,paneContextMenuY:w,setPaneContextMenu:t,setNodeContextMenu:o,setSelectionContextMenu:r,handlePaneContextMenu:h,handleNodeContextMenu:f,handleSelectionContextMenu:p,handleCloseCombinedMenu:()=>{t(null),c()},onPaneClick:x}}const _n=e=>Symbol.iterator in e,On=e=>"entries"in e,Tn=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),o=t instanceof Map?t:new Map(t.entries());if(n.size!==o.size)return!1;for(const[s,r]of n)if(!Object.is(r,o.get(s)))return!1;return!0},Cc=(e,t)=>{const n=e[Symbol.iterator](),o=t[Symbol.iterator]();let s=n.next(),r=o.next();for(;!s.done&&!r.done;){if(!Object.is(s.value,r.value))return!1;s=n.next(),r=o.next()}return!!s.done&&!!r.done};function Pc(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!_n(e)||!_n(t)?Tn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):On(e)&&On(t)?Tn(e,t):Cc(e,t)}function Ec(e){const t=kn.useRef(void 0);return n=>{const o=e(n);return Pc(t.current,o)?t.current:t.current=o}}const Sc=e=>({nodes:e.nodes,edges:e.edges,setNodes:e.setNodes,setEdges:e.setEdges,highlightDuplicateNodes:e.highlightDuplicateNodes});function Nc(){const{getIntersectingNodes:e,getNode:t,getNodes:n}=fe(),{nodes:o,edges:s,setNodes:r,setEdges:a,highlightDuplicateNodes:c}=dt(Ec(Sc)),u=we(y=>y.replaceNode),d=we(y=>y.removeNode),h=we(y=>y.addEdge),f=we(y=>y.removeEdge),p=l.useCallback(y=>{let m=!1;y.forEach(w=>{switch(w.type){case"add":u(w.item),m=w.item.type==="ExportToGameobject";break;case"remove":{const N=t(w.id);if(N!=null&&N.data.loopStart||N!=null&&N.data.loopEnd){const C=n().filter(I=>I.id!==w.id&&I.data.loopId===N.data.loopId)[0];r(I=>I.filter(P=>P.data.loopId!==(N==null?void 0:N.data.loopId)).map(P=>({...P,data:{...P.data,parentLoopId:P.data.parentLoopId===N.data.loopId?void 0:P.data.parentLoopId}}))),a(I=>I.filter(P=>P.target===C.id||P.source===C.id?(f(P.id),!1):!0)),d(C.id)}d(w.id),m=!0;break}case"replace":u(w.item),m=w.item.type==="ExportToGameobject";break}}),r(w=>ys(y,w)),m&&c()},[r,u,t,d,n,a,f,c]),g=l.useCallback(y=>{y.forEach(m=>{switch(m.type){case"remove":f(m.id);break;case"add":h(m.item);break}}),a(m=>Ds(y,m))},[a,h,f]),x=l.useCallback(y=>{const m=t(y.source),w=t(y.target);(m!=null&&m.data.loopStart&&m.data.loopId===(w==null?void 0:w.data.loopId)||m!=null&&m.data.loopStart&&(w==null?void 0:w.data.parentLoopId)===m.data.loopId||m!=null&&m.data.loopEnd&&m.data.parentLoopId===(w==null?void 0:w.data.parentLoopId)||w!=null&&w.data.loopEnd&&(m==null?void 0:m.data.parentLoopId)===w.data.loopId||!(m!=null&&m.data.loopStart)&&!(w!=null&&w.data.loopEnd)&&(m==null?void 0:m.data.parentLoopId)===(w==null?void 0:w.data.parentLoopId)?!0:(ws({title:"Invalid Loop Connection!",description:"Connections within loops are restricted to other nodes of the same loop. External nodes may only link to the loop's entry point or accept data from its exit point."}),!1))&&(h(y),a(C=>_s(y,C)))},[a,t,h]);return{nodes:o,edges:s,onNodesChange:p,onEdgesChange:g,onConnect:x,onNodeDragStop:(y,m,w)=>{const N={x:Math.min(...w.map(b=>b.parentId?b.position.x+t(b.parentId).position.x:b.position.x)),y:Math.min(...w.map(b=>b.parentId?b.position.y+t(b.parentId).position.y:b.position.y)),width:Math.max(...w.map(b=>b.position.x+b.measured.width))-Math.min(...w.map(b=>b.position.x)),height:Math.max(...w.map(b=>b.position.y+b.measured.height))-Math.min(...w.map(b=>b.position.y))},C=e(N).filter(b=>b.type==="Group"&&b.selected===!1),I=C.reduce((b,S)=>{const A=S.measured.width*S.measured.height,T=b.measured.width*b.measured.height;return A>T?S:b},C[0]),P=[],E=[];w.forEach(b=>{if(b.type!=="Group"){if(I){if(b.parentId===void 0)P.push({...b,parentId:I.id,position:{x:b.position.x-I.position.x,y:b.position.y-I.position.y}});else if(I.id!==b.parentId){if(!w.some(S=>S.id===b.parentId)){console.log("node is directly adopted",b.id);const S=t(b.parentId);if(!S){console.warn(`recently moved node ${b.id} has an invalid parentId of ${b.parentId}`);return}P.push({...b,parentId:I.id,position:{x:b.position.x+S.position.x-I.position.x,y:b.position.y+S.position.y-I.position.y}}),E.includes(S)||E.push(S)}}}else if(b.parentId!==void 0){if(!w.some(S=>S.id===b.parentId)){const S=t(b.parentId);if(!S){console.warn(`recently moved node ${b.id} has an invalid parentId of ${b.parentId}`);return}P.push({...b,parentId:void 0,position:{x:b.position.x+S.position.x,y:b.position.y+S.position.y}}),E.includes(S)||E.push(S)}}I&&E.push(I)}}),P.push(...E.map(b=>{const S=P.filter(H=>H.parentId===b.id);console.log("updatedChildren",S);const A=n().filter(H=>H.parentId===b.id&&!P.some(K=>K.id===H.id));console.log("nonUpdatedChildren",A);const T=[...S,...A],R=bs(b,T);return T.forEach(H=>{const K={x:H.position.x+R.offset.x,y:H.position.y+R.offset.y};S.some(G=>G.id===H.id)?P.splice(P.findIndex(G=>G.id===H.id),1,{...H,position:K}):P.push({...H,position:K})}),{...b,position:{x:R.bounds.x,y:R.bounds.y},data:{...b.data,isParent:T.length>0,minWidth:R.bounds.minWidth,minHeight:R.bounds.minHeight},style:{zIndex:-1},width:R.bounds.width,height:R.bounds.height}})),r(b=>b.map(A=>{const T=P.find(R=>R.id===A.id);return T?{...T,dragging:!1}:{...A,dragging:!1}}))}}}const Ic=l.memo(({id:e,data:t})=>{const n=be(g=>g.gameObjects),o=Array.from(n.keys()),{isOpen:s,getToggleButtonProps:r,getMenuProps:a,getLabelProps:c,highlightedIndex:u,getItemProps:d,selectedGameObjects:h}=eo(o,t.selectedGameObjects?t.selectedGameObjects:[o[0]],e),f=l.useMemo(()=>Hn("import",n,h),[n,h]),{updateNodeData:p}=fe();return l.useEffect(()=>{p(e,{compute:(g,x)=>{const v=h.length===1?0:Math.round(Dt(g,st,-1));if(0>v||v>=h.length){x.clear();return}const y=h[v];f.forEach(m=>{x.set(m,n.get(y).get(m).value)})},selectedGameObjects:h})},[f]),i.jsx("div",{className:"min-w-48",children:i.jsxs(to,{label:"Import From Gameobject",type:"import",docsName:"import",children:[i.jsxs("div",{className:"text-left",children:[h.length>1&&i.jsx(no,{id:st,position:it.Left}),i.jsx(oo,{highlightedIndex:u,isOpen:s,selectableObjects:o,selectedObjects:h,useSelectProps:{getItemProps:d,getLabelProps:c,getMenuProps:a,getToggleButtonProps:r}})]}),f.map(g=>i.jsx(ro,{id:g,position:it.Right,label:g},g))]})})}),Mc=l.memo(({id:e,data:t,selected:n})=>{const o=oe(C=>C.currentLevel),s=de[o].modifiableGameObjects,r=be(C=>C.gameObjects),a=Array.from(r.keys()),{isOpen:c,getToggleButtonProps:u,getMenuProps:d,getLabelProps:h,highlightedIndex:f,getItemProps:p,selectedGameObjects:g}=eo(a,t.selectedGameObjects?t.selectedGameObjects:[a[0]],e),x=l.useMemo(()=>Hn("export",r,g),[r,g]),v=be(C=>C.setData),y=be(C=>C.addHandle),m=be(C=>C.removeHandle),w=l.useRef(t.curLabel?t.curLabel.current:""),{updateNodeData:N}=fe();return l.useEffect(()=>{N(e,{compute:(C,I)=>{const P=g.length===1?0:Math.round(Dt(C,st,-1));if(0>P||P>=g.length)return;const E=g[P];x.forEach(b=>{v(E,b,Dt(C,b,0))})},selectedGameObjects:g})},[x]),i.jsx("div",{children:i.jsxs(to,{label:"Export To Gameobject",type:"export",docsName:"export",children:[i.jsxs("div",{className:"text-left",children:[g.length>1&&i.jsx(no,{id:st,position:it.Left}),i.jsx(oo,{highlightedIndex:f,isOpen:c,selectableObjects:a,selectedObjects:g,useSelectProps:{getItemProps:p,getLabelProps:h,getMenuProps:d,getToggleButtonProps:u}})]}),x.map(C=>i.jsxs("div",{className:"flex w-full items-center [&>*:nth-child(even)]:pointer-events-none [&>*:nth-child(even)]:opacity-0 hover:[&>*:nth-child(even)]:pointer-events-auto hover:[&>*:nth-child(even)]:opacity-100 "+(n?"hover:bg-slate-800":"hover:bg-slate-700"),children:[i.jsx(ro,{id:C,position:it.Left,label:C},C),!s.some(({id:I,connections:P})=>g.includes(I)&&P.some(E=>E.label===C))&&i.jsx(ps,{className:"mt-[1px] ml-2 cursor-pointer text-red-400",onClick:()=>{g.forEach(I=>m(I,C))}})]},C)),!!g.length&&i.jsx(Os,{addHandle:(C,I)=>y(C,I),handleIdentifiers:g,handleLabel:w,nodeId:e,updateNodeData:N})]})})}),jc={Value:Us,Display:Ks,Time:Gs,KeyPress:Hs,Math:$s,ExportToGameobject:Mc,ImportFromGameobject:Ic,Switch:Fs,Group:zs,ForStart:Ls,ForEnd:ks,MousePosition:Ts},Rc=()=>{const[e,t]=l.useState(),{nodes:n,edges:o,onNodesChange:s,onEdgesChange:r,onConnect:a,onNodeDragStop:c}=Nc(),{nodeContextMenu:u,selectionContextMenu:d,shouldShowPaneContextMenu:h,paneContextMenuX:f,paneContextMenuY:p,handlePaneContextMenu:g,handleNodeContextMenu:x,handleSelectionContextMenu:v,onPaneClick:y,setNodeContextMenu:m,setSelectionContextMenu:w,handleCloseCombinedMenu:N}=bc(),C=l.useRef(null);return Mi(C),i.jsxs(i.Fragment,{children:[i.jsxs(Ys,{id:"node-editor",onInit:t,nodeTypes:jc,edgeTypes:Ri,nodes:n,edges:o,onNodesChange:s,onEdgesChange:r,onPaneContextMenu:g,onNodeContextMenu:x,onSelectionContextMenu:v,onConnect:a,onPaneClick:y,disableKeyboardA11y:!0,fitView:!0,proOptions:{hideAttribution:!0},deleteKeyCode:["Delete","Backspace"],onNodeDragStop:c,ref:C,defaultEdgeOptions:{type:"Deletable"},children:[i.jsx(Vs,{bgColor:"#14141d",color:"#a7abc2"}),i.jsx(mc,{rfInstance:e}),i.jsx(Ai,{}),i.jsx(ia,{}),i.jsx(Cs,{})]}),h&&i.jsx(la,{x:f,y:p,onClose:N}),u&&i.jsx(aa,{nodeId:u.nodeId,nodeType:u.nodeType,nodeLoopId:u.nodeLoopId,nodeParentId:u.nodeParentId,x:u.x,y:u.y,onClose:()=>m(null)}),d&&i.jsx(xc,{nodeIds:d.nodeIds,x:d.x,y:d.y,onClose:()=>w(null)})]})},Ac=()=>i.jsx(Bs,{children:i.jsx(Ws,{children:i.jsx(Rc,{})})});function Dc({open:e}){var d;const t=oe(h=>h.currentLevel),n=((d=de[t])==null?void 0:d.goals)||["No goals defined for this level yet."],[o,s]=l.useState({x:16,y:16}),r=l.useRef({isDragging:!1,offset:{x:0,y:0}}),a=h=>{r.current.isDragging=!0,r.current.offset={x:h.clientX-o.x,y:h.clientY-o.y}},c=h=>{if(!r.current.isDragging)return;let f=h.clientX-r.current.offset.x,p=h.clientY-r.current.offset.y;h.shiftKey&&(f=Math.round(f/16)*16,p=Math.round(p/16)*16),s({x:f,y:p})},u=()=>{r.current.isDragging=!1};return i.jsx(Gt,{open:e,modal:!1,children:i.jsx(Kt,{children:i.jsxs(Ut,{style:{left:o.x,top:o.y,position:"fixed",margin:0},className:"z-[20000] w-72 rounded-lg border-2 border-blue-300 bg-slate-800/95 p-4 font-mono text-white shadow-lg select-none",onMouseMove:c,onMouseUp:u,onMouseLeave:u,children:[i.jsx(vt,{asChild:!0,children:i.jsxs(Bt,{children:["These are your goals for the ",t," level."]})}),i.jsx(Wt,{className:"mb-2 cursor-move text-lg font-bold",onMouseDown:a,children:"Goals"}),i.jsx("ul",{className:"list-disc space-y-2 pl-5",children:n.map(h=>i.jsx("li",{className:"text-base",children:h},h.slice(0,20)))})]})})})}const _c=()=>{var s;const e=oe(r=>r.currentLevel),t=(s=Io(e))==null?void 0:s.next,n=oe(r=>r.levelCompleteDialogOpen),o=oe(r=>r.setLevelCompleteDialogOpen);return i.jsx(Xo,{title:e,open:n,onOpenChange:o,desc:`This dialog displays the level completion dialog of the
            ${e} level. You can now get to the main menu 
            using the To Menu button or to the next level using the 
            Next Level button.`,children:i.jsxs("div",{className:"flex flex-col gap-5",children:[i.jsxs("div",{className:"flex flex-1 flex-row",children:[i.jsx("div",{className:"my-auto w-1/3 pr-4",children:i.jsx("div",{style:{aspectRatio:"1 / 1",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),i.jsxs("div",{className:"relative my-auto flex h-36 w-full flex-col items-center justify-center rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[i.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),i.jsx("p",{className:"mb-2 text-2xl font-bold",children:de[e].success}),i.jsx("p",{className:"text-lg italic",children:"Congratulations!"})]})]}),i.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[i.jsx(ke,{asChild:!0,children:i.jsx(Te,{to:"/",className:"cursor-pointer rounded-lg bg-slate-700/80 px-4 py-2 text-white hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"To Menu"})}),i.jsx(ke,{asChild:!0,children:i.jsx("button",{className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Continue Playing"})}),t&&i.jsx(ke,{asChild:!0,children:i.jsx(Te,{to:`/levels/${t}`,className:"cursor-pointer rounded-lg bg-slate-700/80 px-4 py-2 text-white hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next Level"})})]})]})})};function Oc({open:e,onOpenChange:t}){const[n,o]=l.useState(0),s=[{styling:"fixed top-1/2 left-1/2 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"Welcome to our game!",text:"This is a short tutorial to help you get started."},{styling:"fixed top-1/2 left-1/4 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"The Game Window!",text:"This is the game window which shows your character and the game world. Here you'll be able to test all the features you implemented in the node editor.",highlight:{top:0,left:0,width:window.innerWidth/2,height:window.innerHeight}},{styling:"fixed top-1/2 left-3/4 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"The Node Editor!",text:"This is the node editor where you can create and edit your game logic. Everything you create here will be executed in the game window.",highlight:{top:0,left:window.innerWidth/2,width:window.innerWidth/2,height:window.innerHeight}},{styling:"fixed top-1/2 left-1/2 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"Add Nodes!",text:"You can add nodes to the editor by right-clicking on the canvas. Each node represents a specific action or condition in your game logic.",highlight:{top:window.innerHeight*.15,left:window.innerWidth*.6,width:window.innerWidth*.3,height:window.innerHeight*.7}},{styling:"fixed top-1/2 left-1/2 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"Export Flow!",text:"Once you have created your game logic, you can export it to the game window by connecting your node tree(s) to the export node(s). This will allow you to test your logic in the game.",highlight:{top:window.innerHeight*.15,left:window.innerWidth*.6,width:window.innerWidth*.3,height:window.innerHeight*.7}},{styling:"fixed top-8 right-[6vw] min-w-[320px] z-[10000]",title:"Hints!",text:"Here you can find hints and get a full solution to the current level if you are stuck. Remember, there is also a question mark icon in the right corner of each node that provides additional information about the node's functionality.",highlight:{top:50,left:window.innerWidth-50,width:40,height:40}},{styling:"fixed top-[50px] left-3/4 min-w-[320px] z-[10000] -translate-x-1/2",title:"Reset!",text:"Be careful with this button! It will reset the whole level and all your nodes will be deleted.",highlight:{top:48,left:window.innerWidth*.5+12,width:45,height:43}},{styling:"fixed top-[150px] left-3/4 min-w-[320px] z-[10000] -translate-x-1/2",title:"Navigation!",text:"Use these buttons to navigate in between the different levels of the game. You can also use the home button to return to the main menu.",highlight:{top:10,left:window.innerWidth*.75-45,width:123,height:42}}],r=n===s.length-1,a=s[n].highlight;return i.jsx(Gt,{open:e,onOpenChange:t,children:i.jsxs(Kt,{children:[a?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pointer-events-auto fixed inset-0 z-[9998]",children:i.jsxs("svg",{className:"h-full w-full",children:[i.jsx("defs",{children:i.jsxs("mask",{id:"hole-mask",children:[i.jsx("rect",{width:"100%",height:"100%",fill:"white"}),i.jsx("rect",{x:a.left,y:a.top,width:a.width,height:a.height,rx:"8",ry:"8",fill:"black"})]})}),i.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.4)",mask:"url(#hole-mask)"})]})}),i.jsx("div",{className:"pointer-events-none fixed z-[9999] rounded-lg border-2 border-blue-400",style:{top:a.top,left:a.left,width:a.width,height:a.height}})]}):i.jsx(so,{className:"fixed inset-0 z-[9999] bg-black/40"}),i.jsxs(Ut,{onPointerDownOutside:c=>{c.preventDefault()},onEscapeKeyDown:c=>{c.preventDefault()},className:`${s[n].styling} z-[10001] max-w-2xl rounded-lg border-2 border-blue-300 bg-slate-800/85 p-8 font-mono text-white shadow-lg`,children:[i.jsx(Wt,{className:"mb-2 text-2xl font-bold",children:s[n].title}),i.jsx(vt,{asChild:!0,children:i.jsx(Bt,{children:s[n].text})}),i.jsx("div",{className:"mb-4",children:s[n].text}),r&&i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",onChange:c=>localStorage.setItem("hideTutorial",c.target.checked.toString()),id:"dontShowAgain"}),i.jsx("label",{htmlFor:"dontShowAgain",className:"select-none",children:"Don't show again"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[n+1," / ",s.length]}),i.jsxs("div",{className:"flex justify-end gap-5",children:[i.jsx("button",{onClick:()=>o(n-1),disabled:n===0,className:"rounded-lg bg-slate-700/80 px-3 py-2 focus:outline-1 focus:outline-blue-300"+(n===0?" opacity-50":" cursor-pointer hover:bg-slate-600"),children:"Back"}),r?i.jsx(ke,{className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"}):i.jsx("button",{onClick:()=>o(n+1),className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",autoFocus:n===0,children:"Next"})]})]})]})]})})}const Tc=({params:e})=>{const t=l.useRef(null),n=e.id||"calculator";if(!(n in de))throw new Error(`Level ${n} not found`);const[o,s]=l.useState(!JSON.parse(localStorage.getItem("hideTutorial")??"false")),[r,a]=l.useState(!o);return l.useEffect(()=>{if(!t.current)return;me.init(),Ps(t.current),Ii(n);const c=setInterval(()=>{dt.getState().save(),we.getState().save(),$t.getState().save(),be.getState().save()},1e3);return()=>{Es(),clearInterval(c),a(!0),me.cleanup()}},[n]),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-0 left-0 z-10 h-full w-full bg-slate-900 p-8 text-center md:hidden",children:i.jsx("div",{className:"flex h-full w-full items-center justify-center",children:i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Please use a desktop browser to play the game."})})}),i.jsx(Oc,{open:o,onOpenChange:s}),i.jsx(qo,{open:!o&&r,onOpenChange:a}),i.jsx(Dc,{open:!r}),i.jsx(_c,{}),i.jsxs(So,{direction:"horizontal",children:[i.jsx(_t,{id:"game-panel",minSize:25,order:1,children:i.jsx("canvas",{id:"game-canvas",ref:t,className:"w-1/2"})}),i.jsx(No,{className:"flex w-2 items-center justify-center bg-slate-800",children:i.jsx(hs,{width:32,height:32,className:"scale-125 text-slate-400"})}),i.jsx(_t,{id:"nodes-panel",minSize:25,order:2,children:i.jsx(Ac,{})})]})]})},Wc=Jr(Tc);export{Wc as default};
