import{w as lr}from"./with-props-DHRFOzHR.js";import{a,s as cr,o as c,t as En}from"./chunk-AYJ5UCUI-DfzbB4N7.js";import{c as Rt,u as te,a as et,b as A,d as Mt,e as Pe,P as be,f as ur,g as tt,C as dr,h as wn,i as fr,j as pr,R as mr,I as gr,k as hr,l as oe,m as Cn,n as xr,H as vr,D as yr}from"./index-CgPMLQys.js";import{L as Ye,u as br,a as Ae,c as Sn,b as In,v as Nt,d as De,e as Er,g as dt,f as wr,h as Cr,i as Sr,T as Ir,j as Xt,k as Pr,l as Rr}from"./levels-DHuIv0hZ.js";import{u as de,P as Mr,R as Pn,h as Rn,a as Mn,D as Nr,T as Dr,b as _r,c as Tr,d as Dt,e as jr,f as Fe,s as qt,g as Ar,i as Nn,j as Dn,k as _n,l as Lr,A as Or,C as kr,m as zr,n as Fr,o as $r,p as Gr,q as Hr,r as Kr,t as Ur,B as Wr}from"./node-types-CxN4mzuy.js";import{R as Br}from"./index-BMLNhK5V.js";const nt=a.createContext(null);nt.displayName="PanelGroupContext";const B={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},_t=10,xe=a.useLayoutEffect,Zt=cr.useId,Vr=typeof Zt=="function"?Zt:()=>null;let Yr=0;function Tt(e=null){const t=Vr(),n=a.useRef(e||t||null);return n.current===null&&(n.current=""+Yr++),e??n.current}function Tn({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:r,forwardedRef:s,id:l,maxSize:i,minSize:u,onCollapse:g,onExpand:p,onResize:d,order:m,style:x,tagName:E="div",...v}){const y=a.useContext(nt);if(y===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:f,expandPanel:h,getPanelSize:w,getPanelStyle:b,groupId:R,isPanelCollapsed:P,reevaluatePanelConstraints:C,registerPanel:O,resizePanel:H,unregisterPanel:z}=y,K=Tt(l),F=a.useRef({callbacks:{onCollapse:g,onExpand:p,onResize:d},constraints:{collapsedSize:n,collapsible:o,defaultSize:r,maxSize:i,minSize:u},id:K,idIsFromProps:l!==void 0,order:m});a.useRef({didLogMissingDefaultSizeWarning:!1}),xe(()=>{const{callbacks:$,constraints:k}=F.current,G={...k};F.current.id=K,F.current.idIsFromProps=l!==void 0,F.current.order=m,$.onCollapse=g,$.onExpand=p,$.onResize=d,k.collapsedSize=n,k.collapsible=o,k.defaultSize=r,k.maxSize=i,k.minSize=u,(G.collapsedSize!==k.collapsedSize||G.collapsible!==k.collapsible||G.maxSize!==k.maxSize||G.minSize!==k.minSize)&&C(F.current,G)}),xe(()=>{const $=F.current;return O($),()=>{z($)}},[m,K,O,z]),a.useImperativeHandle(s,()=>({collapse:()=>{f(F.current)},expand:$=>{h(F.current,$)},getId(){return K},getSize(){return w(F.current)},isCollapsed(){return P(F.current)},isExpanded(){return!P(F.current)},resize:$=>{H(F.current,$)}}),[f,h,w,P,K,H]);const X=b(F.current,r);return a.createElement(E,{...v,children:e,className:t,id:K,style:{...X,...x},[B.groupId]:R,[B.panel]:"",[B.panelCollapsible]:o||void 0,[B.panelId]:K,[B.panelSize]:parseFloat(""+X.flexGrow).toFixed(1)})}const wt=a.forwardRef((e,t)=>a.createElement(Tn,{...e,forwardedRef:t}));Tn.displayName="Panel";wt.displayName="forwardRef(Panel)";let Ct=null,Be=-1,me=null;function Xr(e,t){if(t){const n=(t&kn)!==0,o=(t&zn)!==0,r=(t&Fn)!==0,s=(t&$n)!==0;if(n)return r?"se-resize":s?"ne-resize":"e-resize";if(o)return r?"sw-resize":s?"nw-resize":"w-resize";if(r)return"s-resize";if(s)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function qr(){me!==null&&(document.head.removeChild(me),Ct=null,me=null,Be=-1)}function ft(e,t){var n,o;const r=Xr(e,t);if(Ct!==r){if(Ct=r,me===null&&(me=document.createElement("style"),document.head.appendChild(me)),Be>=0){var s;(s=me.sheet)===null||s===void 0||s.removeRule(Be)}Be=(n=(o=me.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${r} !important;}`))!==null&&n!==void 0?n:-1}}function jn(e){return e.type==="keydown"}function An(e){return e.type.startsWith("pointer")}function Ln(e){return e.type.startsWith("mouse")}function ot(e){if(An(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Ln(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Zr(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function Jr(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function Qr(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:en(e),b:en(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;j(o,"Stacking order can only be calculated for elements with a common ancestor");const r={a:Qt(Jt(n.a)),b:Qt(Jt(n.b))};if(r.a===r.b){const s=o.childNodes,l={a:n.a.at(-1),b:n.b.at(-1)};let i=s.length;for(;i--;){const u=s[i];if(u===l.a)return 1;if(u===l.b)return-1}}return Math.sign(r.a-r.b)}const es=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ts(e){var t;const n=getComputedStyle((t=On(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function ns(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||ts(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||es.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Jt(e){let t=e.length;for(;t--;){const n=e[t];if(j(n,"Missing node"),ns(n))return n}return null}function Qt(e){return e&&Number(getComputedStyle(e).zIndex)||0}function en(e){const t=[];for(;e;)t.push(e),e=On(e);return t}function On(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const kn=1,zn=2,Fn=4,$n=8,os=Zr()==="coarse";let se=[],Re=!1,he=new Map,rt=new Map;const Le=new Set;function rs(e,t,n,o,r){var s;const{ownerDocument:l}=t,i={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:r},u=(s=he.get(l))!==null&&s!==void 0?s:0;return he.set(l,u+1),Le.add(i),Xe(),function(){var p;rt.delete(e),Le.delete(i);const d=(p=he.get(l))!==null&&p!==void 0?p:1;if(he.set(l,d-1),Xe(),d===1&&he.delete(l),se.includes(i)){const m=se.indexOf(i);m>=0&&se.splice(m,1),At(),r("up",!0,null)}}}function ss(e){const{target:t}=e,{x:n,y:o}=ot(e);Re=!0,jt({target:t,x:n,y:o}),Xe(),se.length>0&&(qe("down",e),e.preventDefault(),Gn(t)||e.stopImmediatePropagation())}function pt(e){const{x:t,y:n}=ot(e);if(Re&&e.buttons===0&&(Re=!1,qe("up",e)),!Re){const{target:o}=e;jt({target:o,x:t,y:n})}qe("move",e),At(),se.length>0&&e.preventDefault()}function mt(e){const{target:t}=e,{x:n,y:o}=ot(e);rt.clear(),Re=!1,se.length>0&&(e.preventDefault(),Gn(t)||e.stopImmediatePropagation()),qe("up",e),jt({target:t,x:n,y:o}),At(),Xe()}function Gn(e){let t=e;for(;t;){if(t.hasAttribute(B.resizeHandle))return!0;t=t.parentElement}return!1}function jt({target:e,x:t,y:n}){se.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),Le.forEach(r=>{const{element:s,hitAreaMargins:l}=r,i=s.getBoundingClientRect(),{bottom:u,left:g,right:p,top:d}=i,m=os?l.coarse:l.fine;if(t>=g-m&&t<=p+m&&n>=d-m&&n<=u+m){if(o!==null&&document.contains(o)&&s!==o&&!s.contains(o)&&!o.contains(s)&&Qr(o,s)>0){let E=o,v=!1;for(;E&&!E.contains(s);){if(Jr(E.getBoundingClientRect(),i)){v=!0;break}E=E.parentElement}if(v)return}se.push(r)}})}function gt(e,t){rt.set(e,t)}function At(){let e=!1,t=!1;se.forEach(o=>{const{direction:r}=o;r==="horizontal"?e=!0:t=!0});let n=0;rt.forEach(o=>{n|=o}),e&&t?ft("intersection",n):e?ft("horizontal",n):t?ft("vertical",n):qr()}let ht=new AbortController;function Xe(){ht.abort(),ht=new AbortController;const e={capture:!0,signal:ht.signal};Le.size&&(Re?(se.length>0&&he.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",mt,e),o.addEventListener("pointerleave",pt,e),o.addEventListener("pointermove",pt,e))}),window.addEventListener("pointerup",mt,e),window.addEventListener("pointercancel",mt,e)):he.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",ss,e),o.addEventListener("pointermove",pt,e))}))}function qe(e,t){Le.forEach(n=>{const{setResizeHandlerState:o}=n,r=se.includes(n);o(e,r,t)})}function as(){const[e,t]=a.useState(0);return a.useCallback(()=>t(n=>n+1),[])}function j(e,t){if(!e)throw console.error(t),Error(t)}function ve(e,t,n=_t){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function ue(e,t,n=_t){return ve(e,t,n)===0}function ee(e,t,n){return ve(e,t,n)===0}function is(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const r=e[o],s=t[o];if(!ee(r,s,n))return!1}return!0}function Ie({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];j(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:r=0,collapsible:s,maxSize:l=100,minSize:i=0}=o;if(ve(n,i)<0)if(s){const u=(r+i)/2;ve(n,u)<0?n=r:n=i}else n=i;return n=Math.min(l,n),n=parseFloat(n.toFixed(_t)),n}function _e({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:r,trigger:s}){if(ee(e,0))return t;const l=[...t],[i,u]=o;j(i!=null,"Invalid first pivot index"),j(u!=null,"Invalid second pivot index");let g=0;if(s==="keyboard"){{const d=e<0?u:i,m=n[d];j(m,`Panel constraints not found for index ${d}`);const{collapsedSize:x=0,collapsible:E,minSize:v=0}=m;if(E){const y=t[d];if(j(y!=null,`Previous layout not found for panel index ${d}`),ee(y,x)){const f=v-y;ve(f,Math.abs(e))>0&&(e=e<0?0-f:f)}}}{const d=e<0?i:u,m=n[d];j(m,`No panel constraints found for index ${d}`);const{collapsedSize:x=0,collapsible:E,minSize:v=0}=m;if(E){const y=t[d];if(j(y!=null,`Previous layout not found for panel index ${d}`),ee(y,v)){const f=y-x;ve(f,Math.abs(e))>0&&(e=e<0?0-f:f)}}}}{const d=e<0?1:-1;let m=e<0?u:i,x=0;for(;;){const v=t[m];j(v!=null,`Previous layout not found for panel index ${m}`);const f=Ie({panelConstraints:n,panelIndex:m,size:100})-v;if(x+=f,m+=d,m<0||m>=n.length)break}const E=Math.min(Math.abs(e),Math.abs(x));e=e<0?0-E:E}{let m=e<0?i:u;for(;m>=0&&m<n.length;){const x=Math.abs(e)-Math.abs(g),E=t[m];j(E!=null,`Previous layout not found for panel index ${m}`);const v=E-x,y=Ie({panelConstraints:n,panelIndex:m,size:v});if(!ee(E,y)&&(g+=E-y,l[m]=y,g.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?m--:m++}}if(is(r,l))return r;{const d=e<0?u:i,m=t[d];j(m!=null,`Previous layout not found for panel index ${d}`);const x=m+g,E=Ie({panelConstraints:n,panelIndex:d,size:x});if(l[d]=E,!ee(E,x)){let v=x-E,f=e<0?u:i;for(;f>=0&&f<n.length;){const h=l[f];j(h!=null,`Previous layout not found for panel index ${f}`);const w=h+v,b=Ie({panelConstraints:n,panelIndex:f,size:w});if(ee(h,b)||(v-=b-h,l[f]=b),ee(v,0))break;e>0?f--:f++}}}const p=l.reduce((d,m)=>m+d,0);return ee(p,100)?l:r}function ls({layout:e,panelsArray:t,pivotIndices:n}){let o=0,r=100,s=0,l=0;const i=n[0];j(i!=null,"No pivot index found"),t.forEach((d,m)=>{const{constraints:x}=d,{maxSize:E=100,minSize:v=0}=x;m===i?(o=v,r=E):(s+=v,l+=E)});const u=Math.min(r,100-s),g=Math.max(o,100-l),p=e[i];return{valueMax:u,valueMin:g,valueNow:p}}function Oe(e,t=document){return Array.from(t.querySelectorAll(`[${B.resizeHandleId}][data-panel-group-id="${e}"]`))}function Hn(e,t,n=document){const r=Oe(e,n).findIndex(s=>s.getAttribute(B.resizeHandleId)===t);return r??null}function Kn(e,t,n){const o=Hn(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function Un(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function st(e,t=document){const n=t.querySelector(`[${B.resizeHandleId}="${e}"]`);return n||null}function cs(e,t,n,o=document){var r,s,l,i;const u=st(t,o),g=Oe(e,o),p=u?g.indexOf(u):-1,d=(r=(s=n[p])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,m=(l=(i=n[p+1])===null||i===void 0?void 0:i.id)!==null&&l!==void 0?l:null;return[d,m]}function us({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:r,panelGroupElement:s,setLayout:l}){a.useRef({didWarnAboutMissingResizeHandle:!1}),xe(()=>{if(!s)return;const i=Oe(n,s);for(let u=0;u<r.length-1;u++){const{valueMax:g,valueMin:p,valueNow:d}=ls({layout:o,panelsArray:r,pivotIndices:[u,u+1]}),m=i[u];if(m!=null){const x=r[u];j(x,`No panel data found for index "${u}"`),m.setAttribute("aria-controls",x.id),m.setAttribute("aria-valuemax",""+Math.round(g)),m.setAttribute("aria-valuemin",""+Math.round(p)),m.setAttribute("aria-valuenow",d!=null?""+Math.round(d):"")}}return()=>{i.forEach((u,g)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,o,r,s]),a.useEffect(()=>{if(!s)return;const i=t.current;j(i,"Eager values not found");const{panelDataArray:u}=i,g=Un(n,s);j(g!=null,`No group found for id "${n}"`);const p=Oe(n,s);j(p,`No resize handles found for group id "${n}"`);const d=p.map(m=>{const x=m.getAttribute(B.resizeHandleId);j(x,"Resize handle element has no handle id attribute");const[E,v]=cs(n,x,u,s);if(E==null||v==null)return()=>{};const y=f=>{if(!f.defaultPrevented)switch(f.key){case"Enter":{f.preventDefault();const h=u.findIndex(w=>w.id===E);if(h>=0){const w=u[h];j(w,`No panel data found for index ${h}`);const b=o[h],{collapsedSize:R=0,collapsible:P,minSize:C=0}=w.constraints;if(b!=null&&P){const O=_e({delta:ee(b,R)?C-R:R-b,initialLayout:o,panelConstraints:u.map(H=>H.constraints),pivotIndices:Kn(n,x,s),prevLayout:o,trigger:"keyboard"});o!==O&&l(O)}}break}}};return m.addEventListener("keydown",y),()=>{m.removeEventListener("keydown",y)}});return()=>{d.forEach(m=>m())}},[s,e,t,n,o,r,l])}function tn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Wn(e,t){const n=e==="horizontal",{x:o,y:r}=ot(t);return n?o:r}function ds(e,t,n,o,r){const s=n==="horizontal",l=st(t,r);j(l,`No resize handle element found for id "${t}"`);const i=l.getAttribute(B.groupId);j(i,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=o;const g=Wn(n,e),p=Un(i,r);j(p,`No group element found for id "${i}"`);const d=p.getBoundingClientRect(),m=s?d.width:d.height;return(g-u)/m*100}function fs(e,t,n,o,r,s){if(jn(e)){const l=n==="horizontal";let i=0;e.shiftKey?i=100:r!=null?i=r:i=10;let u=0;switch(e.key){case"ArrowDown":u=l?0:i;break;case"ArrowLeft":u=l?-i:0;break;case"ArrowRight":u=l?i:0;break;case"ArrowUp":u=l?0:-i;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return o==null?0:ds(e,t,n,o,s)}function ps({panelDataArray:e}){const t=Array(e.length),n=e.map(s=>s.constraints);let o=0,r=100;for(let s=0;s<e.length;s++){const l=n[s];j(l,`Panel constraints not found for index ${s}`);const{defaultSize:i}=l;i!=null&&(o++,t[s]=i,r-=i)}for(let s=0;s<e.length;s++){const l=n[s];j(l,`Panel constraints not found for index ${s}`);const{defaultSize:i}=l;if(i!=null)continue;const u=e.length-o,g=r/u;o++,t[s]=g,r-=g}return t}function Ce(e,t,n){t.forEach((o,r)=>{const s=e[r];j(s,`Panel data not found for index ${r}`);const{callbacks:l,constraints:i,id:u}=s,{collapsedSize:g=0,collapsible:p}=i,d=n[u];if(d==null||o!==d){n[u]=o;const{onCollapse:m,onExpand:x,onResize:E}=l;E&&E(o,d),p&&(m||x)&&(x&&(d==null||ue(d,g))&&!ue(o,g)&&x(),m&&(d==null||!ue(d,g))&&ue(o,g)&&m())}})}function We(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function ms({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:r,precision:s=3}){const l=n[r];let i;return l==null?i=e!=null?e.toPrecision(s):"1":o.length===1?i="1":i=l.toPrecision(s),{flexBasis:0,flexGrow:i,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function gs(e,t=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}function nn(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Bn(e){return`react-resizable-panels:${e}`}function Vn(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:r,order:s}=t;return r?o:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function Yn(e,t){try{const n=Bn(e),o=t.getItem(n);if(o){const r=JSON.parse(o);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function hs(e,t,n){var o,r;const s=(o=Yn(e,n))!==null&&o!==void 0?o:{},l=Vn(t);return(r=s[l])!==null&&r!==void 0?r:null}function xs(e,t,n,o,r){var s;const l=Bn(e),i=Vn(t),u=(s=Yn(e,r))!==null&&s!==void 0?s:{};u[i]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{r.setItem(l,JSON.stringify(u))}catch(g){console.error(g)}}function on({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((s,l)=>s+l,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!ee(o,100)&&n.length>0)for(let s=0;s<t.length;s++){const l=n[s];j(l!=null,`No layout data found for index ${s}`);const i=100/o*l;n[s]=i}let r=0;for(let s=0;s<t.length;s++){const l=n[s];j(l!=null,`No layout data found for index ${s}`);const i=Ie({panelConstraints:t,panelIndex:s,size:l});l!=i&&(r+=l-i,n[s]=i)}if(!ee(r,0))for(let s=0;s<t.length;s++){const l=n[s];j(l!=null,`No layout data found for index ${s}`);const i=l+r,u=Ie({panelConstraints:t,panelIndex:s,size:i});if(l!==u&&(r-=u-l,n[s]=u,ee(r,0)))break}return n}const vs=100,Te={getItem:e=>(nn(Te),Te.getItem(e)),setItem:(e,t)=>{nn(Te),Te.setItem(e,t)}},rn={};function Xn({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:r,id:s=null,onLayout:l=null,keyboardResizeBy:i=null,storage:u=Te,style:g,tagName:p="div",...d}){const m=Tt(s),x=a.useRef(null),[E,v]=a.useState(null),[y,f]=a.useState([]),h=as(),w=a.useRef({}),b=a.useRef(new Map),R=a.useRef(0),P=a.useRef({autoSaveId:e,direction:o,dragState:E,id:m,keyboardResizeBy:i,onLayout:l,storage:u}),C=a.useRef({layout:y,panelDataArray:[],panelDataArrayChanged:!1});a.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),a.useImperativeHandle(r,()=>({getId:()=>P.current.id,getLayout:()=>{const{layout:S}=C.current;return S},setLayout:S=>{const{onLayout:N}=P.current,{layout:T,panelDataArray:M}=C.current,I=on({layout:S,panelConstraints:M.map(_=>_.constraints)});tn(T,I)||(f(I),C.current.layout=I,N&&N(I),Ce(M,I,w.current))}}),[]),xe(()=>{P.current.autoSaveId=e,P.current.direction=o,P.current.dragState=E,P.current.id=m,P.current.onLayout=l,P.current.storage=u}),us({committedValuesRef:P,eagerValuesRef:C,groupId:m,layout:y,panelDataArray:C.current.panelDataArray,setLayout:f,panelGroupElement:x.current}),a.useEffect(()=>{const{panelDataArray:S}=C.current;if(e){if(y.length===0||y.length!==S.length)return;let N=rn[e];N==null&&(N=gs(xs,vs),rn[e]=N);const T=[...S],M=new Map(b.current);N(e,T,M,y,u)}},[e,y,u]),a.useEffect(()=>{});const O=a.useCallback(S=>{const{onLayout:N}=P.current,{layout:T,panelDataArray:M}=C.current;if(S.constraints.collapsible){const I=M.map(ie=>ie.constraints),{collapsedSize:_=0,panelSize:L,pivotIndices:U}=ge(M,S,T);if(j(L!=null,`Panel size not found for panel "${S.id}"`),!ue(L,_)){b.current.set(S.id,L);const le=Se(M,S)===M.length-1?L-_:_-L,W=_e({delta:le,initialLayout:T,panelConstraints:I,pivotIndices:U,prevLayout:T,trigger:"imperative-api"});We(T,W)||(f(W),C.current.layout=W,N&&N(W),Ce(M,W,w.current))}}},[]),H=a.useCallback((S,N)=>{const{onLayout:T}=P.current,{layout:M,panelDataArray:I}=C.current;if(S.constraints.collapsible){const _=I.map(re=>re.constraints),{collapsedSize:L=0,panelSize:U=0,minSize:ie=0,pivotIndices:le}=ge(I,S,M),W=N??ie;if(ue(U,L)){const re=b.current.get(S.id),Me=re!=null&&re>=W?re:W,ut=Se(I,S)===I.length-1?U-Me:Me-U,Q=_e({delta:ut,initialLayout:M,panelConstraints:_,pivotIndices:le,prevLayout:M,trigger:"imperative-api"});We(M,Q)||(f(Q),C.current.layout=Q,T&&T(Q),Ce(I,Q,w.current))}}},[]),z=a.useCallback(S=>{const{layout:N,panelDataArray:T}=C.current,{panelSize:M}=ge(T,S,N);return j(M!=null,`Panel size not found for panel "${S.id}"`),M},[]),K=a.useCallback((S,N)=>{const{panelDataArray:T}=C.current,M=Se(T,S);return ms({defaultSize:N,dragState:E,layout:y,panelData:T,panelIndex:M})},[E,y]),F=a.useCallback(S=>{const{layout:N,panelDataArray:T}=C.current,{collapsedSize:M=0,collapsible:I,panelSize:_}=ge(T,S,N);return j(_!=null,`Panel size not found for panel "${S.id}"`),I===!0&&ue(_,M)},[]),X=a.useCallback(S=>{const{layout:N,panelDataArray:T}=C.current,{collapsedSize:M=0,collapsible:I,panelSize:_}=ge(T,S,N);return j(_!=null,`Panel size not found for panel "${S.id}"`),!I||ve(_,M)>0},[]),$=a.useCallback(S=>{const{panelDataArray:N}=C.current;N.push(S),N.sort((T,M)=>{const I=T.order,_=M.order;return I==null&&_==null?0:I==null?-1:_==null?1:I-_}),C.current.panelDataArrayChanged=!0,h()},[h]);xe(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;const{autoSaveId:S,onLayout:N,storage:T}=P.current,{layout:M,panelDataArray:I}=C.current;let _=null;if(S){const U=hs(S,I,T);U&&(b.current=new Map(Object.entries(U.expandToSizes)),_=U.layout)}_==null&&(_=ps({panelDataArray:I}));const L=on({layout:_,panelConstraints:I.map(U=>U.constraints)});tn(M,L)||(f(L),C.current.layout=L,N&&N(L),Ce(I,L,w.current))}}),xe(()=>{const S=C.current;return()=>{S.layout=[]}},[]);const k=a.useCallback(S=>{let N=!1;const T=x.current;return T&&window.getComputedStyle(T,null).getPropertyValue("direction")==="rtl"&&(N=!0),function(I){I.preventDefault();const _=x.current;if(!_)return()=>null;const{direction:L,dragState:U,id:ie,keyboardResizeBy:le,onLayout:W}=P.current,{layout:re,panelDataArray:Me}=C.current,{initialLayout:Ue}=U??{},ut=Kn(ie,S,_);let Q=fs(I,S,L,U,le,_);const Vt=L==="horizontal";Vt&&N&&(Q=-Q);const ar=Me.map(ir=>ir.constraints),Ne=_e({delta:Q,initialLayout:Ue??re,panelConstraints:ar,pivotIndices:ut,prevLayout:re,trigger:jn(I)?"keyboard":"mouse-or-touch"}),Yt=!We(re,Ne);(An(I)||Ln(I))&&R.current!=Q&&(R.current=Q,!Yt&&Q!==0?Vt?gt(S,Q<0?kn:zn):gt(S,Q<0?Fn:$n):gt(S,0)),Yt&&(f(Ne),C.current.layout=Ne,W&&W(Ne),Ce(Me,Ne,w.current))}},[]),G=a.useCallback((S,N)=>{const{onLayout:T}=P.current,{layout:M,panelDataArray:I}=C.current,_=I.map(re=>re.constraints),{panelSize:L,pivotIndices:U}=ge(I,S,M);j(L!=null,`Panel size not found for panel "${S.id}"`);const le=Se(I,S)===I.length-1?L-N:N-L,W=_e({delta:le,initialLayout:M,panelConstraints:_,pivotIndices:U,prevLayout:M,trigger:"imperative-api"});We(M,W)||(f(W),C.current.layout=W,T&&T(W),Ce(I,W,w.current))},[]),ce=a.useCallback((S,N)=>{const{layout:T,panelDataArray:M}=C.current,{collapsedSize:I=0,collapsible:_}=N,{collapsedSize:L=0,collapsible:U,maxSize:ie=100,minSize:le=0}=S.constraints,{panelSize:W}=ge(M,S,T);W!=null&&(_&&U&&ue(W,I)?ue(I,L)||G(S,L):W<le?G(S,le):W>ie&&G(S,ie))},[G]),Z=a.useCallback((S,N)=>{const{direction:T}=P.current,{layout:M}=C.current;if(!x.current)return;const I=st(S,x.current);j(I,`Drag handle element not found for id "${S}"`);const _=Wn(T,N);v({dragHandleId:S,dragHandleRect:I.getBoundingClientRect(),initialCursorPosition:_,initialLayout:M})},[]),D=a.useCallback(()=>{v(null)},[]),V=a.useCallback(S=>{const{panelDataArray:N}=C.current,T=Se(N,S);T>=0&&(N.splice(T,1),delete w.current[S.id],C.current.panelDataArrayChanged=!0,h())},[h]),Y=a.useMemo(()=>({collapsePanel:O,direction:o,dragState:E,expandPanel:H,getPanelSize:z,getPanelStyle:K,groupId:m,isPanelCollapsed:F,isPanelExpanded:X,reevaluatePanelConstraints:ce,registerPanel:$,registerResizeHandle:k,resizePanel:G,startDragging:Z,stopDragging:D,unregisterPanel:V,panelGroupElement:x.current}),[O,E,o,H,z,K,m,F,X,ce,$,k,G,Z,D,V]),J={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return a.createElement(nt.Provider,{value:Y},a.createElement(p,{...d,children:t,className:n,id:s,ref:x,style:{...J,...g},[B.group]:"",[B.groupDirection]:o,[B.groupId]:m}))}const qn=a.forwardRef((e,t)=>a.createElement(Xn,{...e,forwardedRef:t}));Xn.displayName="PanelGroup";qn.displayName="forwardRef(PanelGroup)";function Se(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function ge(e,t,n){const o=Se(e,t),s=o===e.length-1?[o-1,o]:[o,o+1],l=n[o];return{...t.constraints,panelSize:l,pivotIndices:s}}function ys({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){a.useEffect(()=>{if(e||n==null||o==null)return;const r=st(t,o);if(r==null)return;const s=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),n(l);break}case"F6":{l.preventDefault();const i=r.getAttribute(B.groupId);j(i,`No group element found for id "${i}"`);const u=Oe(i,o),g=Hn(i,t,o);j(g!==null,`No resize element found for id "${t}"`);const p=l.shiftKey?g>0?g-1:u.length-1:g+1<u.length?g+1:0;u[p].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[o,e,t,n])}function Zn({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:r,onBlur:s,onClick:l,onDragging:i,onFocus:u,onPointerDown:g,onPointerUp:p,style:d={},tabIndex:m=0,tagName:x="div",...E}){var v,y;const f=a.useRef(null),h=a.useRef({onClick:l,onDragging:i,onPointerDown:g,onPointerUp:p});a.useEffect(()=>{h.current.onClick=l,h.current.onDragging=i,h.current.onPointerDown=g,h.current.onPointerUp=p});const w=a.useContext(nt);if(w===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:b,groupId:R,registerResizeHandle:P,startDragging:C,stopDragging:O,panelGroupElement:H}=w,z=Tt(r),[K,F]=a.useState("inactive"),[X,$]=a.useState(!1),[k,G]=a.useState(null),ce=a.useRef({state:K});xe(()=>{ce.current.state=K}),a.useEffect(()=>{if(n)G(null);else{const Y=P(z);G(()=>Y)}},[n,z,P]);const Z=(v=o==null?void 0:o.coarse)!==null&&v!==void 0?v:15,D=(y=o==null?void 0:o.fine)!==null&&y!==void 0?y:5;a.useEffect(()=>{if(n||k==null)return;const Y=f.current;j(Y,"Element ref not attached");let J=!1;return rs(z,Y,b,{coarse:Z,fine:D},(N,T,M)=>{if(!T){F("inactive");return}switch(N){case"down":{F("drag"),J=!1,j(M,'Expected event to be defined for "down" action'),C(z,M);const{onDragging:I,onPointerDown:_}=h.current;I==null||I(!0),_==null||_();break}case"move":{const{state:I}=ce.current;J=!0,I!=="drag"&&F("hover"),j(M,'Expected event to be defined for "move" action'),k(M);break}case"up":{F("hover"),O();const{onClick:I,onDragging:_,onPointerUp:L}=h.current;_==null||_(!1),L==null||L(),J||I==null||I();break}}})},[Z,b,n,D,P,z,k,C,O]),ys({disabled:n,handleId:z,resizeHandler:k,panelGroupElement:H});const V={touchAction:"none",userSelect:"none"};return a.createElement(x,{...E,children:e,className:t,id:r,onBlur:()=>{$(!1),s==null||s()},onFocus:()=>{$(!0),u==null||u()},ref:f,role:"separator",style:{...V,...d},tabIndex:m,[B.groupDirection]:b,[B.groupId]:R,[B.resizeHandle]:"",[B.resizeHandleActive]:K==="drag"?"pointer":X?"keyboard":void 0,[B.resizeHandleEnabled]:!n,[B.resizeHandleId]:z,[B.resizeHandleState]:K})}Zn.displayName="PanelResizeHandle";const bs=e=>{if(!(e in Ye))throw new Error(`Level ${e} not found`);const t=Ye[e];br.setState(()=>({gameObjects:new Map(t.modifiableGameObjects.map(o=>[o.id,new Map(o.connections.map(r=>[r.label,{access:r.access,value:0}]))]))})),t.initialState()};var Es=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ws=Es.reduce((e,t)=>{const n=Rt(`Primitive.${t}`),o=a.forwardRef((r,s)=>{const{asChild:l,...i}=r,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(u,{...i,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),xt="focusScope.autoFocusOnMount",vt="focusScope.autoFocusOnUnmount",sn={bubbles:!1,cancelable:!0},Cs="FocusScope",Jn=a.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...l}=e,[i,u]=a.useState(null),g=de(r),p=de(s),d=a.useRef(null),m=te(t,v=>u(v)),x=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(o){let v=function(w){if(x.paused||!i)return;const b=w.target;i.contains(b)?d.current=b:fe(d.current,{select:!0})},y=function(w){if(x.paused||!i)return;const b=w.relatedTarget;b!==null&&(i.contains(b)||fe(d.current,{select:!0}))},f=function(w){if(document.activeElement===document.body)for(const R of w)R.removedNodes.length>0&&fe(i)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const h=new MutationObserver(f);return i&&h.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),h.disconnect()}}},[o,i,x.paused]),a.useEffect(()=>{if(i){ln.add(x);const v=document.activeElement;if(!i.contains(v)){const f=new CustomEvent(xt,sn);i.addEventListener(xt,g),i.dispatchEvent(f),f.defaultPrevented||(Ss(Ns(Qn(i)),{select:!0}),document.activeElement===v&&fe(i))}return()=>{i.removeEventListener(xt,g),setTimeout(()=>{const f=new CustomEvent(vt,sn);i.addEventListener(vt,p),i.dispatchEvent(f),f.defaultPrevented||fe(v??document.body,{select:!0}),i.removeEventListener(vt,p),ln.remove(x)},0)}}},[i,g,p,x]);const E=a.useCallback(v=>{if(!n&&!o||x.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,f=document.activeElement;if(y&&f){const h=v.currentTarget,[w,b]=Is(h);w&&b?!v.shiftKey&&f===b?(v.preventDefault(),n&&fe(w,{select:!0})):v.shiftKey&&f===w&&(v.preventDefault(),n&&fe(b,{select:!0})):f===h&&v.preventDefault()}},[n,o,x.paused]);return c.jsx(ws.div,{tabIndex:-1,...l,ref:m,onKeyDown:E})});Jn.displayName=Cs;function Ss(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(fe(o,{select:t}),document.activeElement!==n)return}function Is(e){const t=Qn(e),n=an(t,e),o=an(t.reverse(),e);return[n,o]}function Qn(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function an(e,t){for(const n of e)if(!Ps(n,{upTo:t}))return n}function Ps(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Rs(e){return e instanceof HTMLInputElement&&"select"in e}function fe(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Rs(e)&&t&&e.select()}}var ln=Ms();function Ms(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=cn(e,t),e.unshift(t)},remove(t){var n;e=cn(e,t),(n=e[0])==null||n.resume()}}}function cn(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function Ns(e){return e.filter(t=>t.tagName!=="A")}var Ds=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],$e=Ds.reduce((e,t)=>{const n=Rt(`Primitive.${t}`),o=a.forwardRef((r,s)=>{const{asChild:l,...i}=r,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(u,{...i,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),at="Dialog",[eo,ul]=et(at),[_s,ae]=eo(at),to=e=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:r,onOpenChange:s,modal:l=!0}=e,i=a.useRef(null),u=a.useRef(null),[g,p]=Mt({prop:o,defaultProp:r??!1,onChange:s,caller:at});return c.jsx(_s,{scope:t,triggerRef:i,contentRef:u,contentId:Pe(),titleId:Pe(),descriptionId:Pe(),open:g,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(d=>!d),[p]),modal:l,children:n})};to.displayName=at;var no="DialogTrigger",oo=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(no,n),s=te(t,r.triggerRef);return c.jsx($e.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":zt(r.open),...o,ref:s,onClick:A(e.onClick,r.onOpenToggle)})});oo.displayName=no;var Lt="DialogPortal",[Ts,ro]=eo(Lt,{forceMount:void 0}),so=e=>{const{__scopeDialog:t,forceMount:n,children:o,container:r}=e,s=ae(Lt,t);return c.jsx(Ts,{scope:t,forceMount:n,children:a.Children.map(o,l=>c.jsx(be,{present:n||s.open,children:c.jsx(Mr,{asChild:!0,container:r,children:l})}))})};so.displayName=Lt;var Ze="DialogOverlay",ao=a.forwardRef((e,t)=>{const n=ro(Ze,e.__scopeDialog),{forceMount:o=n.forceMount,...r}=e,s=ae(Ze,e.__scopeDialog);return s.modal?c.jsx(be,{present:o||s.open,children:c.jsx(As,{...r,ref:t})}):null});ao.displayName=Ze;var js=Rt("DialogOverlay.RemoveScroll"),As=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(Ze,n);return c.jsx(Pn,{as:js,allowPinchZoom:!0,shards:[r.contentRef],children:c.jsx($e.div,{"data-state":zt(r.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),ye="DialogContent",io=a.forwardRef((e,t)=>{const n=ro(ye,e.__scopeDialog),{forceMount:o=n.forceMount,...r}=e,s=ae(ye,e.__scopeDialog);return c.jsx(be,{present:o||s.open,children:s.modal?c.jsx(Ls,{...r,ref:t}):c.jsx(Os,{...r,ref:t})})});io.displayName=ye;var Ls=a.forwardRef((e,t)=>{const n=ae(ye,e.__scopeDialog),o=a.useRef(null),r=te(t,n.contentRef,o);return a.useEffect(()=>{const s=o.current;if(s)return Rn(s)},[]),c.jsx(lo,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:A(e.onCloseAutoFocus,s=>{var l;s.preventDefault(),(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:A(e.onPointerDownOutside,s=>{const l=s.detail.originalEvent,i=l.button===0&&l.ctrlKey===!0;(l.button===2||i)&&s.preventDefault()}),onFocusOutside:A(e.onFocusOutside,s=>s.preventDefault())})}),Os=a.forwardRef((e,t)=>{const n=ae(ye,e.__scopeDialog),o=a.useRef(!1),r=a.useRef(!1);return c.jsx(lo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l,i;(l=e.onCloseAutoFocus)==null||l.call(e,s),s.defaultPrevented||(o.current||(i=n.triggerRef.current)==null||i.focus(),s.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:s=>{var u,g;(u=e.onInteractOutside)==null||u.call(e,s),s.defaultPrevented||(o.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=s.target;((g=n.triggerRef.current)==null?void 0:g.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),lo=a.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:s,...l}=e,i=ae(ye,n),u=a.useRef(null),g=te(t,u);return Mn(),c.jsxs(c.Fragment,{children:[c.jsx(Jn,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:s,children:c.jsx(Nr,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":zt(i.open),...l,ref:g,onDismiss:()=>i.onOpenChange(!1)})}),c.jsxs(c.Fragment,{children:[c.jsx(ks,{titleId:i.titleId}),c.jsx(Fs,{contentRef:u,descriptionId:i.descriptionId})]})]})}),Ot="DialogTitle",co=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(Ot,n);return c.jsx($e.h2,{id:r.titleId,...o,ref:t})});co.displayName=Ot;var uo="DialogDescription",fo=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(uo,n);return c.jsx($e.p,{id:r.descriptionId,...o,ref:t})});fo.displayName=uo;var po="DialogClose",kt=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(po,n);return c.jsx($e.button,{type:"button",...o,ref:t,onClick:A(e.onClick,()=>r.onOpenChange(!1))})});kt.displayName=po;function zt(e){return e?"open":"closed"}var mo="DialogTitleWarning",[dl,go]=ur(mo,{contentName:ye,titleName:Ot,docsSlug:"dialog"}),ks=({titleId:e})=>{const t=go(mo),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},zs="DialogDescriptionWarning",Fs=({contentRef:e,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${go(zs).contentName}}.`;return a.useEffect(()=>{var s;const r=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null};function $s(e){const t=Gs(e),n=a.forwardRef((o,r)=>{const{children:s,...l}=o,i=a.Children.toArray(s),u=i.find(Ks);if(u){const g=u.props.children,p=i.map(d=>d===u?a.Children.count(g)>1?a.Children.only(null):a.isValidElement(g)?g.props.children:null:d);return c.jsx(t,{...l,ref:r,children:a.isValidElement(g)?a.cloneElement(g,void 0,p):null})}return c.jsx(t,{...l,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}function Gs(e){const t=a.forwardRef((n,o)=>{const{children:r,...s}=n;if(a.isValidElement(r)){const l=Ws(r),i=Us(s,r.props);return r.type!==a.Fragment&&(i.ref=o?tt(o,l):l),a.cloneElement(r,i)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Hs=Symbol("radix.slottable");function Ks(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Hs}function Us(e,t){const n={...t};for(const o in t){const r=e[o],s=t[o];/^on[A-Z]/.test(o)?r&&s?n[o]=(...i)=>{const u=s(...i);return r(...i),u}:r&&(n[o]=r):o==="style"?n[o]={...r,...s}:o==="className"&&(n[o]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function Ws(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Bs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Vs=Bs.reduce((e,t)=>{const n=$s(`Primitive.${t}`),o=a.forwardRef((r,s)=>{const{asChild:l,...i}=r,u=l?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),c.jsx(u,{...i,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Ys=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Xs="VisuallyHidden",ho=a.forwardRef((e,t)=>c.jsx(Vs.span,{...e,ref:t,style:{...Ys,...e.style}}));ho.displayName=Xs;const qs=({title:e,trigger:t,defaultOpen:n,desc:o,children:r})=>c.jsxs(to,{defaultOpen:n,children:[c.jsx(oo,{asChild:!0,children:t}),c.jsxs(so,{children:[c.jsx(ao,{className:"fixed inset-0 bg-slate-800/25"}),c.jsxs(io,{className:"fixed top-1/2 left-1/2 flex w-1/2 -translate-x-1/2 -translate-y-1/2 flex-col gap-6 rounded-lg border-2 border-blue-300 bg-slate-800/95 p-8 font-mono text-white",children:[c.jsx(ho,{asChild:!0,children:c.jsx(fo,{children:o})}),c.jsx(co,{className:"text-center text-4xl font-bold capitalize",children:e}),c.jsx("div",{id:"dialog",children:r}),c.jsx(kt,{asChild:!0,children:c.jsx("button",{className:"absolute top-2.5 right-2.5 inline-flex size-[25px] cursor-pointer appearance-none items-center justify-center rounded-full bg-slate-700 focus:outline-1 focus:outline-blue-300","aria-label":"Close",children:c.jsx(dr,{})})})]})]})]}),xo=({defaultOpen:e=!1,skip:t=!1,trigger:n})=>{var v,y;const o=Ae(f=>f.currentLevel),r=((v=Ye[o])==null?void 0:v.goals)||["No goals defined for this level yet."],s=((y=Ye[o])==null?void 0:y.dialog)||["No dialog available for this level."],l=a.useRef(0),[i,u]=a.useState(""),[g,p]=a.useState(s[l.current]),[d,m]=a.useState(t);a.useEffect(()=>{let f=0;const h=setInterval(()=>{f<=g.length?(u(g.slice(0,f)),f++):clearInterval(h)},10);return()=>{clearInterval(h),u("")}},[g]);const x=()=>{d||(l.current<s.length-1?(l.current++,p(s[l.current])):(l.current=0,m(!0),p("")))},E=()=>{d?(m(!1),l.current=s.length-1,p(s[l.current])):l.current>0&&(l.current--,p(s[l.current]))};return c.jsx(qs,{title:o,trigger:n,defaultOpen:e,desc:`This dialog displays the level goals and instructions for the
            ${o} level. You can close it by clicking the close button or
            pressing the escape key.`,children:c.jsxs("div",{className:"flex flex-col gap-5",children:[c.jsxs("div",{className:"flex flex-1 flex-row",children:[c.jsx("div",{className:"my-auto w-1/3 pr-4",children:c.jsx("div",{style:{aspectRatio:"1 / 1",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),c.jsxs("div",{className:"relative my-auto h-36 w-full rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[c.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),c.jsx("p",{className:"h-full overflow-auto pr-2 text-lg italic [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-slate-500 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-slate-900",children:d?c.jsxs(c.Fragment,{children:[c.jsx("span",{className:"not-italic",children:"Goals:"}),r.map(f=>c.jsx("li",{className:"text-lg italic",children:f},f.slice(0,20)))]}):i})]})]}),c.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[c.jsx("button",{onClick:E,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Previous"}),d?c.jsx(kt,{asChild:!0,children:c.jsx("button",{className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"})}):c.jsx("button",{onClick:x,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next"})]})]})})},Ve=En.forwardRef(({tooltip:e,className:t,children:n,side:o,...r},s)=>c.jsxs(Dr,{children:[c.jsx(_r,{asChild:!0,children:c.jsx("button",{ref:s,className:wn("cursor-pointer rounded bg-slate-800 p-2 outline outline-slate-500 hover:bg-slate-900",t),...r,children:n})}),c.jsx(Tr,{side:o,children:c.jsx("p",{children:e})})]})),Zs=()=>{const e=Ae(o=>o.isPaused),t=Ae(o=>o.play),n=Ae(o=>o.pause);return c.jsxs(Dt,{position:"top-left",className:"flex flex-col items-center justify-center gap-2",children:[c.jsx(Ve,{tooltip:"Play/Pause",side:"right",onClick:()=>{e?t():n()},children:e?c.jsx(fr,{className:"text-white"}):c.jsx(pr,{className:"text-white"})}),c.jsx(Ve,{tooltip:"Reset Level",side:"right",children:c.jsx(mr,{className:"text-white"})}),c.jsx(xo,{skip:!0,trigger:c.jsx(Ve,{tooltip:"Level Info",side:"right",children:c.jsx(gr,{className:"text-white"})})})]})},Ft=({x:e,y:t,onClose:n,parentLoopId:o,children:r})=>{const s=Object.values(jr).flat(),{addNodes:l,addEdges:i,screenToFlowPosition:u,getNodes:g}=Fe(),p=a.useRef(null),[d,m]=a.useState(""),[x,E]=a.useState(0),[v,y]=a.useState(qt.map(b=>({nodeType:b})));a.useEffect(()=>{var b;(b=p.current)==null||b.focus()},[]),a.useEffect(()=>{const b=qt.filter(C=>C.toLowerCase().includes(d.toLowerCase())).map(C=>({nodeType:C}));if(d==="")return y(b);const R=s.filter(C=>C.toLowerCase().includes(d.toLowerCase())).map(C=>({nodeType:"MathFloat",computeType:C})),P=[...b,...R];y(P),E(0)},[d]);const f=(b,R)=>{const P=b==="ForLoop"?Sn(l,e,t,i,u,o):[h(b,R)];o&&In(g,i,P,o),n()},h=(b,R)=>{const P=Nt();return l({id:P,type:b,position:u({x:e,y:t}),data:{initialComputeType:R,parentLoopId:o}}),P},w=b=>{if(b.key==="ArrowDown")b.preventDefault(),E(R=>(R+1)%v.length);else if(b.key==="ArrowUp")b.preventDefault(),E(R=>(R-1+v.length)%v.length);else if(b.key==="Enter"){b.preventDefault();const R=v[x];R&&f(R.nodeType,R.computeType)}};return a.useEffect(()=>(window.addEventListener("keydown",w),()=>window.removeEventListener("keydown",w)),[v,x]),c.jsxs("div",{className:"flex w-65 flex-col gap-2 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[c.jsx("div",{className:"shadow",children:c.jsx("input",{ref:p,type:"text",spellCheck:"false",placeholder:"Search",className:"w-full rounded bg-slate-900 p-2 text-sm text-white focus:border-gray-300 focus:ring-0 focus:outline-none",onChange:b=>m(b.target.value)})}),c.jsx("div",{className:"flex flex-col gap-1",children:v.map((b,R)=>c.jsx("button",{className:wn("w-full cursor-pointer rounded px-2 py-1 text-left text-sm text-white",x===R?"bg-slate-700":"hover:bg-slate-700"),onClick:()=>f(b.nodeType,b.computeType),children:b.computeType?c.jsxs("span",{children:[c.jsx("span",{className:"text-slate-400",children:b.nodeType}),c.jsx(hr,{className:"inline-block h-4 w-4 text-slate-400"}),c.jsx("span",{className:"",children:b.computeType})]}):c.jsx(c.Fragment,{children:b.nodeType})},`add_node_${b}_${R}`))}),d===""&&c.jsx(c.Fragment,{children:r})]})},Js=({nodeId:e,nodeType:t,nodeLoopId:n,x:o,y:r,onClose:s})=>c.jsx("div",{style:{position:"absolute",top:r,left:o,zIndex:1e3},children:t==="ForStart"||t==="ForEnd"?c.jsxs(Ft,{onClose:s,x:o,y:r,parentLoopId:n,children:[c.jsx("hr",{className:"mx-auto h-1 w-44 rounded-sm border-0 bg-slate-700"}),c.jsx(un,{nodeId:e,onClose:s})]}):c.jsx("div",{className:"flex w-36 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:c.jsx(un,{nodeId:e,onClose:s})})}),un=({nodeId:e,onClose:t})=>{const{getNode:n,getNodes:o,setNodes:r,addNodes:s,setEdges:l,addEdges:i}=Fe(),u=a.useCallback(()=>{const p=n(e);if(!p)return;const d={x:p.position.x+50,y:p.position.y+50};if(p.data.loopStart||p.data.loopEnd)Sn(s,d.x,d.y,i);else{const m=Nt();s({...p,selected:!1,dragging:!1,id:m,position:d}),p.data.parentLoopId&&In(o,i,[m],p.data.parentLoopId)}t()},[n,e,t,s,i,o]),g=a.useCallback(()=>{r(p=>p.filter(d=>d.id!==e)),l(p=>p.filter(d=>d.source!==e)),t()},[r,l,t,e]);return c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[c.jsx("span",{children:"Duplicate"}),c.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Ctrl+D"})]}),c.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:g,children:[c.jsx("span",{children:"Delete"}),c.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})},Qs=({x:e,y:t,onClose:n})=>c.jsx("div",{style:{position:"absolute",top:t,left:e,zIndex:1e3},children:c.jsx(Ft,{onClose:n,x:e,y:t})});var ea="DismissableLayer",St="dismissableLayer.update",ta="dismissableLayer.pointerDownOutside",na="dismissableLayer.focusOutside",dn,vo=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),yo=a.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:l,onDismiss:i,...u}=e,g=a.useContext(vo),[p,d]=a.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=a.useState({}),E=te(t,C=>d(C)),v=Array.from(g.layers),[y]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),f=v.indexOf(y),h=p?v.indexOf(p):-1,w=g.layersWithOutsidePointerEventsDisabled.size>0,b=h>=f,R=sa(C=>{const O=C.target,H=[...g.branches].some(z=>z.contains(O));!b||H||(r==null||r(C),l==null||l(C),C.defaultPrevented||i==null||i())},m),P=aa(C=>{const O=C.target;[...g.branches].some(z=>z.contains(O))||(s==null||s(C),l==null||l(C),C.defaultPrevented||i==null||i())},m);return Ar(C=>{h===g.layers.size-1&&(o==null||o(C),!C.defaultPrevented&&i&&(C.preventDefault(),i()))},m),a.useEffect(()=>{if(p)return n&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(dn=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(p)),g.layers.add(p),fn(),()=>{n&&g.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=dn)}},[p,m,n,g]),a.useEffect(()=>()=>{p&&(g.layers.delete(p),g.layersWithOutsidePointerEventsDisabled.delete(p),fn())},[p,g]),a.useEffect(()=>{const C=()=>x({});return document.addEventListener(St,C),()=>document.removeEventListener(St,C)},[]),c.jsx(oe.div,{...u,ref:E,style:{pointerEvents:w?b?"auto":"none":void 0,...e.style},onFocusCapture:A(e.onFocusCapture,P.onFocusCapture),onBlurCapture:A(e.onBlurCapture,P.onBlurCapture),onPointerDownCapture:A(e.onPointerDownCapture,R.onPointerDownCapture)})});yo.displayName=ea;var oa="DismissableLayerBranch",ra=a.forwardRef((e,t)=>{const n=a.useContext(vo),o=a.useRef(null),r=te(t,o);return a.useEffect(()=>{const s=o.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),c.jsx(oe.div,{...e,ref:r})});ra.displayName=oa;function sa(e,t=globalThis==null?void 0:globalThis.document){const n=de(e),o=a.useRef(!1),r=a.useRef(()=>{});return a.useEffect(()=>{const s=i=>{if(i.target&&!o.current){let u=function(){bo(ta,n,g,{discrete:!0})};const g={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=u,t.addEventListener("click",r.current,{once:!0})):u()}else t.removeEventListener("click",r.current);o.current=!1},l=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(l),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function aa(e,t=globalThis==null?void 0:globalThis.document){const n=de(e),o=a.useRef(!1);return a.useEffect(()=>{const r=s=>{s.target&&!o.current&&bo(na,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function fn(){const e=new CustomEvent(St);document.dispatchEvent(e)}function bo(e,t,n,{discrete:o}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),o?Cn(r,s):r.dispatchEvent(s)}var yt="focusScope.autoFocusOnMount",bt="focusScope.autoFocusOnUnmount",pn={bubbles:!1,cancelable:!0},ia="FocusScope",Eo=a.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...l}=e,[i,u]=a.useState(null),g=de(r),p=de(s),d=a.useRef(null),m=te(t,v=>u(v)),x=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(o){let v=function(w){if(x.paused||!i)return;const b=w.target;i.contains(b)?d.current=b:pe(d.current,{select:!0})},y=function(w){if(x.paused||!i)return;const b=w.relatedTarget;b!==null&&(i.contains(b)||pe(d.current,{select:!0}))},f=function(w){if(document.activeElement===document.body)for(const R of w)R.removedNodes.length>0&&pe(i)};document.addEventListener("focusin",v),document.addEventListener("focusout",y);const h=new MutationObserver(f);return i&&h.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",y),h.disconnect()}}},[o,i,x.paused]),a.useEffect(()=>{if(i){gn.add(x);const v=document.activeElement;if(!i.contains(v)){const f=new CustomEvent(yt,pn);i.addEventListener(yt,g),i.dispatchEvent(f),f.defaultPrevented||(la(pa(wo(i)),{select:!0}),document.activeElement===v&&pe(i))}return()=>{i.removeEventListener(yt,g),setTimeout(()=>{const f=new CustomEvent(bt,pn);i.addEventListener(bt,p),i.dispatchEvent(f),f.defaultPrevented||pe(v??document.body,{select:!0}),i.removeEventListener(bt,p),gn.remove(x)},0)}}},[i,g,p,x]);const E=a.useCallback(v=>{if(!n&&!o||x.paused)return;const y=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,f=document.activeElement;if(y&&f){const h=v.currentTarget,[w,b]=ca(h);w&&b?!v.shiftKey&&f===b?(v.preventDefault(),n&&pe(w,{select:!0})):v.shiftKey&&f===w&&(v.preventDefault(),n&&pe(b,{select:!0})):f===h&&v.preventDefault()}},[n,o,x.paused]);return c.jsx(oe.div,{tabIndex:-1,...l,ref:m,onKeyDown:E})});Eo.displayName=ia;function la(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(pe(o,{select:t}),document.activeElement!==n)return}function ca(e){const t=wo(e),n=mn(t,e),o=mn(t.reverse(),e);return[n,o]}function wo(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function mn(e,t){for(const n of e)if(!ua(n,{upTo:t}))return n}function ua(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function da(e){return e instanceof HTMLInputElement&&"select"in e}function pe(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&da(e)&&t&&e.select()}}var gn=fa();function fa(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=hn(e,t),e.unshift(t)},remove(t){var n;e=hn(e,t),(n=e[0])==null||n.resume()}}}function hn(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function pa(e){return e.filter(t=>t.tagName!=="A")}var ma="Portal",Co=a.forwardRef((e,t)=>{var i;const{container:n,...o}=e,[r,s]=a.useState(!1);xr(()=>s(!0),[]);const l=n||r&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return l?Br.createPortal(c.jsx(oe.div,{...o,ref:t}),l):null});Co.displayName=ma;var Et="rovingFocusGroup.onEntryFocus",ga={bubbles:!1,cancelable:!0},Ge="RovingFocusGroup",[It,So,ha]=Nn(Ge),[xa,Io]=et(Ge,[ha]),[va,ya]=xa(Ge),Po=a.forwardRef((e,t)=>c.jsx(It.Provider,{scope:e.__scopeRovingFocusGroup,children:c.jsx(It.Slot,{scope:e.__scopeRovingFocusGroup,children:c.jsx(ba,{...e,ref:t})})}));Po.displayName=Ge;var ba=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:r=!1,dir:s,currentTabStopId:l,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:u,onEntryFocus:g,preventScrollOnEntryFocus:p=!1,...d}=e,m=a.useRef(null),x=te(t,m),E=Dn(s),[v,y]=Mt({prop:l,defaultProp:i??null,onChange:u,caller:Ge}),[f,h]=a.useState(!1),w=de(g),b=So(n),R=a.useRef(!1),[P,C]=a.useState(0);return a.useEffect(()=>{const O=m.current;if(O)return O.addEventListener(Et,w),()=>O.removeEventListener(Et,w)},[w]),c.jsx(va,{scope:n,orientation:o,dir:E,loop:r,currentTabStopId:v,onItemFocus:a.useCallback(O=>y(O),[y]),onItemShiftTab:a.useCallback(()=>h(!0),[]),onFocusableItemAdd:a.useCallback(()=>C(O=>O+1),[]),onFocusableItemRemove:a.useCallback(()=>C(O=>O-1),[]),children:c.jsx(oe.div,{tabIndex:f||P===0?-1:0,"data-orientation":o,...d,ref:x,style:{outline:"none",...e.style},onMouseDown:A(e.onMouseDown,()=>{R.current=!0}),onFocus:A(e.onFocus,O=>{const H=!R.current;if(O.target===O.currentTarget&&H&&!f){const z=new CustomEvent(Et,ga);if(O.currentTarget.dispatchEvent(z),!z.defaultPrevented){const K=b().filter(G=>G.focusable),F=K.find(G=>G.active),X=K.find(G=>G.id===v),k=[F,X,...K].filter(Boolean).map(G=>G.ref.current);No(k,p)}}R.current=!1}),onBlur:A(e.onBlur,()=>h(!1))})})}),Ro="RovingFocusGroupItem",Mo=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:r=!1,tabStopId:s,children:l,...i}=e,u=Pe(),g=s||u,p=ya(Ro,n),d=p.currentTabStopId===g,m=So(n),{onFocusableItemAdd:x,onFocusableItemRemove:E,currentTabStopId:v}=p;return a.useEffect(()=>{if(o)return x(),()=>E()},[o,x,E]),c.jsx(It.ItemSlot,{scope:n,id:g,focusable:o,active:r,children:c.jsx(oe.span,{tabIndex:d?0:-1,"data-orientation":p.orientation,...i,ref:t,onMouseDown:A(e.onMouseDown,y=>{o?p.onItemFocus(g):y.preventDefault()}),onFocus:A(e.onFocus,()=>p.onItemFocus(g)),onKeyDown:A(e.onKeyDown,y=>{if(y.key==="Tab"&&y.shiftKey){p.onItemShiftTab();return}if(y.target!==y.currentTarget)return;const f=Ca(y,p.orientation,p.dir);if(f!==void 0){if(y.metaKey||y.ctrlKey||y.altKey||y.shiftKey)return;y.preventDefault();let w=m().filter(b=>b.focusable).map(b=>b.ref.current);if(f==="last")w.reverse();else if(f==="prev"||f==="next"){f==="prev"&&w.reverse();const b=w.indexOf(y.currentTarget);w=p.loop?Sa(w,b+1):w.slice(b+1)}setTimeout(()=>No(w))}}),children:typeof l=="function"?l({isCurrentTabStop:d,hasTabStop:v!=null}):l})})});Mo.displayName=Ro;var Ea={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function wa(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ca(e,t,n){const o=wa(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ea[o]}function No(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function Sa(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var Ia=Po,Pa=Mo;function Ra(e){const t=Ma(e),n=a.forwardRef((o,r)=>{const{children:s,...l}=o,i=a.Children.toArray(s),u=i.find(Da);if(u){const g=u.props.children,p=i.map(d=>d===u?a.Children.count(g)>1?a.Children.only(null):a.isValidElement(g)?g.props.children:null:d);return c.jsx(t,{...l,ref:r,children:a.isValidElement(g)?a.cloneElement(g,void 0,p):null})}return c.jsx(t,{...l,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}function Ma(e){const t=a.forwardRef((n,o)=>{const{children:r,...s}=n;if(a.isValidElement(r)){const l=Ta(r),i=_a(s,r.props);return r.type!==a.Fragment&&(i.ref=o?tt(o,l):l),a.cloneElement(r,i)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Na=Symbol("radix.slottable");function Da(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Na}function _a(e,t){const n={...t};for(const o in t){const r=e[o],s=t[o];/^on[A-Z]/.test(o)?r&&s?n[o]=(...i)=>{s(...i),r(...i)}:r&&(n[o]=r):o==="style"?n[o]={...r,...s}:o==="className"&&(n[o]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function Ta(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Pt=["Enter"," "],ja=["ArrowDown","PageUp","Home"],Do=["ArrowUp","PageDown","End"],Aa=[...ja,...Do],La={ltr:[...Pt,"ArrowRight"],rtl:[...Pt,"ArrowLeft"]},Oa={ltr:["ArrowLeft"],rtl:["ArrowRight"]},He="Menu",[ke,ka,za]=Nn(He),[Ee,_o]=et(He,[za,_n,Io]),it=_n(),To=Io(),[Fa,we]=Ee(He),[$a,Ke]=Ee(He),jo=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:r,onOpenChange:s,modal:l=!0}=e,i=it(t),[u,g]=a.useState(null),p=a.useRef(!1),d=de(s),m=Dn(r);return a.useEffect(()=>{const x=()=>{p.current=!0,document.addEventListener("pointerdown",E,{capture:!0,once:!0}),document.addEventListener("pointermove",E,{capture:!0,once:!0})},E=()=>p.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",E,{capture:!0}),document.removeEventListener("pointermove",E,{capture:!0})}},[]),c.jsx(Lr,{...i,children:c.jsx(Fa,{scope:t,open:n,onOpenChange:d,content:u,onContentChange:g,children:c.jsx($a,{scope:t,onClose:a.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:p,dir:m,modal:l,children:o})})})};jo.displayName=He;var Ga="MenuAnchor",$t=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=it(n);return c.jsx(Or,{...r,...o,ref:t})});$t.displayName=Ga;var Gt="MenuPortal",[Ha,Ao]=Ee(Gt,{forceMount:void 0}),Lo=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:r}=e,s=we(Gt,t);return c.jsx(Ha,{scope:t,forceMount:n,children:c.jsx(be,{present:n||s.open,children:c.jsx(Co,{asChild:!0,container:r,children:o})})})};Lo.displayName=Gt;var ne="MenuContent",[Ka,Ht]=Ee(ne),Oo=a.forwardRef((e,t)=>{const n=Ao(ne,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,s=we(ne,e.__scopeMenu),l=Ke(ne,e.__scopeMenu);return c.jsx(ke.Provider,{scope:e.__scopeMenu,children:c.jsx(be,{present:o||s.open,children:c.jsx(ke.Slot,{scope:e.__scopeMenu,children:l.modal?c.jsx(Ua,{...r,ref:t}):c.jsx(Wa,{...r,ref:t})})})})}),Ua=a.forwardRef((e,t)=>{const n=we(ne,e.__scopeMenu),o=a.useRef(null),r=te(t,o);return a.useEffect(()=>{const s=o.current;if(s)return Rn(s)},[]),c.jsx(Kt,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:A(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Wa=a.forwardRef((e,t)=>{const n=we(ne,e.__scopeMenu);return c.jsx(Kt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Ba=Ra("MenuContent.ScrollLock"),Kt=a.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:l,disableOutsidePointerEvents:i,onEntryFocus:u,onEscapeKeyDown:g,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:m,onDismiss:x,disableOutsideScroll:E,...v}=e,y=we(ne,n),f=Ke(ne,n),h=it(n),w=To(n),b=ka(n),[R,P]=a.useState(null),C=a.useRef(null),O=te(t,C,y.onContentChange),H=a.useRef(0),z=a.useRef(""),K=a.useRef(0),F=a.useRef(null),X=a.useRef("right"),$=a.useRef(0),k=E?Pn:a.Fragment,G=E?{as:Ba,allowPinchZoom:!0}:void 0,ce=D=>{var I,_;const V=z.current+D,Y=b().filter(L=>!L.disabled),J=document.activeElement,S=(I=Y.find(L=>L.ref.current===J))==null?void 0:I.textValue,N=Y.map(L=>L.textValue),T=ri(N,V,S),M=(_=Y.find(L=>L.textValue===T))==null?void 0:_.ref.current;(function L(U){z.current=U,window.clearTimeout(H.current),U!==""&&(H.current=window.setTimeout(()=>L(""),1e3))})(V),M&&setTimeout(()=>M.focus())};a.useEffect(()=>()=>window.clearTimeout(H.current),[]),Mn();const Z=a.useCallback(D=>{var Y,J;return X.current===((Y=F.current)==null?void 0:Y.side)&&ai(D,(J=F.current)==null?void 0:J.area)},[]);return c.jsx(Ka,{scope:n,searchRef:z,onItemEnter:a.useCallback(D=>{Z(D)&&D.preventDefault()},[Z]),onItemLeave:a.useCallback(D=>{var V;Z(D)||((V=C.current)==null||V.focus(),P(null))},[Z]),onTriggerLeave:a.useCallback(D=>{Z(D)&&D.preventDefault()},[Z]),pointerGraceTimerRef:K,onPointerGraceIntentChange:a.useCallback(D=>{F.current=D},[]),children:c.jsx(k,{...G,children:c.jsx(Eo,{asChild:!0,trapped:r,onMountAutoFocus:A(s,D=>{var V;D.preventDefault(),(V=C.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:c.jsx(yo,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:g,onPointerDownOutside:p,onFocusOutside:d,onInteractOutside:m,onDismiss:x,children:c.jsx(Ia,{asChild:!0,...w,dir:f.dir,orientation:"vertical",loop:o,currentTabStopId:R,onCurrentTabStopIdChange:P,onEntryFocus:A(u,D=>{f.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:c.jsx(kr,{role:"menu","aria-orientation":"vertical","data-state":Jo(y.open),"data-radix-menu-content":"",dir:f.dir,...h,...v,ref:O,style:{outline:"none",...v.style},onKeyDown:A(v.onKeyDown,D=>{const Y=D.target.closest("[data-radix-menu-content]")===D.currentTarget,J=D.ctrlKey||D.altKey||D.metaKey,S=D.key.length===1;Y&&(D.key==="Tab"&&D.preventDefault(),!J&&S&&ce(D.key));const N=C.current;if(D.target!==N||!Aa.includes(D.key))return;D.preventDefault();const M=b().filter(I=>!I.disabled).map(I=>I.ref.current);Do.includes(D.key)&&M.reverse(),ni(M)}),onBlur:A(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(H.current),z.current="")}),onPointerMove:A(e.onPointerMove,ze(D=>{const V=D.target,Y=$.current!==D.clientX;if(D.currentTarget.contains(V)&&Y){const J=D.clientX>$.current?"right":"left";X.current=J,$.current=D.clientX}}))})})})})})})});Oo.displayName=ne;var Va="MenuGroup",Ut=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return c.jsx(oe.div,{role:"group",...o,ref:t})});Ut.displayName=Va;var Ya="MenuLabel",ko=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return c.jsx(oe.div,{...o,ref:t})});ko.displayName=Ya;var Je="MenuItem",xn="menu.itemSelect",lt=a.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...r}=e,s=a.useRef(null),l=Ke(Je,e.__scopeMenu),i=Ht(Je,e.__scopeMenu),u=te(t,s),g=a.useRef(!1),p=()=>{const d=s.current;if(!n&&d){const m=new CustomEvent(xn,{bubbles:!0,cancelable:!0});d.addEventListener(xn,x=>o==null?void 0:o(x),{once:!0}),Cn(d,m),m.defaultPrevented?g.current=!1:l.onClose()}};return c.jsx(zo,{...r,ref:u,disabled:n,onClick:A(e.onClick,p),onPointerDown:d=>{var m;(m=e.onPointerDown)==null||m.call(e,d),g.current=!0},onPointerUp:A(e.onPointerUp,d=>{var m;g.current||(m=d.currentTarget)==null||m.click()}),onKeyDown:A(e.onKeyDown,d=>{const m=i.searchRef.current!=="";n||m&&d.key===" "||Pt.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})})});lt.displayName=Je;var zo=a.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:r,...s}=e,l=Ht(Je,n),i=To(n),u=a.useRef(null),g=te(t,u),[p,d]=a.useState(!1),[m,x]=a.useState("");return a.useEffect(()=>{const E=u.current;E&&x((E.textContent??"").trim())},[s.children]),c.jsx(ke.ItemSlot,{scope:n,disabled:o,textValue:r??m,children:c.jsx(Pa,{asChild:!0,...i,focusable:!o,children:c.jsx(oe.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...s,ref:g,onPointerMove:A(e.onPointerMove,ze(E=>{o?l.onItemLeave(E):(l.onItemEnter(E),E.defaultPrevented||E.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:A(e.onPointerLeave,ze(E=>l.onItemLeave(E))),onFocus:A(e.onFocus,()=>d(!0)),onBlur:A(e.onBlur,()=>d(!1))})})})}),Xa="MenuCheckboxItem",Fo=a.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...r}=e;return c.jsx(Uo,{scope:e.__scopeMenu,checked:n,children:c.jsx(lt,{role:"menuitemcheckbox","aria-checked":Qe(n)?"mixed":n,...r,ref:t,"data-state":Bt(n),onSelect:A(r.onSelect,()=>o==null?void 0:o(Qe(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Fo.displayName=Xa;var $o="MenuRadioGroup",[qa,Za]=Ee($o,{value:void 0,onValueChange:()=>{}}),Go=a.forwardRef((e,t)=>{const{value:n,onValueChange:o,...r}=e,s=de(o);return c.jsx(qa,{scope:e.__scopeMenu,value:n,onValueChange:s,children:c.jsx(Ut,{...r,ref:t})})});Go.displayName=$o;var Ho="MenuRadioItem",Ko=a.forwardRef((e,t)=>{const{value:n,...o}=e,r=Za(Ho,e.__scopeMenu),s=n===r.value;return c.jsx(Uo,{scope:e.__scopeMenu,checked:s,children:c.jsx(lt,{role:"menuitemradio","aria-checked":s,...o,ref:t,"data-state":Bt(s),onSelect:A(o.onSelect,()=>{var l;return(l=r.onValueChange)==null?void 0:l.call(r,n)},{checkForDefaultPrevented:!1})})})});Ko.displayName=Ho;var Wt="MenuItemIndicator",[Uo,Ja]=Ee(Wt,{checked:!1}),Wo=a.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...r}=e,s=Ja(Wt,n);return c.jsx(be,{present:o||Qe(s.checked)||s.checked===!0,children:c.jsx(oe.span,{...r,ref:t,"data-state":Bt(s.checked)})})});Wo.displayName=Wt;var Qa="MenuSeparator",Bo=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return c.jsx(oe.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});Bo.displayName=Qa;var ei="MenuArrow",Vo=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=it(n);return c.jsx(zr,{...r,...o,ref:t})});Vo.displayName=ei;var ti="MenuSub",[fl,Yo]=Ee(ti),je="MenuSubTrigger",Xo=a.forwardRef((e,t)=>{const n=we(je,e.__scopeMenu),o=Ke(je,e.__scopeMenu),r=Yo(je,e.__scopeMenu),s=Ht(je,e.__scopeMenu),l=a.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:u}=s,g={__scopeMenu:e.__scopeMenu},p=a.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return a.useEffect(()=>p,[p]),a.useEffect(()=>{const d=i.current;return()=>{window.clearTimeout(d),u(null)}},[i,u]),c.jsx($t,{asChild:!0,...g,children:c.jsx(zo,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":Jo(n.open),...e,ref:tt(t,r.onTriggerChange),onClick:d=>{var m;(m=e.onClick)==null||m.call(e,d),!(e.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:A(e.onPointerMove,ze(d=>{s.onItemEnter(d),!d.defaultPrevented&&!e.disabled&&!n.open&&!l.current&&(s.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:A(e.onPointerLeave,ze(d=>{var x,E;p();const m=(x=n.content)==null?void 0:x.getBoundingClientRect();if(m){const v=(E=n.content)==null?void 0:E.dataset.side,y=v==="right",f=y?-5:5,h=m[y?"left":"right"],w=m[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+f,y:d.clientY},{x:h,y:m.top},{x:w,y:m.top},{x:w,y:m.bottom},{x:h,y:m.bottom}],side:v}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:A(e.onKeyDown,d=>{var x;const m=s.searchRef.current!=="";e.disabled||m&&d.key===" "||La[o.dir].includes(d.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),d.preventDefault())})})})});Xo.displayName=je;var qo="MenuSubContent",Zo=a.forwardRef((e,t)=>{const n=Ao(ne,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,s=we(ne,e.__scopeMenu),l=Ke(ne,e.__scopeMenu),i=Yo(qo,e.__scopeMenu),u=a.useRef(null),g=te(t,u);return c.jsx(ke.Provider,{scope:e.__scopeMenu,children:c.jsx(be,{present:o||s.open,children:c.jsx(ke.Slot,{scope:e.__scopeMenu,children:c.jsx(Kt,{id:i.contentId,"aria-labelledby":i.triggerId,...r,ref:g,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var d;l.isUsingKeyboardRef.current&&((d=u.current)==null||d.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:A(e.onFocusOutside,p=>{p.target!==i.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:A(e.onEscapeKeyDown,p=>{l.onClose(),p.preventDefault()}),onKeyDown:A(e.onKeyDown,p=>{var x;const d=p.currentTarget.contains(p.target),m=Oa[l.dir].includes(p.key);d&&m&&(s.onOpenChange(!1),(x=i.trigger)==null||x.focus(),p.preventDefault())})})})})})});Zo.displayName=qo;function Jo(e){return e?"open":"closed"}function Qe(e){return e==="indeterminate"}function Bt(e){return Qe(e)?"indeterminate":e?"checked":"unchecked"}function ni(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function oi(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function ri(e,t,n){const r=t.length>1&&Array.from(t).every(g=>g===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let l=oi(e,Math.max(s,0));r.length===1&&(l=l.filter(g=>g!==n));const u=l.find(g=>g.toLowerCase().startsWith(r.toLowerCase()));return u!==n?u:void 0}function si(e,t){const{x:n,y:o}=e;let r=!1;for(let s=0,l=t.length-1;s<t.length;l=s++){const i=t[s],u=t[l],g=i.x,p=i.y,d=u.x,m=u.y;p>o!=m>o&&n<(d-g)*(o-p)/(m-p)+g&&(r=!r)}return r}function ai(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return si(n,t)}function ze(e){return t=>t.pointerType==="mouse"?e(t):void 0}var ii=jo,li=$t,ci=Lo,ui=Oo,di=Ut,fi=ko,pi=lt,mi=Fo,gi=Go,hi=Ko,xi=Wo,vi=Bo,yi=Vo,bi=Xo,Ei=Zo,ct="DropdownMenu",[wi,pl]=et(ct,[_o]),q=_o(),[Ci,Qo]=wi(ct),er=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:r,defaultOpen:s,onOpenChange:l,modal:i=!0}=e,u=q(t),g=a.useRef(null),[p,d]=Mt({prop:r,defaultProp:s??!1,onChange:l,caller:ct});return c.jsx(Ci,{scope:t,triggerId:Pe(),triggerRef:g,contentId:Pe(),open:p,onOpenChange:d,onOpenToggle:a.useCallback(()=>d(m=>!m),[d]),modal:i,children:c.jsx(ii,{...u,open:p,onOpenChange:d,dir:o,modal:i,children:n})})};er.displayName=ct;var tr="DropdownMenuTrigger",nr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...r}=e,s=Qo(tr,n),l=q(n);return c.jsx(li,{asChild:!0,...l,children:c.jsx(oe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...r,ref:tt(t,s.triggerRef),onPointerDown:A(e.onPointerDown,i=>{!o&&i.button===0&&i.ctrlKey===!1&&(s.onOpenToggle(),s.open||i.preventDefault())}),onKeyDown:A(e.onKeyDown,i=>{o||(["Enter"," "].includes(i.key)&&s.onOpenToggle(),i.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});nr.displayName=tr;var Si="DropdownMenuPortal",or=e=>{const{__scopeDropdownMenu:t,...n}=e,o=q(t);return c.jsx(ci,{...o,...n})};or.displayName=Si;var rr="DropdownMenuContent",sr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=Qo(rr,n),s=q(n),l=a.useRef(!1);return c.jsx(ui,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...o,ref:t,onCloseAutoFocus:A(e.onCloseAutoFocus,i=>{var u;l.current||(u=r.triggerRef.current)==null||u.focus(),l.current=!1,i.preventDefault()}),onInteractOutside:A(e.onInteractOutside,i=>{const u=i.detail.originalEvent,g=u.button===0&&u.ctrlKey===!0,p=u.button===2||g;(!r.modal||p)&&(l.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});sr.displayName=rr;var Ii="DropdownMenuGroup",Pi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(di,{...r,...o,ref:t})});Pi.displayName=Ii;var Ri="DropdownMenuLabel",Mi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(fi,{...r,...o,ref:t})});Mi.displayName=Ri;var Ni="DropdownMenuItem",Di=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(pi,{...r,...o,ref:t})});Di.displayName=Ni;var _i="DropdownMenuCheckboxItem",Ti=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(mi,{...r,...o,ref:t})});Ti.displayName=_i;var ji="DropdownMenuRadioGroup",Ai=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(gi,{...r,...o,ref:t})});Ai.displayName=ji;var Li="DropdownMenuRadioItem",Oi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(hi,{...r,...o,ref:t})});Oi.displayName=Li;var ki="DropdownMenuItemIndicator",zi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(xi,{...r,...o,ref:t})});zi.displayName=ki;var Fi="DropdownMenuSeparator",$i=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(vi,{...r,...o,ref:t})});$i.displayName=Fi;var Gi="DropdownMenuArrow",Hi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(yi,{...r,...o,ref:t})});Hi.displayName=Gi;var Ki="DropdownMenuSubTrigger",Ui=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(bi,{...r,...o,ref:t})});Ui.displayName=Ki;var Wi="DropdownMenuSubContent",Bi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return c.jsx(Ei,{...r,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Bi.displayName=Wi;const Vi=({rfInstance:e})=>{const{getNodes:t,getEdges:n,setViewport:o,setEdges:r,setNodes:s}=Fe();De(u=>u.debugPrint);const[l,i]=a.useState(!1);return c.jsxs(Dt,{position:"top-right",className:"flex flex-col items-end justify-center gap-2",children:[c.jsxs(er,{open:l,onOpenChange:i,children:[c.jsx(nr,{asChild:!0,children:c.jsx(Ve,{side:"left",tooltip:"Add Node","aria-label":"Add Node",children:c.jsx(vr,{className:"text-white"})})}),c.jsx(or,{children:c.jsx(sr,{align:"end",children:c.jsx(Ft,{onClose:()=>i(!1),x:1800,y:400})})})]}),!1]})},Yi=({nodeIds:e,x:t,y:n,onClose:o})=>{const{getNodes:r,getEdges:s,addNodes:l,addEdges:i,setNodes:u,setEdges:g}=Fe(),p=a.useCallback(()=>{const m=r().filter(f=>e.includes(f.id)),x=s(),E=new Map,v=m.map(f=>{const h=Nt();return E.set(f.id,h),{...f,id:h,position:{x:f.position.x+50,y:f.position.y+50},selected:!1,dragging:!1}}),y=x.filter(f=>E.has(f.source)&&E.has(f.target)).map(f=>{const h=E.get(f.source),w=E.get(f.target),b=Er({source:h,sourceHandle:f.sourceHandle,target:w,targetHandle:f.targetHandle});return{...f,id:b,source:h,target:w,selected:!1}});l(v),i(y),u(f=>f.map(h=>({...h,selected:v.some(w=>w.id===h.id)}))),o()},[e,r,s,l,i,u,o]),d=a.useCallback(()=>{u(m=>m.filter(x=>!e.includes(x.id))),g(m=>m.filter(x=>!e.includes(x.source)&&!e.includes(x.target))),o()},[e,u,g,o]);return c.jsx("div",{style:{position:"absolute",top:n,left:t,zIndex:1e3},children:c.jsxs(Dt,{className:"flex w-55 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[c.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:p,children:[c.jsxs("span",{children:["Duplicate ",e.length," nodes "]}),c.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Ctrl+D"})]}),c.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:d,children:[c.jsxs("span",{children:["Delete ",e.length," nodes "]}),c.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})})};function Xi(){const[e,t]=a.useState(null),[n,o]=a.useState(null),[r,s]=a.useState(null),l=a.useCallback(p=>{p.preventDefault();const d=dt(p);t({x:d.x,y:d.y})},[t]),i=a.useCallback((p,d)=>{p.preventDefault();const m=dt(p);o({nodeId:d.id,nodeType:d.type,nodeLoopId:d.data.loopId,x:m.x,y:m.y})},[o]),u=a.useCallback((p,d)=>{if(p.preventDefault(),d.length===0)return;const m=dt(p);s({nodeIds:d.map(x=>x.id),x:m.x,y:m.y})},[s]),g=a.useCallback(()=>{t(null),o(null),s(null)},[t,o,s]);return{paneContextMenu:e,nodeContextMenu:n,selectionContextMenu:r,setPaneContextMenu:t,setNodeContextMenu:o,setSelectionContextMenu:s,handlePaneContextMenu:l,handleNodeContextMenu:i,handleSelectionContextMenu:u,onPaneClick:g}}const vn=e=>Symbol.iterator in e,yn=e=>"entries"in e,bn=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),o=t instanceof Map?t:new Map(t.entries());if(n.size!==o.size)return!1;for(const[r,s]of n)if(!Object.is(s,o.get(r)))return!1;return!0},qi=(e,t)=>{const n=e[Symbol.iterator](),o=t[Symbol.iterator]();let r=n.next(),s=o.next();for(;!r.done&&!s.done;){if(!Object.is(r.value,s.value))return!1;r=n.next(),s=o.next()}return!!r.done&&!!s.done};function Zi(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!vn(e)||!vn(t)?bn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):yn(e)&&yn(t)?bn(e,t):qi(e,t)}function Ji(e){const t=En.useRef(void 0);return n=>{const o=e(n);return Zi(t.current,o)?t.current:t.current=o}}const Qi=e=>({nodes:e.nodes,setNodes:e.setNodes,highlightDuplicateNodes:e.highlightDuplicateNodes});function el(){const{getIntersectingNodes:e,getNode:t,getNodes:n}=Fe(),{nodes:o,setNodes:r,highlightDuplicateNodes:s}=wr(Ji(Qi)),[l,i]=a.useState(Cr),u=De(y=>y.replaceNode),g=De(y=>y.removeNode),p=De(y=>y.addEdge),d=De(y=>y.removeEdge),m=a.useCallback(y=>{let f=!1;y.forEach(h=>{switch(h.type){case"add":u(h.item),f=h.item.type==="ExportToGameobject";break;case"remove":{const w=t(h.id);if(w!=null&&w.data.loopStart||w!=null&&w.data.loopEnd){const b=n().filter(R=>R.id!==h.id&&R.data.loopId===w.data.loopId)[0];r(R=>R.filter(P=>P.data.loopId!==(w==null?void 0:w.data.loopId)).map(P=>({...P,data:{...P.data,parentLoopId:P.data.parentLoopId===w.data.loopId?void 0:P.data.parentLoopId}}))),i(R=>R.filter(P=>P.target===b.id||P.source===b.id?(d(P.id),!1):!0)),g(b.id)}g(h.id),f=!0;break}case"replace":u(h.item),f=h.item.type==="ExportToGameobject";break}}),r(h=>Sr(y,h)),f&&s()},[r,u,s,t,g,n,d]),x=a.useCallback(y=>{y.forEach(f=>{switch(f.type){case"remove":d(f.id);break;case"add":p(f.item);break}}),i(f=>Fr(y,f))},[i,p,d]),E=a.useCallback(y=>{const f=t(y.source),h=t(y.target);!!(f!=null&&f.data.loopStart&&f.data.loopId===(h==null?void 0:h.data.loopId)||f!=null&&f.data.loopStart&&(h==null?void 0:h.data.parentLoopId)===f.data.loopId||f!=null&&f.data.loopEnd&&f.data.parentLoopId===(h==null?void 0:h.data.parentLoopId)||h!=null&&h.data.loopEnd&&(f==null?void 0:f.data.parentLoopId)===h.data.loopId||!(f!=null&&f.data.loopStart)&&!(h!=null&&h.data.loopEnd)&&(f==null?void 0:f.data.parentLoopId)===(h==null?void 0:h.data.parentLoopId))&&(p(y),i(b=>$r(y,b)))},[i,t,p]);return{nodes:o,edges:l,onNodesChange:m,onEdgesChange:x,onConnect:E,onNodeDragStop:(y,f)=>{var X;if(f.type==="Group")return;const h=(X=e(f))==null?void 0:X[0];if((!h||h.type!=="Group")&&f.parentId){r($=>$.map(k=>{if(k.id===f.id){const G=$.find(Z=>Z.id===f.parentId);if(!G)return k;const ce={x:k.position.x+G.position.x,y:k.position.y+G.position.y};return{...k,position:ce,parentId:void 0}}return k}));return}if(!h||h.type!=="Group")return;let w=f.position;if(f.parentId){const $=f.parentId===h.id?h:t(f.parentId);w={x:f.position.x+$.position.x,y:f.position.y+$.position.y}}const b=20,R=h.position.x-w.x+b,P=h.position.y-w.y+b,C={x:h.position.x-Math.max(R,0),y:h.position.y-Math.max(P,0)};let O=h.measured.width+Math.max(R,0),H=h.measured.height+Math.max(P,0);const z={x:w.x-C.x,y:w.y-C.y},K=z.x+f.measured.width+20,F=z.y+f.measured.height+20;O=Math.max(K,O),H=Math.max(F,H),r($=>$.map(k=>k.id===f.id?{...k,parentId:h.id,position:z}:k.id===h.id?{...k,position:C,width:O,height:H,data:{isParent:!0},style:{zIndex:-1}}:k))}}}const tl=()=>{const[e,t]=a.useState(),{nodes:n,edges:o,onNodesChange:r,onEdgesChange:s,onConnect:l,onNodeDragStop:i}=el(),{paneContextMenu:u,nodeContextMenu:g,selectionContextMenu:p,handlePaneContextMenu:d,handleNodeContextMenu:m,handleSelectionContextMenu:x,onPaneClick:E,setNodeContextMenu:v,setPaneContextMenu:y,setSelectionContextMenu:f}=Xi();return c.jsxs(c.Fragment,{children:[c.jsxs(Kr,{id:"node-editor",onInit:t,nodeTypes:Ur,nodes:n,edges:o,onNodesChange:r,onEdgesChange:s,onPaneContextMenu:d,onNodeContextMenu:m,onSelectionContextMenu:x,onConnect:l,onPaneClick:E,disableKeyboardA11y:!0,fitView:!0,proOptions:{hideAttribution:!0},deleteKeyCode:["Delete","Backspace"],onNodeDragStop:i,children:[c.jsx(Wr,{bgColor:"#14141d",color:"#a7abc2"}),c.jsx(Vi,{rfInstance:e}),c.jsx(Zs,{}),c.jsx(Ir,{})]}),u&&c.jsx(Qs,{x:u.x,y:u.y,onClose:()=>y(null)}),g&&c.jsx(Js,{nodeId:g.nodeId,nodeType:g.nodeType,nodeLoopId:g.nodeLoopId,x:g.x,y:g.y,onClose:()=>v(null)}),p&&c.jsx(Yi,{nodeIds:p.nodeIds,x:p.x,y:p.y,onClose:()=>f(null)})]})},nl=()=>c.jsx(Gr,{children:c.jsx(Hr,{children:c.jsx(tl,{})})}),ol=({params:e})=>{const t=a.useRef(null),n=Ae(r=>r.setCurrentLevel),o=e.id||"playground";return n(o),a.useEffect(()=>{if(t.current)return Xt.init(),Pr(t.current),bs(o),()=>{Rr(),Xt.cleanup()}},[]),c.jsxs(c.Fragment,{children:[c.jsx(xo,{defaultOpen:!0}),c.jsxs(qn,{direction:"horizontal",children:[c.jsx(wt,{id:"game-panel",minSize:25,order:1,children:c.jsx("canvas",{id:"game-canvas",ref:t,className:"w-1/2"})}),c.jsx(Zn,{className:"flex w-2 items-center justify-center bg-slate-800",children:c.jsx(yr,{width:32,height:32,className:"scale-125 text-slate-400"})}),c.jsx(wt,{id:"nodes-panel",minSize:25,order:2,children:c.jsx(nl,{})})]})]})},ml=lr(ol);export{ml as default};
