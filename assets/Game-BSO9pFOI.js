import{w as os}from"./with-props-Cqy6QlFa.js";import{a as c,t as rs,o as i,s as et,N as ke}from"./chunk-AYJ5UCUI-BEyWwyKY.js";import{c as Ue,A as ss,H as is,a as as,b as tt,d as $e,u as re,e as me,f as Ye,g as Gt,h as lt,i as $,P as He,j as $n,R as Hn,k as Gn,l as ls,m as cs,n as us,T as ds,o as fs,p as yn,q as ps,r as hs,s as se,t as Bn,v as Bt,Q as gs,_ as ms,w as xs,x as vs,D as ys}from"./index-CpUuKUqY.js";import{u as te,a as Ve,b as Ce,c as Pe,L as fe,d as ws,v as Tt,e as bs,g as xe,t as Cs,T as Ps,i as Es,f as Ss}from"./levels-BxhaYbw4.js";import{u as Xe,g as Is,a as pe,B as Ns,E as Ms,T as Rs,b as js,c as As,P as gt,d as Kn,e as Wn,o as Un,s as Yn,f as Vn,h as Xn,i as qn,j as Zn,l as Jn,k as Qn,m as eo,n as to,M as wn,p as Ds,I as we,q as no,r as oo,t as _s,v as Os,w as ro,x as so,y as Lt,z as ct,N as io,A as ao,C as ut,D as lo,L as co,F as Ts,G as Ls,H as ks,J as zs,K as Fs,S as $s,O as Hs,Q as Gs,R as Bs,U as Ks,V as Ws,W as Us,X as Ys,Y as Vs,Z as Xs}from"./Value-Cc46p9I4.js";import{P as qs,F as Zs,D as Js,a as Kt,b as Qs,c as Wt,d as uo,e as Ut,f as Yt,g as Vt,h as Me}from"./index-1pg3Q9qS.js";import{R as ei}from"./index-B7JuJiwu.js";const mt=c.createContext(null);mt.displayName="PanelGroupContext";const X={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Xt=10,Re=c.useLayoutEffect,bn=rs.useId,ti=typeof bn=="function"?bn:()=>null;let ni=0;function qt(e=null){const t=ti(),n=c.useRef(e||t||null);return n.current===null&&(n.current=""+ni++),e??n.current}function fo({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:s,forwardedRef:r,id:a,maxSize:l,minSize:u,onCollapse:p,onExpand:g,onResize:f,order:h,style:x,tagName:v="div",...w}){const d=c.useContext(mt);if(d===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:m,expandPanel:y,getPanelSize:E,getPanelStyle:P,groupId:N,isPanelCollapsed:I,reevaluatePanelConstraints:S,registerPanel:b,resizePanel:C,unregisterPanel:M}=d,D=qt(a),A=c.useRef({callbacks:{onCollapse:p,onExpand:g,onResize:f},constraints:{collapsedSize:n,collapsible:o,defaultSize:s,maxSize:l,minSize:u},id:D,idIsFromProps:a!==void 0,order:h});c.useRef({didLogMissingDefaultSizeWarning:!1}),Re(()=>{const{callbacks:B,constraints:G}=A.current,K={...G};A.current.id=D,A.current.idIsFromProps=a!==void 0,A.current.order=h,B.onCollapse=p,B.onExpand=g,B.onResize=f,G.collapsedSize=n,G.collapsible=o,G.defaultSize=s,G.maxSize=l,G.minSize=u,(K.collapsedSize!==G.collapsedSize||K.collapsible!==G.collapsible||K.maxSize!==G.maxSize||K.minSize!==G.minSize)&&S(A.current,K)}),Re(()=>{const B=A.current;return b(B),()=>{M(B)}},[h,D,b,M]),c.useImperativeHandle(r,()=>({collapse:()=>{m(A.current)},expand:B=>{y(A.current,B)},getId(){return D},getSize(){return E(A.current)},isCollapsed(){return I(A.current)},isExpanded(){return!I(A.current)},resize:B=>{C(A.current,B)}}),[m,y,E,I,D,C]);const H=P(A.current,s);return c.createElement(v,{...w,children:e,className:t,id:D,style:{...H,...x},[X.groupId]:N,[X.panel]:"",[X.panelCollapsible]:o||void 0,[X.panelId]:D,[X.panelSize]:parseFloat(""+H.flexGrow).toFixed(1)})}const kt=c.forwardRef((e,t)=>c.createElement(fo,{...e,forwardedRef:t}));fo.displayName="Panel";kt.displayName="forwardRef(Panel)";let zt=null,at=-1,be=null;function oi(e,t){if(t){const n=(t&xo)!==0,o=(t&vo)!==0,s=(t&yo)!==0,r=(t&wo)!==0;if(n)return s?"se-resize":r?"ne-resize":"e-resize";if(o)return s?"sw-resize":r?"nw-resize":"w-resize";if(s)return"s-resize";if(r)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function ri(){be!==null&&(document.head.removeChild(be),zt=null,be=null,at=-1)}function St(e,t){var n,o;const s=oi(e,t);if(zt!==s){if(zt=s,be===null&&(be=document.createElement("style"),document.head.appendChild(be)),at>=0){var r;(r=be.sheet)===null||r===void 0||r.removeRule(at)}at=(n=(o=be.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${s} !important;}`))!==null&&n!==void 0?n:-1}}function po(e){return e.type==="keydown"}function ho(e){return e.type.startsWith("pointer")}function go(e){return e.type.startsWith("mouse")}function xt(e){if(ho(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(go(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function si(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function ii(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function ai(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:En(e),b:En(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;F(o,"Stacking order can only be calculated for elements with a common ancestor");const s={a:Pn(Cn(n.a)),b:Pn(Cn(n.b))};if(s.a===s.b){const r=o.childNodes,a={a:n.a.at(-1),b:n.b.at(-1)};let l=r.length;for(;l--;){const u=r[l];if(u===a.a)return 1;if(u===a.b)return-1}}return Math.sign(s.a-s.b)}const li=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function ci(e){var t;const n=getComputedStyle((t=mo(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function ui(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||ci(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||li.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function Cn(e){let t=e.length;for(;t--;){const n=e[t];if(F(n,"Missing node"),ui(n))return n}return null}function Pn(e){return e&&Number(getComputedStyle(e).zIndex)||0}function En(e){const t=[];for(;e;)t.push(e),e=mo(e);return t}function mo(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const xo=1,vo=2,yo=4,wo=8,di=si()==="coarse";let ue=[],ze=!1,Ne=new Map,vt=new Map;const qe=new Set;function fi(e,t,n,o,s){var r;const{ownerDocument:a}=t,l={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:s},u=(r=Ne.get(a))!==null&&r!==void 0?r:0;return Ne.set(a,u+1),qe.add(l),dt(),function(){var g;vt.delete(e),qe.delete(l);const f=(g=Ne.get(a))!==null&&g!==void 0?g:1;if(Ne.set(a,f-1),dt(),f===1&&Ne.delete(a),ue.includes(l)){const h=ue.indexOf(l);h>=0&&ue.splice(h,1),Jt(),s("up",!0,null)}}}function pi(e){const{target:t}=e,{x:n,y:o}=xt(e);ze=!0,Zt({target:t,x:n,y:o}),dt(),ue.length>0&&(ft("down",e),e.preventDefault(),bo(t)||e.stopImmediatePropagation())}function It(e){const{x:t,y:n}=xt(e);if(ze&&e.buttons===0&&(ze=!1,ft("up",e)),!ze){const{target:o}=e;Zt({target:o,x:t,y:n})}ft("move",e),Jt(),ue.length>0&&e.preventDefault()}function Nt(e){const{target:t}=e,{x:n,y:o}=xt(e);vt.clear(),ze=!1,ue.length>0&&(e.preventDefault(),bo(t)||e.stopImmediatePropagation()),ft("up",e),Zt({target:t,x:n,y:o}),Jt(),dt()}function bo(e){let t=e;for(;t;){if(t.hasAttribute(X.resizeHandle))return!0;t=t.parentElement}return!1}function Zt({target:e,x:t,y:n}){ue.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),qe.forEach(s=>{const{element:r,hitAreaMargins:a}=s,l=r.getBoundingClientRect(),{bottom:u,left:p,right:g,top:f}=l,h=di?a.coarse:a.fine;if(t>=p-h&&t<=g+h&&n>=f-h&&n<=u+h){if(o!==null&&document.contains(o)&&r!==o&&!r.contains(o)&&!o.contains(r)&&ai(o,r)>0){let v=o,w=!1;for(;v&&!v.contains(r);){if(ii(v.getBoundingClientRect(),l)){w=!0;break}v=v.parentElement}if(w)return}ue.push(s)}})}function Mt(e,t){vt.set(e,t)}function Jt(){let e=!1,t=!1;ue.forEach(o=>{const{direction:s}=o;s==="horizontal"?e=!0:t=!0});let n=0;vt.forEach(o=>{n|=o}),e&&t?St("intersection",n):e?St("horizontal",n):t?St("vertical",n):ri()}let Rt=new AbortController;function dt(){Rt.abort(),Rt=new AbortController;const e={capture:!0,signal:Rt.signal};qe.size&&(ze?(ue.length>0&&Ne.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",Nt,e),o.addEventListener("pointerleave",It,e),o.addEventListener("pointermove",It,e))}),window.addEventListener("pointerup",Nt,e),window.addEventListener("pointercancel",Nt,e)):Ne.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",pi,e),o.addEventListener("pointermove",It,e))}))}function ft(e,t){qe.forEach(n=>{const{setResizeHandlerState:o}=n,s=ue.includes(n);o(e,s,t)})}function hi(){const[e,t]=c.useState(0);return c.useCallback(()=>t(n=>n+1),[])}function F(e,t){if(!e)throw console.error(t),Error(t)}function Ae(e,t,n=Xt){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function ge(e,t,n=Xt){return Ae(e,t,n)===0}function ae(e,t,n){return Ae(e,t,n)===0}function gi(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const s=e[o],r=t[o];if(!ae(s,r,n))return!1}return!0}function Le({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];F(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:s=0,collapsible:r,maxSize:a=100,minSize:l=0}=o;if(Ae(n,l)<0)if(r){const u=(s+l)/2;Ae(n,u)<0?n=s:n=l}else n=l;return n=Math.min(a,n),n=parseFloat(n.toFixed(Xt)),n}function Be({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:s,trigger:r}){if(ae(e,0))return t;const a=[...t],[l,u]=o;F(l!=null,"Invalid first pivot index"),F(u!=null,"Invalid second pivot index");let p=0;if(r==="keyboard"){{const f=e<0?u:l,h=n[f];F(h,`Panel constraints not found for index ${f}`);const{collapsedSize:x=0,collapsible:v,minSize:w=0}=h;if(v){const d=t[f];if(F(d!=null,`Previous layout not found for panel index ${f}`),ae(d,x)){const m=w-d;Ae(m,Math.abs(e))>0&&(e=e<0?0-m:m)}}}{const f=e<0?l:u,h=n[f];F(h,`No panel constraints found for index ${f}`);const{collapsedSize:x=0,collapsible:v,minSize:w=0}=h;if(v){const d=t[f];if(F(d!=null,`Previous layout not found for panel index ${f}`),ae(d,w)){const m=d-x;Ae(m,Math.abs(e))>0&&(e=e<0?0-m:m)}}}}{const f=e<0?1:-1;let h=e<0?u:l,x=0;for(;;){const w=t[h];F(w!=null,`Previous layout not found for panel index ${h}`);const m=Le({panelConstraints:n,panelIndex:h,size:100})-w;if(x+=m,h+=f,h<0||h>=n.length)break}const v=Math.min(Math.abs(e),Math.abs(x));e=e<0?0-v:v}{let h=e<0?l:u;for(;h>=0&&h<n.length;){const x=Math.abs(e)-Math.abs(p),v=t[h];F(v!=null,`Previous layout not found for panel index ${h}`);const w=v-x,d=Le({panelConstraints:n,panelIndex:h,size:w});if(!ae(v,d)&&(p+=v-d,a[h]=d,p.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?h--:h++}}if(gi(s,a))return s;{const f=e<0?u:l,h=t[f];F(h!=null,`Previous layout not found for panel index ${f}`);const x=h+p,v=Le({panelConstraints:n,panelIndex:f,size:x});if(a[f]=v,!ae(v,x)){let w=x-v,m=e<0?u:l;for(;m>=0&&m<n.length;){const y=a[m];F(y!=null,`Previous layout not found for panel index ${m}`);const E=y+w,P=Le({panelConstraints:n,panelIndex:m,size:E});if(ae(y,P)||(w-=P-y,a[m]=P),ae(w,0))break;e>0?m--:m++}}}const g=a.reduce((f,h)=>h+f,0);return ae(g,100)?a:s}function mi({layout:e,panelsArray:t,pivotIndices:n}){let o=0,s=100,r=0,a=0;const l=n[0];F(l!=null,"No pivot index found"),t.forEach((f,h)=>{const{constraints:x}=f,{maxSize:v=100,minSize:w=0}=x;h===l?(o=w,s=v):(r+=w,a+=v)});const u=Math.min(s,100-r),p=Math.max(o,100-a),g=e[l];return{valueMax:u,valueMin:p,valueNow:g}}function Ze(e,t=document){return Array.from(t.querySelectorAll(`[${X.resizeHandleId}][data-panel-group-id="${e}"]`))}function Co(e,t,n=document){const s=Ze(e,n).findIndex(r=>r.getAttribute(X.resizeHandleId)===t);return s??null}function Po(e,t,n){const o=Co(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function Eo(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function yt(e,t=document){const n=t.querySelector(`[${X.resizeHandleId}="${e}"]`);return n||null}function xi(e,t,n,o=document){var s,r,a,l;const u=yt(t,o),p=Ze(e,o),g=u?p.indexOf(u):-1,f=(s=(r=n[g])===null||r===void 0?void 0:r.id)!==null&&s!==void 0?s:null,h=(a=(l=n[g+1])===null||l===void 0?void 0:l.id)!==null&&a!==void 0?a:null;return[f,h]}function vi({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:s,panelGroupElement:r,setLayout:a}){c.useRef({didWarnAboutMissingResizeHandle:!1}),Re(()=>{if(!r)return;const l=Ze(n,r);for(let u=0;u<s.length-1;u++){const{valueMax:p,valueMin:g,valueNow:f}=mi({layout:o,panelsArray:s,pivotIndices:[u,u+1]}),h=l[u];if(h!=null){const x=s[u];F(x,`No panel data found for index "${u}"`),h.setAttribute("aria-controls",x.id),h.setAttribute("aria-valuemax",""+Math.round(p)),h.setAttribute("aria-valuemin",""+Math.round(g)),h.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{l.forEach((u,p)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,o,s,r]),c.useEffect(()=>{if(!r)return;const l=t.current;F(l,"Eager values not found");const{panelDataArray:u}=l,p=Eo(n,r);F(p!=null,`No group found for id "${n}"`);const g=Ze(n,r);F(g,`No resize handles found for group id "${n}"`);const f=g.map(h=>{const x=h.getAttribute(X.resizeHandleId);F(x,"Resize handle element has no handle id attribute");const[v,w]=xi(n,x,u,r);if(v==null||w==null)return()=>{};const d=m=>{if(!m.defaultPrevented)switch(m.key){case"Enter":{m.preventDefault();const y=u.findIndex(E=>E.id===v);if(y>=0){const E=u[y];F(E,`No panel data found for index ${y}`);const P=o[y],{collapsedSize:N=0,collapsible:I,minSize:S=0}=E.constraints;if(P!=null&&I){const b=Be({delta:ae(P,N)?S-N:N-P,initialLayout:o,panelConstraints:u.map(C=>C.constraints),pivotIndices:Po(n,x,r),prevLayout:o,trigger:"keyboard"});o!==b&&a(b)}}break}}};return h.addEventListener("keydown",d),()=>{h.removeEventListener("keydown",d)}});return()=>{f.forEach(h=>h())}},[r,e,t,n,o,s,a])}function Sn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function So(e,t){const n=e==="horizontal",{x:o,y:s}=xt(t);return n?o:s}function yi(e,t,n,o,s){const r=n==="horizontal",a=yt(t,s);F(a,`No resize handle element found for id "${t}"`);const l=a.getAttribute(X.groupId);F(l,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=o;const p=So(n,e),g=Eo(l,s);F(g,`No group element found for id "${l}"`);const f=g.getBoundingClientRect(),h=r?f.width:f.height;return(p-u)/h*100}function wi(e,t,n,o,s,r){if(po(e)){const a=n==="horizontal";let l=0;e.shiftKey?l=100:s!=null?l=s:l=10;let u=0;switch(e.key){case"ArrowDown":u=a?0:l;break;case"ArrowLeft":u=a?-l:0;break;case"ArrowRight":u=a?l:0;break;case"ArrowUp":u=a?0:-l;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return o==null?0:yi(e,t,n,o,r)}function bi({panelDataArray:e}){const t=Array(e.length),n=e.map(r=>r.constraints);let o=0,s=100;for(let r=0;r<e.length;r++){const a=n[r];F(a,`Panel constraints not found for index ${r}`);const{defaultSize:l}=a;l!=null&&(o++,t[r]=l,s-=l)}for(let r=0;r<e.length;r++){const a=n[r];F(a,`Panel constraints not found for index ${r}`);const{defaultSize:l}=a;if(l!=null)continue;const u=e.length-o,p=s/u;o++,t[r]=p,s-=p}return t}function Oe(e,t,n){t.forEach((o,s)=>{const r=e[s];F(r,`Panel data not found for index ${s}`);const{callbacks:a,constraints:l,id:u}=r,{collapsedSize:p=0,collapsible:g}=l,f=n[u];if(f==null||o!==f){n[u]=o;const{onCollapse:h,onExpand:x,onResize:v}=a;v&&v(o,f),g&&(h||x)&&(x&&(f==null||ge(f,p))&&!ge(o,p)&&x(),h&&(f==null||!ge(f,p))&&ge(o,p)&&h())}})}function it(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Ci({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:s,precision:r=3}){const a=n[s];let l;return a==null?l=e!=null?e.toPrecision(r):"1":o.length===1?l="1":l=a.toPrecision(r),{flexBasis:0,flexGrow:l,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function Pi(e,t=10){let n=null;return(...s)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...s)},t)}}function In(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function Io(e){return`react-resizable-panels:${e}`}function No(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:s,order:r}=t;return s?o:r?`${r}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function Mo(e,t){try{const n=Io(e),o=t.getItem(n);if(o){const s=JSON.parse(o);if(typeof s=="object"&&s!=null)return s}}catch{}return null}function Ei(e,t,n){var o,s;const r=(o=Mo(e,n))!==null&&o!==void 0?o:{},a=No(t);return(s=r[a])!==null&&s!==void 0?s:null}function Si(e,t,n,o,s){var r;const a=Io(e),l=No(t),u=(r=Mo(e,s))!==null&&r!==void 0?r:{};u[l]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{s.setItem(a,JSON.stringify(u))}catch(p){console.error(p)}}function Nn({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((r,a)=>r+a,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(r=>`${r}%`).join(", ")}`);if(!ae(o,100)&&n.length>0)for(let r=0;r<t.length;r++){const a=n[r];F(a!=null,`No layout data found for index ${r}`);const l=100/o*a;n[r]=l}let s=0;for(let r=0;r<t.length;r++){const a=n[r];F(a!=null,`No layout data found for index ${r}`);const l=Le({panelConstraints:t,panelIndex:r,size:a});a!=l&&(s+=a-l,n[r]=l)}if(!ae(s,0))for(let r=0;r<t.length;r++){const a=n[r];F(a!=null,`No layout data found for index ${r}`);const l=a+s,u=Le({panelConstraints:t,panelIndex:r,size:l});if(a!==u&&(s-=u-a,n[r]=u,ae(s,0)))break}return n}const Ii=100,Ke={getItem:e=>(In(Ke),Ke.getItem(e)),setItem:(e,t)=>{In(Ke),Ke.setItem(e,t)}},Mn={};function Ro({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:s,id:r=null,onLayout:a=null,keyboardResizeBy:l=null,storage:u=Ke,style:p,tagName:g="div",...f}){const h=qt(r),x=c.useRef(null),[v,w]=c.useState(null),[d,m]=c.useState([]),y=hi(),E=c.useRef({}),P=c.useRef(new Map),N=c.useRef(0),I=c.useRef({autoSaveId:e,direction:o,dragState:v,id:h,keyboardResizeBy:l,onLayout:a,storage:u}),S=c.useRef({layout:d,panelDataArray:[],panelDataArrayChanged:!1});c.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),c.useImperativeHandle(s,()=>({getId:()=>I.current.id,getLayout:()=>{const{layout:R}=S.current;return R},setLayout:R=>{const{onLayout:T}=I.current,{layout:k,panelDataArray:_}=S.current,j=Nn({layout:R,panelConstraints:_.map(L=>L.constraints)});Sn(k,j)||(m(j),S.current.layout=j,T&&T(j),Oe(_,j,E.current))}}),[]),Re(()=>{I.current.autoSaveId=e,I.current.direction=o,I.current.dragState=v,I.current.id=h,I.current.onLayout=a,I.current.storage=u}),vi({committedValuesRef:I,eagerValuesRef:S,groupId:h,layout:d,panelDataArray:S.current.panelDataArray,setLayout:m,panelGroupElement:x.current}),c.useEffect(()=>{const{panelDataArray:R}=S.current;if(e){if(d.length===0||d.length!==R.length)return;let T=Mn[e];T==null&&(T=Pi(Si,Ii),Mn[e]=T);const k=[...R],_=new Map(P.current);T(e,k,_,d,u)}},[e,d,u]),c.useEffect(()=>{});const b=c.useCallback(R=>{const{onLayout:T}=I.current,{layout:k,panelDataArray:_}=S.current;if(R.constraints.collapsible){const j=_.map(ne=>ne.constraints),{collapsedSize:L=0,panelSize:z,pivotIndices:U}=Ie(_,R,k);if(F(z!=null,`Panel size not found for panel "${R.id}"`),!ge(z,L)){P.current.set(R.id,z);const oe=Te(_,R)===_.length-1?z-L:L-z,W=Be({delta:oe,initialLayout:k,panelConstraints:j,pivotIndices:U,prevLayout:k,trigger:"imperative-api"});it(k,W)||(m(W),S.current.layout=W,T&&T(W),Oe(_,W,E.current))}}},[]),C=c.useCallback((R,T)=>{const{onLayout:k}=I.current,{layout:_,panelDataArray:j}=S.current;if(R.constraints.collapsible){const L=j.map(ee=>ee.constraints),{collapsedSize:z=0,panelSize:U=0,minSize:ne=0,pivotIndices:oe}=Ie(j,R,_),W=T??ne;if(ge(U,z)){const ee=P.current.get(R.id),he=ee!=null&&ee>=W?ee:W,Se=Te(j,R)===j.length-1?U-he:he-U,Q=Be({delta:Se,initialLayout:_,panelConstraints:L,pivotIndices:oe,prevLayout:_,trigger:"imperative-api"});it(_,Q)||(m(Q),S.current.layout=Q,k&&k(Q),Oe(j,Q,E.current))}}},[]),M=c.useCallback(R=>{const{layout:T,panelDataArray:k}=S.current,{panelSize:_}=Ie(k,R,T);return F(_!=null,`Panel size not found for panel "${R.id}"`),_},[]),D=c.useCallback((R,T)=>{const{panelDataArray:k}=S.current,_=Te(k,R);return Ci({defaultSize:T,dragState:v,layout:d,panelData:k,panelIndex:_})},[v,d]),A=c.useCallback(R=>{const{layout:T,panelDataArray:k}=S.current,{collapsedSize:_=0,collapsible:j,panelSize:L}=Ie(k,R,T);return F(L!=null,`Panel size not found for panel "${R.id}"`),j===!0&&ge(L,_)},[]),H=c.useCallback(R=>{const{layout:T,panelDataArray:k}=S.current,{collapsedSize:_=0,collapsible:j,panelSize:L}=Ie(k,R,T);return F(L!=null,`Panel size not found for panel "${R.id}"`),!j||Ae(L,_)>0},[]),B=c.useCallback(R=>{const{panelDataArray:T}=S.current;T.push(R),T.sort((k,_)=>{const j=k.order,L=_.order;return j==null&&L==null?0:j==null?-1:L==null?1:j-L}),S.current.panelDataArrayChanged=!0,y()},[y]);Re(()=>{if(S.current.panelDataArrayChanged){S.current.panelDataArrayChanged=!1;const{autoSaveId:R,onLayout:T,storage:k}=I.current,{layout:_,panelDataArray:j}=S.current;let L=null;if(R){const U=Ei(R,j,k);U&&(P.current=new Map(Object.entries(U.expandToSizes)),L=U.layout)}L==null&&(L=bi({panelDataArray:j}));const z=Nn({layout:L,panelConstraints:j.map(U=>U.constraints)});Sn(_,z)||(m(z),S.current.layout=z,T&&T(z),Oe(j,z,E.current))}}),Re(()=>{const R=S.current;return()=>{R.layout=[]}},[]);const G=c.useCallback(R=>{let T=!1;const k=x.current;return k&&window.getComputedStyle(k,null).getPropertyValue("direction")==="rtl"&&(T=!0),function(j){j.preventDefault();const L=x.current;if(!L)return()=>null;const{direction:z,dragState:U,id:ne,keyboardResizeBy:oe,onLayout:W}=I.current,{layout:ee,panelDataArray:he}=S.current,{initialLayout:ve}=U??{},Se=Po(ne,R,L);let Q=wi(j,R,z,U,oe,L);const le=z==="horizontal";le&&T&&(Q=-Q);const ts=he.map(ns=>ns.constraints),Ge=Be({delta:Q,initialLayout:ve??ee,panelConstraints:ts,pivotIndices:Se,prevLayout:ee,trigger:po(j)?"keyboard":"mouse-or-touch"}),vn=!it(ee,Ge);(ho(j)||go(j))&&N.current!=Q&&(N.current=Q,!vn&&Q!==0?le?Mt(R,Q<0?xo:vo):Mt(R,Q<0?yo:wo):Mt(R,0)),vn&&(m(Ge),S.current.layout=Ge,W&&W(Ge),Oe(he,Ge,E.current))}},[]),K=c.useCallback((R,T)=>{const{onLayout:k}=I.current,{layout:_,panelDataArray:j}=S.current,L=j.map(ee=>ee.constraints),{panelSize:z,pivotIndices:U}=Ie(j,R,_);F(z!=null,`Panel size not found for panel "${R.id}"`);const oe=Te(j,R)===j.length-1?z-T:T-z,W=Be({delta:oe,initialLayout:_,panelConstraints:L,pivotIndices:U,prevLayout:_,trigger:"imperative-api"});it(_,W)||(m(W),S.current.layout=W,k&&k(W),Oe(j,W,E.current))},[]),q=c.useCallback((R,T)=>{const{layout:k,panelDataArray:_}=S.current,{collapsedSize:j=0,collapsible:L}=T,{collapsedSize:z=0,collapsible:U,maxSize:ne=100,minSize:oe=0}=R.constraints,{panelSize:W}=Ie(_,R,k);W!=null&&(L&&U&&ge(W,j)?ge(j,z)||K(R,z):W<oe?K(R,oe):W>ne&&K(R,ne))},[K]),V=c.useCallback((R,T)=>{const{direction:k}=I.current,{layout:_}=S.current;if(!x.current)return;const j=yt(R,x.current);F(j,`Drag handle element not found for id "${R}"`);const L=So(k,T);w({dragHandleId:R,dragHandleRect:j.getBoundingClientRect(),initialCursorPosition:L,initialLayout:_})},[]),O=c.useCallback(()=>{w(null)},[]),Z=c.useCallback(R=>{const{panelDataArray:T}=S.current,k=Te(T,R);k>=0&&(T.splice(k,1),delete E.current[R.id],S.current.panelDataArrayChanged=!0,y())},[y]),Y=c.useMemo(()=>({collapsePanel:b,direction:o,dragState:v,expandPanel:C,getPanelSize:M,getPanelStyle:D,groupId:h,isPanelCollapsed:A,isPanelExpanded:H,reevaluatePanelConstraints:q,registerPanel:B,registerResizeHandle:G,resizePanel:K,startDragging:V,stopDragging:O,unregisterPanel:Z,panelGroupElement:x.current}),[b,v,o,C,M,D,h,A,H,q,B,G,K,V,O,Z]),J={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return c.createElement(mt.Provider,{value:Y},c.createElement(g,{...f,children:t,className:n,id:r,ref:x,style:{...J,...p},[X.group]:"",[X.groupDirection]:o,[X.groupId]:h}))}const jo=c.forwardRef((e,t)=>c.createElement(Ro,{...e,forwardedRef:t}));Ro.displayName="PanelGroup";jo.displayName="forwardRef(PanelGroup)";function Te(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function Ie(e,t,n){const o=Te(e,t),r=o===e.length-1?[o-1,o]:[o,o+1],a=n[o];return{...t.constraints,panelSize:a,pivotIndices:r}}function Ni({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){c.useEffect(()=>{if(e||n==null||o==null)return;const s=yt(t,o);if(s==null)return;const r=a=>{if(!a.defaultPrevented)switch(a.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{a.preventDefault(),n(a);break}case"F6":{a.preventDefault();const l=s.getAttribute(X.groupId);F(l,`No group element found for id "${l}"`);const u=Ze(l,o),p=Co(l,t,o);F(p!==null,`No resize element found for id "${t}"`);const g=a.shiftKey?p>0?p-1:u.length-1:p+1<u.length?p+1:0;u[g].focus();break}}};return s.addEventListener("keydown",r),()=>{s.removeEventListener("keydown",r)}},[o,e,t,n])}function Ao({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:s,onBlur:r,onClick:a,onDragging:l,onFocus:u,onPointerDown:p,onPointerUp:g,style:f={},tabIndex:h=0,tagName:x="div",...v}){var w,d;const m=c.useRef(null),y=c.useRef({onClick:a,onDragging:l,onPointerDown:p,onPointerUp:g});c.useEffect(()=>{y.current.onClick=a,y.current.onDragging=l,y.current.onPointerDown=p,y.current.onPointerUp=g});const E=c.useContext(mt);if(E===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:P,groupId:N,registerResizeHandle:I,startDragging:S,stopDragging:b,panelGroupElement:C}=E,M=qt(s),[D,A]=c.useState("inactive"),[H,B]=c.useState(!1),[G,K]=c.useState(null),q=c.useRef({state:D});Re(()=>{q.current.state=D}),c.useEffect(()=>{if(n)K(null);else{const Y=I(M);K(()=>Y)}},[n,M,I]);const V=(w=o==null?void 0:o.coarse)!==null&&w!==void 0?w:15,O=(d=o==null?void 0:o.fine)!==null&&d!==void 0?d:5;c.useEffect(()=>{if(n||G==null)return;const Y=m.current;F(Y,"Element ref not attached");let J=!1;return fi(M,Y,P,{coarse:V,fine:O},(T,k,_)=>{if(!k){A("inactive");return}switch(T){case"down":{A("drag"),J=!1,F(_,'Expected event to be defined for "down" action'),S(M,_);const{onDragging:j,onPointerDown:L}=y.current;j==null||j(!0),L==null||L();break}case"move":{const{state:j}=q.current;J=!0,j!=="drag"&&A("hover"),F(_,'Expected event to be defined for "move" action'),G(_);break}case"up":{A("hover"),b();const{onClick:j,onDragging:L,onPointerUp:z}=y.current;L==null||L(!1),z==null||z(),J||j==null||j();break}}})},[V,P,n,O,I,M,G,S,b]),Ni({disabled:n,handleId:M,resizeHandler:G,panelGroupElement:C});const Z={touchAction:"none",userSelect:"none"};return c.createElement(x,{...v,children:e,className:t,id:s,onBlur:()=>{B(!1),r==null||r()},onFocus:()=>{B(!0),u==null||u()},ref:m,role:"separator",style:{...Z,...f},tabIndex:h,[X.groupDirection]:P,[X.groupId]:N,[X.resizeHandle]:"",[X.resizeHandleActive]:D==="drag"?"pointer":H?"keyboard":void 0,[X.resizeHandleEnabled]:!n,[X.resizeHandleId]:M,[X.resizeHandleState]:D})}Ao.displayName="PanelResizeHandle";const Mi=e=>{const t=fe[e];te.getState().init(e),Ve.getState().init(e),Ce.getState().init(),Xe.getState().init(),Pe.getState().init(e),t.initialState()};let jt=!1;const je=ws((e,t)=>({mousePosition:null,setMousePosition:n=>e({mousePosition:n}),initMouseTracking:n=>{if(jt)return;jt=!0,e({canvasContainer:n});const o=r=>{const a=n.getBoundingClientRect(),l=r.clientX-a.left,u=r.clientY-a.top;l>=0&&u>=0&&l<=a.width&&u<=a.height?t().setMousePosition({x:l,y:u,clientX:r.clientX,clientY:r.clientY}):t().setMousePosition(null)},s=()=>{t().setMousePosition(null)};return n.addEventListener("mousemove",o),n.addEventListener("mouseleave",s),()=>{n.removeEventListener("mousemove",o),n.removeEventListener("mouseleave",s),jt=!1,t().setMousePosition(null),e({canvasContainer:null})}},menuX:0,menuY:0,visible:!1,lastMenuPosition:null,canvasContainer:null,openAddMenu:(n,o)=>{const s=t();let r,a;if(n!==void 0&&o!==void 0)r=n,a=o;else if(s.mousePosition)r=s.mousePosition.clientX,a=s.mousePosition.clientY;else if(s.lastMenuPosition)r=s.lastMenuPosition.x,a=s.lastMenuPosition.y;else if(s.canvasContainer){const l=s.canvasContainer.getBoundingClientRect();r=l.left+l.width/2,a=l.top+l.height/2}else{console.warn("Cannot open add menu: no coordinates available and canvas container not found");return}r=r>window.innerWidth-274?window.innerWidth-274:r,a=a>window.innerHeight-284?window.innerHeight-284:a,e({menuX:r,menuY:a,visible:!0,lastMenuPosition:{x:r,y:a}})},closeAddMenu:()=>e({visible:!1})}));function Ri(e){const t=je(n=>n.initMouseTracking);c.useEffect(()=>{if(!e.current)return;const n=t(e.current);return()=>n==null?void 0:n()},[e,t])}function ji({id:e,sourceX:t,sourceY:n,targetX:o,targetY:s,sourcePosition:r,targetPosition:a,style:l={},markerEnd:u}){const[p,g,f]=Is({sourceX:t,sourceY:n,sourcePosition:r,targetX:o,targetY:s,targetPosition:a}),{setEdges:h}=pe(),x=()=>{h(v=>v.filter(w=>w.id!==e))};return i.jsxs(i.Fragment,{children:[i.jsx(Ns,{path:p,markerEnd:u,style:l}),i.jsx(Ms,{children:i.jsx("div",{className:"nodrag nopan pointer-events-auto absolute",style:{transform:`translate(-50%, -50%) translate(${g}px,${f}px)`},children:i.jsx("button",{className:"flex h-5 w-5 cursor-pointer items-center justify-center rounded-full border-3 border-[#14141d] bg-slate-800 text-xs text-slate-400 hover:bg-slate-900",onClick:x,children:"Ã—"})})})]})}const Ai={Deletable:ji};function Do(e){const t=Object.keys(fe),n=t.indexOf(e);if(n!==-1)return{prev:n===0?void 0:t[n-1],next:n===t.length-1?void 0:t[n+1]}}const de=et.forwardRef(({tooltip:e,className:t,children:n,side:o,...s},r)=>i.jsxs(Rs,{children:[i.jsx(js,{asChild:!0,children:i.jsx("button",{ref:r,className:Ue("cursor-pointer rounded bg-slate-800 p-2 outline outline-slate-500 hover:bg-slate-900",t),...s,children:n})}),i.jsx(As,{side:o,children:typeof e=="string"?i.jsx("p",{children:e}):e})]})),Di=()=>{const e=te(o=>o.currentLevel),t=Do(e),n=te(o=>o.pause);return i.jsxs(gt,{position:"top-center",className:"flex flex-row items-center justify-center gap-2",children:[(t==null?void 0:t.prev)&&i.jsx(ke,{to:`/levels/${t==null?void 0:t.prev}`,onClick:()=>n(),children:i.jsx(de,{tooltip:"Previous Level",side:"left",className:"text-white",children:i.jsx(ss,{className:"text-white"})})}),i.jsx(ke,{to:"/",children:i.jsx(de,{tooltip:"Home",side:"bottom",children:i.jsx(is,{className:"text-white"})})}),(t==null?void 0:t.next)&&i.jsx(ke,{to:`/levels/${t==null?void 0:t.next}`,onClick:()=>n(),children:i.jsx(de,{tooltip:"Next Level",side:"right",children:i.jsx(as,{className:"text-white"})})})]})};var _i=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oi=_i.reduce((e,t)=>{const n=tt(`Primitive.${t}`),o=c.forwardRef((s,r)=>{const{asChild:a,...l}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Ti="Arrow",_o=c.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...r}=e;return i.jsx(Oi.svg,{...r,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});_o.displayName=Ti;var Li=_o,ki=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Oo=ki.reduce((e,t)=>{const n=tt(`Primitive.${t}`),o=c.forwardRef((s,r)=>{const{asChild:a,...l}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Qt="Popper",[To,Lo]=$e(Qt),[zi,ko]=To(Qt),zo=e=>{const{__scopePopper:t,children:n}=e,[o,s]=c.useState(null);return i.jsx(zi,{scope:t,anchor:o,onAnchorChange:s,children:n})};zo.displayName=Qt;var Fo="PopperAnchor",$o=c.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,r=ko(Fo,n),a=c.useRef(null),l=re(t,a);return c.useEffect(()=>{r.onAnchorChange((o==null?void 0:o.current)||a.current)}),o?null:i.jsx(Oo.div,{...s,ref:l})});$o.displayName=Fo;var en="PopperContent",[Fi,$i]=To(en),Ho=c.forwardRef((e,t)=>{var j,L,z,U,ne,oe;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:r="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:v,...w}=e,d=ko(en,n),[m,y]=c.useState(null),E=re(t,W=>y(W)),[P,N]=c.useState(null),I=Kn(P),S=(I==null?void 0:I.width)??0,b=(I==null?void 0:I.height)??0,C=o+(r!=="center"?"-"+r:""),M=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},D=Array.isArray(p)?p:[p],A=D.length>0,H={padding:M,boundary:D.filter(Gi),altBoundary:A},{refs:B,floatingStyles:G,placement:K,isPositioned:q,middlewareData:V}=Wn({strategy:"fixed",placement:C,whileElementsMounted:(...W)=>Qn(...W,{animationFrame:x==="always"}),elements:{reference:d.anchor},middleware:[Un({mainAxis:s+b,alignmentAxis:a}),u&&Yn({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Jn():void 0,...H}),u&&Vn({...H}),Xn({...H,apply:({elements:W,rects:ee,availableWidth:he,availableHeight:ve})=>{const{width:Se,height:Q}=ee.reference,le=W.floating.style;le.setProperty("--radix-popper-available-width",`${he}px`),le.setProperty("--radix-popper-available-height",`${ve}px`),le.setProperty("--radix-popper-anchor-width",`${Se}px`),le.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),P&&qn({element:P,padding:l}),Bi({arrowWidth:S,arrowHeight:b}),h&&Zn({strategy:"referenceHidden",...H})]}),[O,Z]=Ko(K),Y=me(v);Ye(()=>{q&&(Y==null||Y())},[q,Y]);const J=(j=V.arrow)==null?void 0:j.x,R=(L=V.arrow)==null?void 0:L.y,T=((z=V.arrow)==null?void 0:z.centerOffset)!==0,[k,_]=c.useState();return Ye(()=>{m&&_(window.getComputedStyle(m).zIndex)},[m]),i.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:k,"--radix-popper-transform-origin":[(U=V.transformOrigin)==null?void 0:U.x,(ne=V.transformOrigin)==null?void 0:ne.y].join(" "),...((oe=V.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Fi,{scope:n,placedSide:O,onArrowChange:N,arrowX:J,arrowY:R,shouldHideArrow:T,children:i.jsx(Oo.div,{"data-side":O,"data-align":Z,...w,ref:E,style:{...w.style,animation:q?void 0:"none"}})})})});Ho.displayName=en;var Go="PopperArrow",Hi={top:"bottom",right:"left",bottom:"top",left:"right"},Bo=c.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,r=$i(Go,o),a=Hi[r.placedSide];return i.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:i.jsx(Li,{...s,ref:n,style:{...s.style,display:"block"}})})});Bo.displayName=Go;function Gi(e){return e!==null}var Bi=e=>({name:"transformOrigin",options:e,fn(t){var d,m,y;const{placement:n,rects:o,middlewareData:s}=t,a=((d=s.arrow)==null?void 0:d.centerOffset)!==0,l=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[p,g]=Ko(n),f={start:"0%",center:"50%",end:"100%"}[g],h=(((m=s.arrow)==null?void 0:m.x)??0)+l/2,x=(((y=s.arrow)==null?void 0:y.y)??0)+u/2;let v="",w="";return p==="bottom"?(v=a?f:`${h}px`,w=`${-u}px`):p==="top"?(v=a?f:`${h}px`,w=`${o.floating.height+u}px`):p==="right"?(v=`${-u}px`,w=a?f:`${x}px`):p==="left"&&(v=`${o.floating.width+u}px`,w=a?f:`${x}px`),{data:{x:v,y:w}}}});function Ko(e){const[t,n="center"]=e.split("-");return[t,n]}var Ki=zo,Wo=$o,Wi=Ho,Ui=Bo,Yi=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Uo=Yi.reduce((e,t)=>{const n=tt(`Primitive.${t}`),o=c.forwardRef((s,r)=>{const{asChild:a,...l}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),wt="Popover",[Yo,Vc]=$e(wt,[Lo]),nt=Lo(),[Vi,Ee]=Yo(wt),tn=e=>{const{__scopePopover:t,children:n,open:o,defaultOpen:s,onOpenChange:r,modal:a=!1}=e,l=nt(t),u=c.useRef(null),[p,g]=c.useState(!1),[f,h]=Gt({prop:o,defaultProp:s??!1,onChange:r,caller:wt});return i.jsx(Ki,{...l,children:i.jsx(Vi,{scope:t,contentId:lt(),triggerRef:u,open:f,onOpenChange:h,onOpenToggle:c.useCallback(()=>h(x=>!x),[h]),hasCustomAnchor:p,onCustomAnchorAdd:c.useCallback(()=>g(!0),[]),onCustomAnchorRemove:c.useCallback(()=>g(!1),[]),modal:a,children:n})})};tn.displayName=wt;var Vo="PopoverAnchor",Xi=c.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Ee(Vo,n),r=nt(n),{onCustomAnchorAdd:a,onCustomAnchorRemove:l}=s;return c.useEffect(()=>(a(),()=>l()),[a,l]),i.jsx(Wo,{...r,...o,ref:t})});Xi.displayName=Vo;var Xo="PopoverTrigger",nn=c.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Ee(Xo,n),r=nt(n),a=re(t,s.triggerRef),l=i.jsx(Uo.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Qo(s.open),...o,ref:a,onClick:$(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:i.jsx(Wo,{asChild:!0,...r,children:l})});nn.displayName=Xo;var on="PopoverPortal",[qi,Zi]=Yo(on,{forceMount:void 0}),rn=e=>{const{__scopePopover:t,forceMount:n,children:o,container:s}=e,r=Ee(on,t);return i.jsx(qi,{scope:t,forceMount:n,children:i.jsx(He,{present:n||r.open,children:i.jsx(qs,{asChild:!0,container:s,children:o})})})};rn.displayName=on;var Fe="PopoverContent",sn=c.forwardRef((e,t)=>{const n=Zi(Fe,e.__scopePopover),{forceMount:o=n.forceMount,...s}=e,r=Ee(Fe,e.__scopePopover);return i.jsx(He,{present:o||r.open,children:r.modal?i.jsx(Qi,{...s,ref:t}):i.jsx(ea,{...s,ref:t})})});sn.displayName=Fe;var Ji=tt("PopoverContent.RemoveScroll"),Qi=c.forwardRef((e,t)=>{const n=Ee(Fe,e.__scopePopover),o=c.useRef(null),s=re(t,o),r=c.useRef(!1);return c.useEffect(()=>{const a=o.current;if(a)return $n(a)},[]),i.jsx(Hn,{as:Ji,allowPinchZoom:!0,children:i.jsx(qo,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:$(e.onCloseAutoFocus,a=>{var l;a.preventDefault(),r.current||(l=n.triggerRef.current)==null||l.focus()}),onPointerDownOutside:$(e.onPointerDownOutside,a=>{const l=a.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,p=l.button===2||u;r.current=p},{checkForDefaultPrevented:!1}),onFocusOutside:$(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),ea=c.forwardRef((e,t)=>{const n=Ee(Fe,e.__scopePopover),o=c.useRef(!1),s=c.useRef(!1);return i.jsx(qo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:r=>{var a,l;(a=e.onCloseAutoFocus)==null||a.call(e,r),r.defaultPrevented||(o.current||(l=n.triggerRef.current)==null||l.focus(),r.preventDefault()),o.current=!1,s.current=!1},onInteractOutside:r=>{var u,p;(u=e.onInteractOutside)==null||u.call(e,r),r.defaultPrevented||(o.current=!0,r.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=r.target;((p=n.triggerRef.current)==null?void 0:p.contains(a))&&r.preventDefault(),r.detail.originalEvent.type==="focusin"&&s.current&&r.preventDefault()}})}),qo=c.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:o,onOpenAutoFocus:s,onCloseAutoFocus:r,disableOutsidePointerEvents:a,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:p,onInteractOutside:g,...f}=e,h=Ee(Fe,n),x=nt(n);return Gn(),i.jsx(Zs,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:s,onUnmountAutoFocus:r,children:i.jsx(Js,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:g,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:p,onDismiss:()=>h.onOpenChange(!1),children:i.jsx(Wi,{"data-state":Qo(h.open),role:"dialog",id:h.contentId,...x,...f,ref:t,style:{...f.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Zo="PopoverClose",Jo=c.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=Ee(Zo,n);return i.jsx(Uo.button,{type:"button",...o,ref:t,onClick:$(e.onClick,()=>s.onOpenChange(!1))})});Jo.displayName=Zo;var ta="PopoverArrow",na=c.forwardRef((e,t)=>{const{__scopePopover:n,...o}=e,s=nt(n);return i.jsx(Ui,{...s,...o,ref:t})});na.displayName=ta;function Qo(e){return e?"open":"closed"}var oa=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ra=oa.reduce((e,t)=>{const n=tt(`Primitive.${t}`),o=c.forwardRef((s,r)=>{const{asChild:a,...l}=s,u=a?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(u,{...l,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),sa=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ia="VisuallyHidden",bt=c.forwardRef((e,t)=>i.jsx(ra.span,{...e,ref:t,style:{...sa,...e.style}}));bt.displayName=ia;const er=({title:e,trigger:t,defaultOpen:n,open:o,onOpenChange:s,desc:r,children:a})=>i.jsxs(Kt,{defaultOpen:n,open:o,onOpenChange:s,children:[i.jsx(Qs,{asChild:!0,children:t}),i.jsxs(Wt,{children:[i.jsx(uo,{className:"fixed inset-0 bg-black/25"}),i.jsxs(Ut,{className:"fixed top-1/2 left-1/2 flex w-1/2 -translate-x-1/2 -translate-y-1/2 flex-col gap-6 rounded-lg border-2 border-blue-300 bg-slate-800/85 p-8 font-mono text-white",children:[i.jsx(bt,{asChild:!0,children:i.jsx(Yt,{children:r})}),i.jsx(Vt,{className:"text-center text-4xl font-bold capitalize",children:e}),i.jsx("div",{id:"dialog",children:a}),i.jsx(Me,{asChild:!0,children:i.jsx("button",{className:"absolute top-2.5 right-2.5 inline-flex size-[25px] cursor-pointer appearance-none items-center justify-center rounded-full bg-slate-700 focus:outline-1 focus:outline-blue-300","aria-label":"Close",children:i.jsx(ls,{})})})]})]})]}),tr=({open:e,onOpenChange:t,trigger:n})=>{var x;const o=te(v=>v.currentLevel),s=((x=fe[o])==null?void 0:x.dialog)||["No dialog available for this level."],[r,a]=c.useState(0),l=s[r],[u,p]=c.useState("");c.useEffect(()=>{let v=0;const w=setInterval(()=>{v<=l.length?(p(l.slice(0,v)),v++):clearInterval(w)},10);return()=>{clearInterval(w),p("")}},[l]);const g=c.useRef(null),f=()=>{if(r<s.length-1){const v=r+1;a(v)}},h=()=>{if(r>0){const v=r-1;a(v)}};return i.jsx(er,{title:o,trigger:n,open:e,onOpenChange:t,desc:`This dialog displays the level goals and instructions for the
            ${o} level. You can close it by clicking the close button or
            pressing the escape key.`,children:i.jsxs("div",{className:"flex flex-col gap-5",children:[i.jsxs("div",{className:"flex flex-1 flex-row",children:[i.jsx("div",{className:"my-auto w-1/3",children:i.jsx("div",{style:{aspectRatio:"7 / 6",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),i.jsxs("div",{className:"relative my-auto h-36 w-full rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[i.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),i.jsx("p",{className:"h-full overflow-auto pr-2 text-lg italic [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-slate-500 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-slate-900",children:u})]})]}),i.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[i.jsx("button",{onClick:h,disabled:r===0,className:Ue("rounded-lg bg-slate-700/80 px-3 py-2 focus:outline-1 focus:outline-blue-300",r===0?"opacity-50":"cursor-pointer hover:bg-slate-600"),children:"Previous"}),r===s.length-1?i.jsx(Me,{asChild:!0,children:i.jsx("button",{ref:g,onClick:()=>{a(0)},className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"})}):i.jsx("button",{onClick:f,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next"})]})]})})},aa=()=>{const e=te(l=>l.currentLevel),t=te(l=>l.isPaused),n=te(l=>l.play),o=te(l=>l.pause),{undo:s,redo:r,clear:a}=Ve.temporal.getState();return i.jsxs(gt,{position:"top-left",className:"flex flex-col items-center justify-center gap-2",children:[i.jsx(de,{tooltip:"Play/Pause",side:"right",onClick:()=>{t?n():o()},children:t?i.jsx(cs,{className:"text-white"}):i.jsx(us,{className:"text-white"})}),i.jsxs(tn,{children:[i.jsx(nn,{asChild:!0,children:i.jsx(de,{tooltip:"Reset Level",side:"right",children:i.jsx(ds,{className:"text-white"})})}),i.jsx(rn,{children:i.jsx(sn,{side:"right",sideOffset:10,className:"mr-3",children:i.jsx("div",{className:"flex w-42 flex-col rounded bg-slate-800 p-2 font-mono text-white shadow-lg outline-1 outline-slate-700 outline-solid",children:i.jsx(Jo,{asChild:!0,children:i.jsx("button",{className:"hover:bg-jam-600 cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",onClick:()=>{Ve.getState().reset(e),Ce.getState().reset(),Xe.getState().reset(),Pe.getState().reset(e),te.getState().setLevelCompleted(!1),te.getState().init(e)},children:"Reset Level?"})})})})})]}),i.jsx(tr,{trigger:i.jsx(de,{tooltip:"Level Info",side:"right",children:i.jsx(fs,{className:"text-white"})})}),i.jsx(de,{tooltip:"Print Edges",side:"left",onClick:()=>{s()},children:i.jsx(yn,{className:"text-white"})}),i.jsx(de,{tooltip:"Print Edges",side:"left",onClick:()=>{r()},children:i.jsx(yn,{className:"-scale-x-100 text-white"})})]})};function an(e,t,n,o,s){if(!e||e.length===0)return;const r=new Map,a=[],l=[],u=e.filter(d=>d.type==="Group");a.push(...u.map(d=>{const m=Tt();return r.set(d.id,m),{...d,id:m,position:{x:d.position.x+50,y:d.position.y+50},data:{...d.data}}}));const p=e.filter(d=>d.type==="ForStart"),g=e.filter(d=>d.type==="ForEnd"),f=[];p.forEach(d=>{const m=g.find(y=>y.data.loopId===d.data.loopId);m&&f.push({start:d,end:m})}),f.forEach(d=>{const m=eo({x:d.start.parentId&&r.has(d.start.parentId)?d.start.position.x:d.start.position.x+50,y:d.start.parentId&&r.has(d.start.parentId)?d.start.position.y:d.start.position.y+50},{x:d.end.parentId&&r.has(d.end.parentId)?d.end.position.x:d.end.position.x+50,y:d.end.parentId&&r.has(d.end.parentId)?d.end.position.y:d.end.position.y+50},r.get(d.start.data.parentLoopId)??d.start.data.parentLoopId,r.get(d.start.parentId)??d.start.parentId,r.get(d.end.parentId)??d.end.parentId);a.push(...m.nodes),l.push(m.mainConnectorEdge),r.set(d.start.id,m.startId),r.set(d.end.id,m.endId),r.set(d.start.data.loopId,m.id)}),e.filter(d=>d.type!=="Group"&&d.type!=="ForStart"&&d.type!=="ForEnd").forEach(d=>{const m=Tt();r.set(d.id,m),a.push({...d,id:m,parentId:d.parentId?r.get(d.parentId)??d.parentId:void 0,position:{x:d.parentId&&r.has(d.parentId)?d.position.x:d.position.x+50,y:d.parentId&&r.has(d.parentId)?d.position.y:d.position.y+50},data:{...d.data,parentLoopId:r.get(d.data.parentLoopId)??d.data.parentLoopId}})});const x=Xe.getState().addHandle,v=Xe.getState().getHandles;f.forEach(d=>{const m=r.get(d.start.data.loopId);if(!m)return;v(d.start.data.loopId).forEach((E,P)=>{const N=x(m,P);r.set(E,N)})}),s(d=>d.concat(a).map(y=>({...y,selected:Array.from(r.values()).includes(y.id)}))),a.forEach(d=>{if(d.type==="Group"||d.data.parentLoopId===void 0)return;const m=n().concat(a).filter(y=>y.data.loopId===d.data.parentLoopId);l.push(...to(m,[d.id]))}),t().filter(d=>d.sourceHandle===wn||d.targetHandle===wn?!1:r.has(d.source)&&r.has(d.target)).forEach(d=>{const m=r.get(d.source),y=r.get(d.target),E=r.get(d.sourceHandle??"")??d.sourceHandle??null,P=r.get(d.targetHandle??"")??d.targetHandle??null;if(!m||!y)return;const N=bs({source:m,sourceHandle:E,target:y,targetHandle:P});l.push({...d,id:N,type:d.type,source:m,target:y,sourceHandle:E,targetHandle:P,animated:d.animated??!1,selectable:d.selectable??!0,style:{...d.style}})}),o(d=>d.concat(l).map(y=>({...y})))}const ln=({x:e,y:t,onClose:n,parentLoopId:o,children:s,parentId:r})=>{const a=te(C=>C.currentLevel),l=fe[a].availableNodes,u=Object.values(Ds).flat(),{addNodes:p,addEdges:g,screenToFlowPosition:f,getNodes:h,getNode:x}=pe(),v=c.useRef(null),[w,d]=c.useState(""),[m,y]=c.useState(0),[E,P]=c.useState(l.map(C=>({nodeType:C}))),N=x(r??"");c.useEffect(()=>{var C;(C=v.current)==null||C.focus()},[]),c.useEffect(()=>{const C=l.filter(A=>A.toLowerCase().includes(w.toLowerCase())).map(A=>({nodeType:A}));if(w===""||!l.some(A=>A==="Math"))return P(C);const M=u.filter(A=>A.toLowerCase().includes(w.toLowerCase())).map(A=>({nodeType:"Math",computeType:A})),D=[...C,...M];P(D),y(0)},[w]);const I=(C,M)=>{const D=f({x:e,y:t}),A={x:N?D.x-N.position.x:D.x,y:N?D.y-N.position.y:D.y},H={x:N?D.x-N.position.x+300:D.x+300,y:N?D.y-N.position.y:D.y},B=[],G=[];if(C==="ForLoop"){const K=eo(A,H,o,r);B.push(K.mainConnectorEdge),G.push(...K.nodes)}else G.push(S(C,M));if(p(G),o){const K=h().filter(q=>q.data.loopId===o);B.push(...to(K,G.map(q=>q.id)))}g(B),n()},S=(C,M)=>{const D=Tt(),A=f({x:e,y:t}),H={x:N?A.x-N.position.x:A.x,y:N?A.y-N.position.y:A.y};return{id:D,type:C,position:H,parentId:r,data:{initialComputeType:M,parentLoopId:o},height:C==="Group"?we.height:void 0,width:C==="Group"?we.width:void 0,selected:!1,dragging:!1}},b=C=>{if(C.key==="ArrowDown")C.preventDefault(),y(M=>(M+1)%E.length);else if(C.key==="ArrowUp")C.preventDefault(),y(M=>(M-1+E.length)%E.length);else if(C.key==="Enter"){C.preventDefault();const M=E[m];M&&I(M.nodeType,M.computeType)}};return c.useEffect(()=>(window.addEventListener("keydown",b),()=>window.removeEventListener("keydown",b)),[E,m]),i.jsxs("div",{className:"flex w-65 flex-col gap-2 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[i.jsx("div",{className:"shadow",children:i.jsx("input",{ref:v,type:"text",spellCheck:"false",placeholder:"Search",className:"w-full rounded bg-slate-900 p-2 text-sm text-white focus:border-gray-300 focus:ring-0 focus:outline-none",onChange:C=>d(C.target.value)})}),i.jsx("div",{className:"flex flex-col gap-1",children:E.map((C,M)=>i.jsx("button",{className:Ue("w-full cursor-pointer rounded px-2 py-1 text-left text-sm text-white",m===M?"bg-slate-700":"hover:bg-slate-700"),onClick:()=>I(C.nodeType,C.computeType),children:C.computeType?i.jsxs("span",{children:[i.jsx("span",{className:"text-slate-400",children:C.nodeType}),i.jsx(ps,{className:"inline-block h-4 w-4 text-slate-400"}),i.jsx("span",{className:"",children:C.computeType})]}):i.jsx(i.Fragment,{children:C.nodeType})},`add_node_${C}_${M}`))}),w===""&&i.jsx(i.Fragment,{children:s})]})},la=et.forwardRef(({nodeId:e,nodeType:t,nodeLoopId:n,x:o,y:s,onClose:r,nodeParentId:a},l)=>i.jsx("div",{ref:l,style:{position:"absolute",top:s,left:o,zIndex:1e3},children:t==="ForStart"||t==="ForEnd"?i.jsxs(ln,{x:o,y:s,onClose:r,parentLoopId:n,parentId:a,children:[i.jsx("hr",{className:"mx-auto h-1 w-44 rounded-sm border-0 bg-slate-700"}),i.jsx(Rn,{nodeId:e,onClose:r})]}):i.jsx("div",{className:"flex w-36 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:i.jsx(Rn,{nodeId:e,onClose:r})})})),Rn=({nodeId:e,onClose:t})=>{const{getNode:n,getNodes:o,getEdges:s,setNodes:r,setEdges:a}=pe(),l=c.useCallback(()=>{const p=n(e);if(!p)return;const g=o().filter(f=>f.id===p.id||f.parentId===p.id||(f.data.loopId===p.data.loopId||f.data.parentLoopId===p.data.loopId)&&p.data.loopId!=null);an(g,s,o,a,r),t()},[s,n,o,e,t,a,r]),u=c.useCallback(()=>{var g;const p=[e];if(((g=n(e))==null?void 0:g.type)==="Group"){const f=o().filter(x=>x.parentId===e),h=n(e);r(x=>x.map(v=>f.some(w=>w.id===v.id)?{...v,position:{x:h?v.position.x+h.position.x:v.position.x,y:h?v.position.y+h.position.y:v.position.y},parentId:void 0}:v))}r(f=>f.filter(h=>!p.includes(h.id))),a(f=>f.filter(h=>!(p.includes(h.source)||p.includes(h.target)))),t()},[e,n,r,a,t,o]);return i.jsxs(i.Fragment,{children:[i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:l,children:[i.jsx("span",{children:"Duplicate"}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:xe.isMac?"Shift+D":"Ctrl+D"})]}),i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[i.jsx("span",{children:"Delete"}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})},ca=et.forwardRef(({x:e,y:t,onClose:n},o)=>i.jsx("div",{ref:o,style:{position:"absolute",top:t,left:e,zIndex:1e3},children:i.jsx(ln,{onClose:n,x:e,y:t})}));var ua="DismissableLayer",Ft="dismissableLayer.update",da="dismissableLayer.pointerDownOutside",fa="dismissableLayer.focusOutside",jn,nr=c.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),or=c.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:s,onFocusOutside:r,onInteractOutside:a,onDismiss:l,...u}=e,p=c.useContext(nr),[g,f]=c.useState(null),h=(g==null?void 0:g.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,x]=c.useState({}),v=re(t,S=>f(S)),w=Array.from(p.layers),[d]=[...p.layersWithOutsidePointerEventsDisabled].slice(-1),m=w.indexOf(d),y=g?w.indexOf(g):-1,E=p.layersWithOutsidePointerEventsDisabled.size>0,P=y>=m,N=ga(S=>{const b=S.target,C=[...p.branches].some(M=>M.contains(b));!P||C||(s==null||s(S),a==null||a(S),S.defaultPrevented||l==null||l())},h),I=ma(S=>{const b=S.target;[...p.branches].some(M=>M.contains(b))||(r==null||r(S),a==null||a(S),S.defaultPrevented||l==null||l())},h);return hs(S=>{y===p.layers.size-1&&(o==null||o(S),!S.defaultPrevented&&l&&(S.preventDefault(),l()))},h),c.useEffect(()=>{if(g)return n&&(p.layersWithOutsidePointerEventsDisabled.size===0&&(jn=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),p.layersWithOutsidePointerEventsDisabled.add(g)),p.layers.add(g),An(),()=>{n&&p.layersWithOutsidePointerEventsDisabled.size===1&&(h.body.style.pointerEvents=jn)}},[g,h,n,p]),c.useEffect(()=>()=>{g&&(p.layers.delete(g),p.layersWithOutsidePointerEventsDisabled.delete(g),An())},[g,p]),c.useEffect(()=>{const S=()=>x({});return document.addEventListener(Ft,S),()=>document.removeEventListener(Ft,S)},[]),i.jsx(se.div,{...u,ref:v,style:{pointerEvents:E?P?"auto":"none":void 0,...e.style},onFocusCapture:$(e.onFocusCapture,I.onFocusCapture),onBlurCapture:$(e.onBlurCapture,I.onBlurCapture),onPointerDownCapture:$(e.onPointerDownCapture,N.onPointerDownCapture)})});or.displayName=ua;var pa="DismissableLayerBranch",ha=c.forwardRef((e,t)=>{const n=c.useContext(nr),o=c.useRef(null),s=re(t,o);return c.useEffect(()=>{const r=o.current;if(r)return n.branches.add(r),()=>{n.branches.delete(r)}},[n.branches]),i.jsx(se.div,{...e,ref:s})});ha.displayName=pa;function ga(e,t=globalThis==null?void 0:globalThis.document){const n=me(e),o=c.useRef(!1),s=c.useRef(()=>{});return c.useEffect(()=>{const r=l=>{if(l.target&&!o.current){let u=function(){rr(da,n,p,{discrete:!0})};const p={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=u,t.addEventListener("click",s.current,{once:!0})):u()}else t.removeEventListener("click",s.current);o.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",r)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",r),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function ma(e,t=globalThis==null?void 0:globalThis.document){const n=me(e),o=c.useRef(!1);return c.useEffect(()=>{const s=r=>{r.target&&!o.current&&rr(fa,n,{originalEvent:r},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function An(){const e=new CustomEvent(Ft);document.dispatchEvent(e)}function rr(e,t,n,{discrete:o}){const s=n.originalEvent.target,r=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),o?Bn(s,r):s.dispatchEvent(r)}var At="focusScope.autoFocusOnMount",Dt="focusScope.autoFocusOnUnmount",Dn={bubbles:!1,cancelable:!0},xa="FocusScope",sr=c.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:s,onUnmountAutoFocus:r,...a}=e,[l,u]=c.useState(null),p=me(s),g=me(r),f=c.useRef(null),h=re(t,w=>u(w)),x=c.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;c.useEffect(()=>{if(o){let w=function(E){if(x.paused||!l)return;const P=E.target;l.contains(P)?f.current=P:ye(f.current,{select:!0})},d=function(E){if(x.paused||!l)return;const P=E.relatedTarget;P!==null&&(l.contains(P)||ye(f.current,{select:!0}))},m=function(E){if(document.activeElement===document.body)for(const N of E)N.removedNodes.length>0&&ye(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",d);const y=new MutationObserver(m);return l&&y.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",d),y.disconnect()}}},[o,l,x.paused]),c.useEffect(()=>{if(l){On.add(x);const w=document.activeElement;if(!l.contains(w)){const m=new CustomEvent(At,Dn);l.addEventListener(At,p),l.dispatchEvent(m),m.defaultPrevented||(va(Pa(ir(l)),{select:!0}),document.activeElement===w&&ye(l))}return()=>{l.removeEventListener(At,p),setTimeout(()=>{const m=new CustomEvent(Dt,Dn);l.addEventListener(Dt,g),l.dispatchEvent(m),m.defaultPrevented||ye(w??document.body,{select:!0}),l.removeEventListener(Dt,g),On.remove(x)},0)}}},[l,p,g,x]);const v=c.useCallback(w=>{if(!n&&!o||x.paused)return;const d=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,m=document.activeElement;if(d&&m){const y=w.currentTarget,[E,P]=ya(y);E&&P?!w.shiftKey&&m===P?(w.preventDefault(),n&&ye(E,{select:!0})):w.shiftKey&&m===E&&(w.preventDefault(),n&&ye(P,{select:!0})):m===y&&w.preventDefault()}},[n,o,x.paused]);return i.jsx(se.div,{tabIndex:-1,...a,ref:h,onKeyDown:v})});sr.displayName=xa;function va(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(ye(o,{select:t}),document.activeElement!==n)return}function ya(e){const t=ir(e),n=_n(t,e),o=_n(t.reverse(),e);return[n,o]}function ir(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const s=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||s?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function _n(e,t){for(const n of e)if(!wa(n,{upTo:t}))return n}function wa(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function ba(e){return e instanceof HTMLInputElement&&"select"in e}function ye(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&ba(e)&&t&&e.select()}}var On=Ca();function Ca(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=Tn(e,t),e.unshift(t)},remove(t){var n;e=Tn(e,t),(n=e[0])==null||n.resume()}}}function Tn(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function Pa(e){return e.filter(t=>t.tagName!=="A")}var Ea="Arrow",ar=c.forwardRef((e,t)=>{const{children:n,width:o=10,height:s=5,...r}=e;return i.jsx(se.svg,{...r,ref:t,width:o,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});ar.displayName=Ea;var Sa=ar,cn="Popper",[lr,cr]=$e(cn),[Ia,ur]=lr(cn),dr=e=>{const{__scopePopper:t,children:n}=e,[o,s]=c.useState(null);return i.jsx(Ia,{scope:t,anchor:o,onAnchorChange:s,children:n})};dr.displayName=cn;var fr="PopperAnchor",pr=c.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:o,...s}=e,r=ur(fr,n),a=c.useRef(null),l=re(t,a);return c.useEffect(()=>{r.onAnchorChange((o==null?void 0:o.current)||a.current)}),o?null:i.jsx(se.div,{...s,ref:l})});pr.displayName=fr;var un="PopperContent",[Na,Ma]=lr(un),hr=c.forwardRef((e,t)=>{var j,L,z,U,ne,oe;const{__scopePopper:n,side:o="bottom",sideOffset:s=0,align:r="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:p=[],collisionPadding:g=0,sticky:f="partial",hideWhenDetached:h=!1,updatePositionStrategy:x="optimized",onPlaced:v,...w}=e,d=ur(un,n),[m,y]=c.useState(null),E=re(t,W=>y(W)),[P,N]=c.useState(null),I=Kn(P),S=(I==null?void 0:I.width)??0,b=(I==null?void 0:I.height)??0,C=o+(r!=="center"?"-"+r:""),M=typeof g=="number"?g:{top:0,right:0,bottom:0,left:0,...g},D=Array.isArray(p)?p:[p],A=D.length>0,H={padding:M,boundary:D.filter(ja),altBoundary:A},{refs:B,floatingStyles:G,placement:K,isPositioned:q,middlewareData:V}=Wn({strategy:"fixed",placement:C,whileElementsMounted:(...W)=>Qn(...W,{animationFrame:x==="always"}),elements:{reference:d.anchor},middleware:[Un({mainAxis:s+b,alignmentAxis:a}),u&&Yn({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?Jn():void 0,...H}),u&&Vn({...H}),Xn({...H,apply:({elements:W,rects:ee,availableWidth:he,availableHeight:ve})=>{const{width:Se,height:Q}=ee.reference,le=W.floating.style;le.setProperty("--radix-popper-available-width",`${he}px`),le.setProperty("--radix-popper-available-height",`${ve}px`),le.setProperty("--radix-popper-anchor-width",`${Se}px`),le.setProperty("--radix-popper-anchor-height",`${Q}px`)}}),P&&qn({element:P,padding:l}),Aa({arrowWidth:S,arrowHeight:b}),h&&Zn({strategy:"referenceHidden",...H})]}),[O,Z]=xr(K),Y=me(v);Ye(()=>{q&&(Y==null||Y())},[q,Y]);const J=(j=V.arrow)==null?void 0:j.x,R=(L=V.arrow)==null?void 0:L.y,T=((z=V.arrow)==null?void 0:z.centerOffset)!==0,[k,_]=c.useState();return Ye(()=>{m&&_(window.getComputedStyle(m).zIndex)},[m]),i.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...G,transform:q?G.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:k,"--radix-popper-transform-origin":[(U=V.transformOrigin)==null?void 0:U.x,(ne=V.transformOrigin)==null?void 0:ne.y].join(" "),...((oe=V.hide)==null?void 0:oe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:i.jsx(Na,{scope:n,placedSide:O,onArrowChange:N,arrowX:J,arrowY:R,shouldHideArrow:T,children:i.jsx(se.div,{"data-side":O,"data-align":Z,...w,ref:E,style:{...w.style,animation:q?void 0:"none"}})})})});hr.displayName=un;var gr="PopperArrow",Ra={top:"bottom",right:"left",bottom:"top",left:"right"},mr=c.forwardRef(function(t,n){const{__scopePopper:o,...s}=t,r=Ma(gr,o),a=Ra[r.placedSide];return i.jsx("span",{ref:r.onArrowChange,style:{position:"absolute",left:r.arrowX,top:r.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[r.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[r.placedSide],visibility:r.shouldHideArrow?"hidden":void 0},children:i.jsx(Sa,{...s,ref:n,style:{...s.style,display:"block"}})})});mr.displayName=gr;function ja(e){return e!==null}var Aa=e=>({name:"transformOrigin",options:e,fn(t){var d,m,y;const{placement:n,rects:o,middlewareData:s}=t,a=((d=s.arrow)==null?void 0:d.centerOffset)!==0,l=a?0:e.arrowWidth,u=a?0:e.arrowHeight,[p,g]=xr(n),f={start:"0%",center:"50%",end:"100%"}[g],h=(((m=s.arrow)==null?void 0:m.x)??0)+l/2,x=(((y=s.arrow)==null?void 0:y.y)??0)+u/2;let v="",w="";return p==="bottom"?(v=a?f:`${h}px`,w=`${-u}px`):p==="top"?(v=a?f:`${h}px`,w=`${o.floating.height+u}px`):p==="right"?(v=`${-u}px`,w=a?f:`${x}px`):p==="left"&&(v=`${o.floating.width+u}px`,w=a?f:`${x}px`),{data:{x:v,y:w}}}});function xr(e){const[t,n="center"]=e.split("-");return[t,n]}var Da=dr,_a=pr,Oa=hr,Ta=mr,La="Portal",vr=c.forwardRef((e,t)=>{var l;const{container:n,...o}=e,[s,r]=c.useState(!1);Ye(()=>r(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?ei.createPortal(i.jsx(se.div,{...o,ref:t}),a):null});vr.displayName=La;var _t="rovingFocusGroup.onEntryFocus",ka={bubbles:!1,cancelable:!0},ot="RovingFocusGroup",[$t,yr,za]=no(ot),[Fa,wr]=$e(ot,[za]),[$a,Ha]=Fa(ot),br=c.forwardRef((e,t)=>i.jsx($t.Provider,{scope:e.__scopeRovingFocusGroup,children:i.jsx($t.Slot,{scope:e.__scopeRovingFocusGroup,children:i.jsx(Ga,{...e,ref:t})})}));br.displayName=ot;var Ga=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:s=!1,dir:r,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:p,preventScrollOnEntryFocus:g=!1,...f}=e,h=c.useRef(null),x=re(t,h),v=oo(r),[w,d]=Gt({prop:a,defaultProp:l??null,onChange:u,caller:ot}),[m,y]=c.useState(!1),E=me(p),P=yr(n),N=c.useRef(!1),[I,S]=c.useState(0);return c.useEffect(()=>{const b=h.current;if(b)return b.addEventListener(_t,E),()=>b.removeEventListener(_t,E)},[E]),i.jsx($a,{scope:n,orientation:o,dir:v,loop:s,currentTabStopId:w,onItemFocus:c.useCallback(b=>d(b),[d]),onItemShiftTab:c.useCallback(()=>y(!0),[]),onFocusableItemAdd:c.useCallback(()=>S(b=>b+1),[]),onFocusableItemRemove:c.useCallback(()=>S(b=>b-1),[]),children:i.jsx(se.div,{tabIndex:m||I===0?-1:0,"data-orientation":o,...f,ref:x,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{N.current=!0}),onFocus:$(e.onFocus,b=>{const C=!N.current;if(b.target===b.currentTarget&&C&&!m){const M=new CustomEvent(_t,ka);if(b.currentTarget.dispatchEvent(M),!M.defaultPrevented){const D=P().filter(K=>K.focusable),A=D.find(K=>K.active),H=D.find(K=>K.id===w),G=[A,H,...D].filter(Boolean).map(K=>K.ref.current);Er(G,g)}}N.current=!1}),onBlur:$(e.onBlur,()=>y(!1))})})}),Cr="RovingFocusGroupItem",Pr=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:s=!1,tabStopId:r,children:a,...l}=e,u=lt(),p=r||u,g=Ha(Cr,n),f=g.currentTabStopId===p,h=yr(n),{onFocusableItemAdd:x,onFocusableItemRemove:v,currentTabStopId:w}=g;return c.useEffect(()=>{if(o)return x(),()=>v()},[o,x,v]),i.jsx($t.ItemSlot,{scope:n,id:p,focusable:o,active:s,children:i.jsx(se.span,{tabIndex:f?0:-1,"data-orientation":g.orientation,...l,ref:t,onMouseDown:$(e.onMouseDown,d=>{o?g.onItemFocus(p):d.preventDefault()}),onFocus:$(e.onFocus,()=>g.onItemFocus(p)),onKeyDown:$(e.onKeyDown,d=>{if(d.key==="Tab"&&d.shiftKey){g.onItemShiftTab();return}if(d.target!==d.currentTarget)return;const m=Wa(d,g.orientation,g.dir);if(m!==void 0){if(d.metaKey||d.ctrlKey||d.altKey||d.shiftKey)return;d.preventDefault();let E=h().filter(P=>P.focusable).map(P=>P.ref.current);if(m==="last")E.reverse();else if(m==="prev"||m==="next"){m==="prev"&&E.reverse();const P=E.indexOf(d.currentTarget);E=g.loop?Ua(E,P+1):E.slice(P+1)}setTimeout(()=>Er(E))}}),children:typeof a=="function"?a({isCurrentTabStop:f,hasTabStop:w!=null}):a})})});Pr.displayName=Cr;var Ba={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ka(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Wa(e,t,n){const o=Ka(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return Ba[o]}function Er(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function Ua(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var Ya=br,Va=Pr;function Xa(e){const t=qa(e),n=c.forwardRef((o,s)=>{const{children:r,...a}=o,l=c.Children.toArray(r),u=l.find(Ja);if(u){const p=u.props.children,g=l.map(f=>f===u?c.Children.count(p)>1?c.Children.only(null):c.isValidElement(p)?p.props.children:null:f);return i.jsx(t,{...a,ref:s,children:c.isValidElement(p)?c.cloneElement(p,void 0,g):null})}return i.jsx(t,{...a,ref:s,children:r})});return n.displayName=`${e}.Slot`,n}function qa(e){const t=c.forwardRef((n,o)=>{const{children:s,...r}=n;if(c.isValidElement(s)){const a=el(s),l=Qa(r,s.props);return s.type!==c.Fragment&&(l.ref=o?Bt(o,a):a),c.cloneElement(s,l)}return c.Children.count(s)>1?c.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Za=Symbol("radix.slottable");function Ja(e){return c.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Za}function Qa(e,t){const n={...t};for(const o in t){const s=e[o],r=t[o];/^on[A-Z]/.test(o)?s&&r?n[o]=(...l)=>{r(...l),s(...l)}:s&&(n[o]=s):o==="style"?n[o]={...s,...r}:o==="className"&&(n[o]=[s,r].filter(Boolean).join(" "))}return{...e,...n}}function el(e){var o,s;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(s=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:s.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ht=["Enter"," "],tl=["ArrowDown","PageUp","Home"],Sr=["ArrowUp","PageDown","End"],nl=[...tl,...Sr],ol={ltr:[...Ht,"ArrowRight"],rtl:[...Ht,"ArrowLeft"]},rl={ltr:["ArrowLeft"],rtl:["ArrowRight"]},rt="Menu",[Je,sl,il]=no(rt),[De,Ir]=$e(rt,[il,cr,wr]),Ct=cr(),Nr=wr(),[al,_e]=De(rt),[ll,st]=De(rt),Mr=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:s,onOpenChange:r,modal:a=!0}=e,l=Ct(t),[u,p]=c.useState(null),g=c.useRef(!1),f=me(r),h=oo(s);return c.useEffect(()=>{const x=()=>{g.current=!0,document.addEventListener("pointerdown",v,{capture:!0,once:!0}),document.addEventListener("pointermove",v,{capture:!0,once:!0})},v=()=>g.current=!1;return document.addEventListener("keydown",x,{capture:!0}),()=>{document.removeEventListener("keydown",x,{capture:!0}),document.removeEventListener("pointerdown",v,{capture:!0}),document.removeEventListener("pointermove",v,{capture:!0})}},[]),i.jsx(Da,{...l,children:i.jsx(al,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:p,children:i.jsx(ll,{scope:t,onClose:c.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:g,dir:h,modal:a,children:o})})})};Mr.displayName=rt;var cl="MenuAnchor",dn=c.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=Ct(n);return i.jsx(_a,{...s,...o,ref:t})});dn.displayName=cl;var fn="MenuPortal",[ul,Rr]=De(fn,{forceMount:void 0}),jr=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:s}=e,r=_e(fn,t);return i.jsx(ul,{scope:t,forceMount:n,children:i.jsx(He,{present:n||r.open,children:i.jsx(vr,{asChild:!0,container:s,children:o})})})};jr.displayName=fn;var ce="MenuContent",[dl,pn]=De(ce),Ar=c.forwardRef((e,t)=>{const n=Rr(ce,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,r=_e(ce,e.__scopeMenu),a=st(ce,e.__scopeMenu);return i.jsx(Je.Provider,{scope:e.__scopeMenu,children:i.jsx(He,{present:o||r.open,children:i.jsx(Je.Slot,{scope:e.__scopeMenu,children:a.modal?i.jsx(fl,{...s,ref:t}):i.jsx(pl,{...s,ref:t})})})})}),fl=c.forwardRef((e,t)=>{const n=_e(ce,e.__scopeMenu),o=c.useRef(null),s=re(t,o);return c.useEffect(()=>{const r=o.current;if(r)return $n(r)},[]),i.jsx(hn,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:$(e.onFocusOutside,r=>r.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),pl=c.forwardRef((e,t)=>{const n=_e(ce,e.__scopeMenu);return i.jsx(hn,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),hl=Xa("MenuContent.ScrollLock"),hn=c.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:s,onOpenAutoFocus:r,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:f,onInteractOutside:h,onDismiss:x,disableOutsideScroll:v,...w}=e,d=_e(ce,n),m=st(ce,n),y=Ct(n),E=Nr(n),P=sl(n),[N,I]=c.useState(null),S=c.useRef(null),b=re(t,S,d.onContentChange),C=c.useRef(0),M=c.useRef(""),D=c.useRef(0),A=c.useRef(null),H=c.useRef("right"),B=c.useRef(0),G=v?Hn:c.Fragment,K=v?{as:hl,allowPinchZoom:!0}:void 0,q=O=>{var j,L;const Z=M.current+O,Y=P().filter(z=>!z.disabled),J=document.activeElement,R=(j=Y.find(z=>z.ref.current===J))==null?void 0:j.textValue,T=Y.map(z=>z.textValue),k=Il(T,Z,R),_=(L=Y.find(z=>z.textValue===k))==null?void 0:L.ref.current;(function z(U){M.current=U,window.clearTimeout(C.current),U!==""&&(C.current=window.setTimeout(()=>z(""),1e3))})(Z),_&&setTimeout(()=>_.focus())};c.useEffect(()=>()=>window.clearTimeout(C.current),[]),Gn();const V=c.useCallback(O=>{var Y,J;return H.current===((Y=A.current)==null?void 0:Y.side)&&Ml(O,(J=A.current)==null?void 0:J.area)},[]);return i.jsx(dl,{scope:n,searchRef:M,onItemEnter:c.useCallback(O=>{V(O)&&O.preventDefault()},[V]),onItemLeave:c.useCallback(O=>{var Z;V(O)||((Z=S.current)==null||Z.focus(),I(null))},[V]),onTriggerLeave:c.useCallback(O=>{V(O)&&O.preventDefault()},[V]),pointerGraceTimerRef:D,onPointerGraceIntentChange:c.useCallback(O=>{A.current=O},[]),children:i.jsx(G,{...K,children:i.jsx(sr,{asChild:!0,trapped:s,onMountAutoFocus:$(r,O=>{var Z;O.preventDefault(),(Z=S.current)==null||Z.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(or,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:f,onInteractOutside:h,onDismiss:x,children:i.jsx(Ya,{asChild:!0,...E,dir:m.dir,orientation:"vertical",loop:o,currentTabStopId:N,onCurrentTabStopIdChange:I,onEntryFocus:$(u,O=>{m.isUsingKeyboardRef.current||O.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(Oa,{role:"menu","aria-orientation":"vertical","data-state":Yr(d.open),"data-radix-menu-content":"",dir:m.dir,...y,...w,ref:b,style:{outline:"none",...w.style},onKeyDown:$(w.onKeyDown,O=>{const Y=O.target.closest("[data-radix-menu-content]")===O.currentTarget,J=O.ctrlKey||O.altKey||O.metaKey,R=O.key.length===1;Y&&(O.key==="Tab"&&O.preventDefault(),!J&&R&&q(O.key));const T=S.current;if(O.target!==T||!nl.includes(O.key))return;O.preventDefault();const _=P().filter(j=>!j.disabled).map(j=>j.ref.current);Sr.includes(O.key)&&_.reverse(),El(_)}),onBlur:$(e.onBlur,O=>{O.currentTarget.contains(O.target)||(window.clearTimeout(C.current),M.current="")}),onPointerMove:$(e.onPointerMove,Qe(O=>{const Z=O.target,Y=B.current!==O.clientX;if(O.currentTarget.contains(Z)&&Y){const J=O.clientX>B.current?"right":"left";H.current=J,B.current=O.clientX}}))})})})})})})});Ar.displayName=ce;var gl="MenuGroup",gn=c.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return i.jsx(se.div,{role:"group",...o,ref:t})});gn.displayName=gl;var ml="MenuLabel",Dr=c.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return i.jsx(se.div,{...o,ref:t})});Dr.displayName=ml;var pt="MenuItem",Ln="menu.itemSelect",Pt=c.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...s}=e,r=c.useRef(null),a=st(pt,e.__scopeMenu),l=pn(pt,e.__scopeMenu),u=re(t,r),p=c.useRef(!1),g=()=>{const f=r.current;if(!n&&f){const h=new CustomEvent(Ln,{bubbles:!0,cancelable:!0});f.addEventListener(Ln,x=>o==null?void 0:o(x),{once:!0}),Bn(f,h),h.defaultPrevented?p.current=!1:a.onClose()}};return i.jsx(_r,{...s,ref:u,disabled:n,onClick:$(e.onClick,g),onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,f),p.current=!0},onPointerUp:$(e.onPointerUp,f=>{var h;p.current||(h=f.currentTarget)==null||h.click()}),onKeyDown:$(e.onKeyDown,f=>{const h=l.searchRef.current!=="";n||h&&f.key===" "||Ht.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});Pt.displayName=pt;var _r=c.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:s,...r}=e,a=pn(pt,n),l=Nr(n),u=c.useRef(null),p=re(t,u),[g,f]=c.useState(!1),[h,x]=c.useState("");return c.useEffect(()=>{const v=u.current;v&&x((v.textContent??"").trim())},[r.children]),i.jsx(Je.ItemSlot,{scope:n,disabled:o,textValue:s??h,children:i.jsx(Va,{asChild:!0,...l,focusable:!o,children:i.jsx(se.div,{role:"menuitem","data-highlighted":g?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...r,ref:p,onPointerMove:$(e.onPointerMove,Qe(v=>{o?a.onItemLeave(v):(a.onItemEnter(v),v.defaultPrevented||v.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:$(e.onPointerLeave,Qe(v=>a.onItemLeave(v))),onFocus:$(e.onFocus,()=>f(!0)),onBlur:$(e.onBlur,()=>f(!1))})})})}),xl="MenuCheckboxItem",Or=c.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...s}=e;return i.jsx(Fr,{scope:e.__scopeMenu,checked:n,children:i.jsx(Pt,{role:"menuitemcheckbox","aria-checked":ht(n)?"mixed":n,...s,ref:t,"data-state":xn(n),onSelect:$(s.onSelect,()=>o==null?void 0:o(ht(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Or.displayName=xl;var Tr="MenuRadioGroup",[vl,yl]=De(Tr,{value:void 0,onValueChange:()=>{}}),Lr=c.forwardRef((e,t)=>{const{value:n,onValueChange:o,...s}=e,r=me(o);return i.jsx(vl,{scope:e.__scopeMenu,value:n,onValueChange:r,children:i.jsx(gn,{...s,ref:t})})});Lr.displayName=Tr;var kr="MenuRadioItem",zr=c.forwardRef((e,t)=>{const{value:n,...o}=e,s=yl(kr,e.__scopeMenu),r=n===s.value;return i.jsx(Fr,{scope:e.__scopeMenu,checked:r,children:i.jsx(Pt,{role:"menuitemradio","aria-checked":r,...o,ref:t,"data-state":xn(r),onSelect:$(o.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});zr.displayName=kr;var mn="MenuItemIndicator",[Fr,wl]=De(mn,{checked:!1}),$r=c.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...s}=e,r=wl(mn,n);return i.jsx(He,{present:o||ht(r.checked)||r.checked===!0,children:i.jsx(se.span,{...s,ref:t,"data-state":xn(r.checked)})})});$r.displayName=mn;var bl="MenuSeparator",Hr=c.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return i.jsx(se.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});Hr.displayName=bl;var Cl="MenuArrow",Gr=c.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,s=Ct(n);return i.jsx(Ta,{...s,...o,ref:t})});Gr.displayName=Cl;var Pl="MenuSub",[Xc,Br]=De(Pl),We="MenuSubTrigger",Kr=c.forwardRef((e,t)=>{const n=_e(We,e.__scopeMenu),o=st(We,e.__scopeMenu),s=Br(We,e.__scopeMenu),r=pn(We,e.__scopeMenu),a=c.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=r,p={__scopeMenu:e.__scopeMenu},g=c.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return c.useEffect(()=>g,[g]),c.useEffect(()=>{const f=l.current;return()=>{window.clearTimeout(f),u(null)}},[l,u]),i.jsx(dn,{asChild:!0,...p,children:i.jsx(_r,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Yr(n.open),...e,ref:Bt(t,s.onTriggerChange),onClick:f=>{var h;(h=e.onClick)==null||h.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:$(e.onPointerMove,Qe(f=>{r.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!a.current&&(r.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),g()},100))})),onPointerLeave:$(e.onPointerLeave,Qe(f=>{var x,v;g();const h=(x=n.content)==null?void 0:x.getBoundingClientRect();if(h){const w=(v=n.content)==null?void 0:v.dataset.side,d=w==="right",m=d?-5:5,y=h[d?"left":"right"],E=h[d?"right":"left"];r.onPointerGraceIntentChange({area:[{x:f.clientX+m,y:f.clientY},{x:y,y:h.top},{x:E,y:h.top},{x:E,y:h.bottom},{x:y,y:h.bottom}],side:w}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>r.onPointerGraceIntentChange(null),300)}else{if(r.onTriggerLeave(f),f.defaultPrevented)return;r.onPointerGraceIntentChange(null)}})),onKeyDown:$(e.onKeyDown,f=>{var x;const h=r.searchRef.current!=="";e.disabled||h&&f.key===" "||ol[o.dir].includes(f.key)&&(n.onOpenChange(!0),(x=n.content)==null||x.focus(),f.preventDefault())})})})});Kr.displayName=We;var Wr="MenuSubContent",Ur=c.forwardRef((e,t)=>{const n=Rr(ce,e.__scopeMenu),{forceMount:o=n.forceMount,...s}=e,r=_e(ce,e.__scopeMenu),a=st(ce,e.__scopeMenu),l=Br(Wr,e.__scopeMenu),u=c.useRef(null),p=re(t,u);return i.jsx(Je.Provider,{scope:e.__scopeMenu,children:i.jsx(He,{present:o||r.open,children:i.jsx(Je.Slot,{scope:e.__scopeMenu,children:i.jsx(hn,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:p,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:g=>{var f;a.isUsingKeyboardRef.current&&((f=u.current)==null||f.focus()),g.preventDefault()},onCloseAutoFocus:g=>g.preventDefault(),onFocusOutside:$(e.onFocusOutside,g=>{g.target!==l.trigger&&r.onOpenChange(!1)}),onEscapeKeyDown:$(e.onEscapeKeyDown,g=>{a.onClose(),g.preventDefault()}),onKeyDown:$(e.onKeyDown,g=>{var x;const f=g.currentTarget.contains(g.target),h=rl[a.dir].includes(g.key);f&&h&&(r.onOpenChange(!1),(x=l.trigger)==null||x.focus(),g.preventDefault())})})})})})});Ur.displayName=Wr;function Yr(e){return e?"open":"closed"}function ht(e){return e==="indeterminate"}function xn(e){return ht(e)?"indeterminate":e?"checked":"unchecked"}function El(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Sl(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function Il(e,t,n){const s=t.length>1&&Array.from(t).every(p=>p===t[0])?t[0]:t,r=n?e.indexOf(n):-1;let a=Sl(e,Math.max(r,0));s.length===1&&(a=a.filter(p=>p!==n));const u=a.find(p=>p.toLowerCase().startsWith(s.toLowerCase()));return u!==n?u:void 0}function Nl(e,t){const{x:n,y:o}=e;let s=!1;for(let r=0,a=t.length-1;r<t.length;a=r++){const l=t[r],u=t[a],p=l.x,g=l.y,f=u.x,h=u.y;g>o!=h>o&&n<(f-p)*(o-g)/(h-g)+p&&(s=!s)}return s}function Ml(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Nl(n,t)}function Qe(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Rl=Mr,jl=dn,Al=jr,Dl=Ar,_l=gn,Ol=Dr,Tl=Pt,Ll=Or,kl=Lr,zl=zr,Fl=$r,$l=Hr,Hl=Gr,Gl=Kr,Bl=Ur,Et="DropdownMenu",[Kl,qc]=$e(Et,[Ir]),ie=Ir(),[Wl,Vr]=Kl(Et),Xr=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:s,defaultOpen:r,onOpenChange:a,modal:l=!0}=e,u=ie(t),p=c.useRef(null),[g,f]=Gt({prop:s,defaultProp:r??!1,onChange:a,caller:Et});return i.jsx(Wl,{scope:t,triggerId:lt(),triggerRef:p,contentId:lt(),open:g,onOpenChange:f,onOpenToggle:c.useCallback(()=>f(h=>!h),[f]),modal:l,children:i.jsx(Rl,{...u,open:g,onOpenChange:f,dir:o,modal:l,children:n})})};Xr.displayName=Et;var qr="DropdownMenuTrigger",Zr=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...s}=e,r=Vr(qr,n),a=ie(n);return i.jsx(jl,{asChild:!0,...a,children:i.jsx(se.button,{type:"button",id:r.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":r.open?r.contentId:void 0,"data-state":r.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...s,ref:Bt(t,r.triggerRef),onPointerDown:$(e.onPointerDown,l=>{!o&&l.button===0&&l.ctrlKey===!1&&(r.onOpenToggle(),r.open||l.preventDefault())}),onKeyDown:$(e.onKeyDown,l=>{o||(["Enter"," "].includes(l.key)&&r.onOpenToggle(),l.key==="ArrowDown"&&r.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});Zr.displayName=qr;var Ul="DropdownMenuPortal",Jr=e=>{const{__scopeDropdownMenu:t,...n}=e,o=ie(t);return i.jsx(Al,{...o,...n})};Jr.displayName=Ul;var Qr="DropdownMenuContent",es=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=Vr(Qr,n),r=ie(n),a=c.useRef(!1);return i.jsx(Dl,{id:s.contentId,"aria-labelledby":s.triggerId,...r,...o,ref:t,onCloseAutoFocus:$(e.onCloseAutoFocus,l=>{var u;a.current||(u=s.triggerRef.current)==null||u.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:$(e.onInteractOutside,l=>{const u=l.detail.originalEvent,p=u.button===0&&u.ctrlKey===!0,g=u.button===2||p;(!s.modal||g)&&(a.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});es.displayName=Qr;var Yl="DropdownMenuGroup",Vl=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(_l,{...s,...o,ref:t})});Vl.displayName=Yl;var Xl="DropdownMenuLabel",ql=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Ol,{...s,...o,ref:t})});ql.displayName=Xl;var Zl="DropdownMenuItem",Jl=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Tl,{...s,...o,ref:t})});Jl.displayName=Zl;var Ql="DropdownMenuCheckboxItem",ec=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Ll,{...s,...o,ref:t})});ec.displayName=Ql;var tc="DropdownMenuRadioGroup",nc=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(kl,{...s,...o,ref:t})});nc.displayName=tc;var oc="DropdownMenuRadioItem",rc=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(zl,{...s,...o,ref:t})});rc.displayName=oc;var sc="DropdownMenuItemIndicator",ic=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Fl,{...s,...o,ref:t})});ic.displayName=sc;var ac="DropdownMenuSeparator",lc=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx($l,{...s,...o,ref:t})});lc.displayName=ac;var cc="DropdownMenuArrow",uc=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Hl,{...s,...o,ref:t})});uc.displayName=cc;var dc="DropdownMenuSubTrigger",fc=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Gl,{...s,...o,ref:t})});fc.displayName=dc;var pc="DropdownMenuSubContent",hc=c.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,s=ie(n);return i.jsx(Bl,{...s,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});hc.displayName=pc;const gc=Object.assign({"/content/solutions/playground.json":()=>ms(()=>import("./playground-CPt6jU9v.js"),[])}),mc=()=>{const{setNodes:e,setEdges:t,setViewport:n}=pe(),o=te(p=>p.currentLevel),s=fe[o].hints.length?fe[o].hints:["No hints here"],[r,a]=c.useState(0),l=gc[`/content/solutions/${o}.json`],u=async()=>{const p=await l();if(p){const{x:g=0,y:f=0,zoom:h=1}=p.viewport;e(p.nodes),t(p.edges),n({x:g,y:f,zoom:h})}};return i.jsxs(tn,{children:[i.jsx(nn,{asChild:!0,children:i.jsx(de,{side:"left",tooltip:"Help Menu","aria-label":"Help Menu",children:i.jsx(gs,{className:"text-white"})})}),i.jsx(rn,{children:i.jsx(sn,{side:"bottom",className:"mr-3",children:i.jsxs("div",{className:"flex w-200 flex-col gap-4 rounded bg-slate-800 p-4 font-mono text-white shadow-lg outline-1 outline-slate-700 outline-solid",children:[i.jsx("h1",{className:"text-xl",children:"Hints"}),s[r],i.jsx(ke,{className:"text-slate-400 italic hover:underline",target:"_blank",to:"/docs/",children:"Find information on this topic here"}),i.jsx("hr",{className:"mx-auto h-1 w-full rounded-sm border-0 bg-slate-700"}),i.jsxs("div",{className:"flex flex-row justify-center gap-2",children:[i.jsx("button",{disabled:r===0,className:Ue("rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",r===0?"opacity-50":"cursor-pointer hover:bg-slate-600"),onClick:()=>{r>0&&a(r-1)},children:"Previous Hint"}),i.jsx("button",{disabled:r===s.length-1,className:Ue("rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",r===s.length-1?"opacity-50":"cursor-pointer hover:bg-slate-600"),onClick:()=>{r<s.length-1&&a(r+1)},children:"Next Hint"}),i.jsx("button",{className:"cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white hover:bg-slate-600",children:"First Correct Node"}),i.jsx("button",{className:"hover:bg-jam-600 cursor-pointer rounded bg-slate-700 px-2 py-1 text-left text-sm text-white",onClick:u,children:"Full Solution"})]})]})})})]})},xc=({rfInstance:e})=>{const{getNodes:t,getEdges:n,setViewport:o,setEdges:s,setNodes:r}=pe();Ce(u=>u.debugPrint);const[a,l]=c.useState(!1);return i.jsxs(gt,{position:"top-right",className:"flex flex-col items-end justify-center gap-2",children:[i.jsxs(Xr,{open:a,onOpenChange:l,children:[i.jsx(Zr,{asChild:!0,children:i.jsx(de,{side:"left",tooltip:"Add Node","aria-label":"Add Node",children:i.jsx(xs,{className:"text-white"})})}),i.jsx(Jr,{children:i.jsx(es,{align:"end",children:i.jsx(ln,{onClose:()=>l(!1),x:1800,y:400})})})]}),i.jsx(mc,{}),!1]})},vc=et.forwardRef(({nodeIds:e,x:t,y:n,onClose:o},s)=>{const{getNodes:r,getEdges:a,setNodes:l,setEdges:u}=pe(),p=c.useCallback(()=>{l(g=>g.filter(f=>!e.includes(f.id))),u(g=>g.filter(f=>!e.includes(f.source)&&!e.includes(f.target))),o()},[e,l,u,o]);return i.jsx("div",{ref:s,style:{position:"absolute",top:n,left:t,zIndex:1e3},children:i.jsxs(gt,{className:"flex w-55 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:()=>{an(r().filter(g=>e.includes(g.id)),a,r,u,l),o()},children:[i.jsxs("span",{children:["Duplicate ",e.length," nodes "]}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:xe.isMac?"Shift+D":"Ctrl+D"})]}),i.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:p,children:[i.jsxs("span",{children:["Delete ",e.length," nodes "]}),i.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})})});function yc(){const{getNodes:e,getEdges:t,setEdges:n,setNodes:o}=pe();c.useEffect(()=>{const s=xe.appendPlatformModifier("d");return xe.registerShortcut(s,a=>{const l=e().filter(u=>u.selected);l.length>0&&an(l,t,e,n,o)})},[e,t,n,o])}function wc(){c.useEffect(()=>{const e=xe.appendPlatformModifier(" ");return xe.registerShortcut(e,n=>{je.getState().visible?je.getState().closeAddMenu():je.getState().openAddMenu()})},[])}function bc(e,t=!0){c.useEffect(()=>xe.registerShortcut("Escape",o=>{t&&e&&e()}),[e,t])}function Cc(){const[e,t]=c.useState(null),[n,o]=c.useState(null),[s,r]=c.useState(null),[a,l]=c.useState({pane:{width:270,height:280},node:{width:270,height:280},selection:{width:270,height:280}}),u=c.useRef(null),p=c.useRef(null),g=c.useRef(null),{visible:f,closeAddMenu:h,menuX:x,menuY:v}=je();c.useLayoutEffect(()=>{if(u.current){const C=u.current.getBoundingClientRect();l(M=>({...M,pane:{width:C.width,height:C.height}}))}},[e]),c.useLayoutEffect(()=>{if(p.current){const C=p.current.getBoundingClientRect();l(M=>({...M,node:{width:C.width,height:C.height}}))}},[n]),c.useLayoutEffect(()=>{if(g.current){const C=g.current.getBoundingClientRect();l(M=>({...M,selection:{width:C.width,height:C.height}}))}},[s]);const w=c.useCallback(C=>{C.preventDefault();const M=Ot(C,a.pane);t({x:M.x,y:M.y})},[a.pane]),d=c.useCallback((C,M)=>{C.preventDefault();const D=Ot(C,a.node);o({nodeId:M.id,nodeType:M.type,nodeLoopId:M.data.loopId,nodeParentId:M.parentId,x:D.x,y:D.y})},[a.node]),m=c.useCallback((C,M)=>{if(C.preventDefault(),M.length===0)return;const D=Ot(C,a.selection);r({nodeIds:M.map(A=>A.id),x:D.x,y:D.y})},[a.selection]),y=c.useCallback(()=>{t(null),o(null),r(null),je.getState().closeAddMenu()},[]),E=y,P=e!==null||n!==null||s!==null||je.getState().visible;bc(y,P),yc(),wc();const N=e||f,I=(e==null?void 0:e.x)??x,S=(e==null?void 0:e.y)??v;return{paneContextMenu:e,nodeContextMenu:n,selectionContextMenu:s,shouldShowPaneContextMenu:N,paneContextMenuX:I,paneContextMenuY:S,setPaneContextMenu:t,setNodeContextMenu:o,setSelectionContextMenu:r,handlePaneContextMenu:w,handleNodeContextMenu:d,handleSelectionContextMenu:m,handleCloseCombinedMenu:()=>{t(null),h()},onPaneClick:E,paneContextMenuRef:u,nodeContextMenuRef:p,selectionContextMenuRef:g}}function Ot(e,t){const n=e.clientX,o=e.clientY,s=n>window.innerWidth-t.width?window.innerWidth-t.width:n,r=o>window.innerHeight-t.height?window.innerHeight-t.height:o;return{x:s-15,y:r-15}}const kn=e=>Symbol.iterator in e,zn=e=>"entries"in e,Fn=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),o=t instanceof Map?t:new Map(t.entries());if(n.size!==o.size)return!1;for(const[s,r]of n)if(!Object.is(r,o.get(s)))return!1;return!0},Pc=(e,t)=>{const n=e[Symbol.iterator](),o=t[Symbol.iterator]();let s=n.next(),r=o.next();for(;!s.done&&!r.done;){if(!Object.is(s.value,r.value))return!1;s=n.next(),r=o.next()}return!!s.done&&!!r.done};function Ec(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!kn(e)||!kn(t)?Fn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):zn(e)&&zn(t)?Fn(e,t):Pc(e,t)}function Sc(e){const t=et.useRef(void 0);return n=>{const o=e(n);return Ec(t.current,o)?t.current:t.current=o}}function Ic(e,t){if(t.length===0)return{bounds:{x:e.position.x,y:e.position.y,width:we.width,height:we.height,minWidth:we.width,minHeight:we.height},offset:{x:0,y:0}};const n=t.map(u=>({x:u.parentId?u.position.x+e.position.x:u.position.x,y:u.parentId?u.position.y+e.position.y:u.position.y,width:u.measured.width,height:u.measured.height})),o={x:{min:Math.min(...n.map(u=>u.x)),max:Math.max(...n.map(u=>u.x+u.width))},y:{min:Math.min(...n.map(u=>u.y)),max:Math.max(...n.map(u=>u.y+u.height))}},s={x:o.x.min-20,y:o.y.min-60,width:o.x.max-o.x.min+40,height:o.y.max-o.y.min+80},r={x:e.position.x,y:e.position.y,width:e.measured.width,height:e.measured.height},a={x:Math.min(s.x,r.x),y:Math.min(s.y,r.y),width:Math.max(s.x+s.width,r.x+r.width)-Math.min(s.x,r.x),height:Math.max(s.y+s.height,r.y+r.height)-Math.min(s.y,r.y),minWidth:Math.max(s.x+s.width-Math.min(s.x,r.x),we.width),minHeight:Math.max(s.y+s.height-Math.min(s.y,r.y),we.height)},l={x:e.position.x-a.x,y:e.position.y-a.y};return{bounds:a,offset:l}}function Nc(e,t){const n=[],o=new Map,s=[];for(const r of e)if(r.type==="add"){s.push(r);continue}else if(r.type==="remove"||r.type==="replace")o.set(r.id,[r]);else{const a=o.get(r.id);a?a.push(r):o.set(r.id,[r])}for(const r of t){const a=o.get(r.id);if(!a){n.push(r);continue}if(a[0].type==="remove")continue;if(a[0].type==="replace"){n.push({...a[0].item});continue}const l={...r};for(const u of a)Mc(u,l);n.push(l)}return s.length&&s.forEach(r=>{r.index!==void 0?n.splice(r.item.type==="Group"?0:r.index,0,{...r.item}):n.push({...r.item})}),n}function Mc(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??(t.measured={}),t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Rc(e,t){return Nc(e,t)}const jc=e=>({nodes:e.nodes,edges:e.edges,setNodes:e.setNodes,setEdges:e.setEdges,highlightDuplicateNodes:e.highlightDuplicateNodes});function Ac(){const{getIntersectingNodes:e,getNode:t,getNodes:n}=pe(),{nodes:o,edges:s,setNodes:r,setEdges:a,highlightDuplicateNodes:l}=Ve(Sc(jc)),u=Ce(d=>d.replaceNode),p=Ce(d=>d.removeNode),g=Ce(d=>d.addEdge),f=Ce(d=>d.removeEdge),h=c.useCallback(d=>{let m=!1;d.forEach(y=>{switch(y.type){case"add":u(y.item),m=y.item.type==="ExportToGameobject";break;case"remove":{const E=t(y.id);if(E!=null&&E.data.loopStart||E!=null&&E.data.loopEnd){const P=n().filter(N=>N.id!==y.id&&N.data.loopId===E.data.loopId)[0];r(N=>N.filter(I=>I.data.loopId!==(E==null?void 0:E.data.loopId)).map(I=>({...I,data:{...I.data,parentLoopId:I.data.parentLoopId===E.data.loopId?void 0:I.data.parentLoopId}}))),a(N=>N.filter(I=>I.target===P.id||I.source===P.id?(f(I.id),!1):!0)),p(P.id)}p(y.id),m=!0;break}case"replace":u(y.item),m=y.item.type==="ExportToGameobject";break}}),r(y=>Rc(d,y)),m&&l()},[r,u,t,p,n,a,f,l]),x=c.useCallback(d=>{d.forEach(m=>{switch(m.type){case"remove":f(m.id);break;case"add":g(m.item);break}}),a(m=>_s(d,m))},[a,g,f]),v=c.useCallback(d=>{const m=t(d.source),y=t(d.target);(m!=null&&m.data.loopStart&&m.data.loopId===(y==null?void 0:y.data.loopId)||m!=null&&m.data.loopStart&&(y==null?void 0:y.data.parentLoopId)===m.data.loopId||m!=null&&m.data.loopEnd&&m.data.parentLoopId===(y==null?void 0:y.data.parentLoopId)||y!=null&&y.data.loopEnd&&(m==null?void 0:m.data.parentLoopId)===y.data.loopId||!(m!=null&&m.data.loopStart)&&!(y!=null&&y.data.loopEnd)&&(m==null?void 0:m.data.parentLoopId)===(y==null?void 0:y.data.parentLoopId)?!0:(Cs({title:"Invalid Loop Connection!",description:"Connections within loops are restricted to other nodes of the same loop. External nodes may only link to the loop's entry point or accept data from its exit point."}),!1))&&(g(d),a(P=>Os(d,P)))},[a,t,g]);return{nodes:o,edges:s,onNodesChange:h,onEdgesChange:x,onConnect:v,onNodeDragStop:(d,m,y)=>{const E={x:Math.min(...y.map(b=>b.parentId?b.position.x+t(b.parentId).position.x:b.position.x)),y:Math.min(...y.map(b=>b.parentId?b.position.y+t(b.parentId).position.y:b.position.y)),width:Math.max(...y.map(b=>b.position.x+b.measured.width))-Math.min(...y.map(b=>b.position.x)),height:Math.max(...y.map(b=>b.position.y+b.measured.height))-Math.min(...y.map(b=>b.position.y))},P=e(E).filter(b=>b.type==="Group"&&b.selected===!1),N=P.reduce((b,C)=>{const M=C.measured.width*C.measured.height,D=b.measured.width*b.measured.height;return M>D?C:b},P[0]),I=[],S=[];y.forEach(b=>{if(b.type!=="Group"){if(N){if(b.parentId===void 0)I.push({...b,parentId:N.id,position:{x:b.position.x-N.position.x,y:b.position.y-N.position.y}});else if(N.id!==b.parentId){if(!y.some(C=>C.id===b.parentId)){console.log("node is directly adopted",b.id);const C=t(b.parentId);if(!C){console.warn(`recently moved node ${b.id} has an invalid parentId of ${b.parentId}`);return}I.push({...b,parentId:N.id,position:{x:b.position.x+C.position.x-N.position.x,y:b.position.y+C.position.y-N.position.y}}),S.includes(C)||S.push(C)}}}else if(b.parentId!==void 0){if(!y.some(C=>C.id===b.parentId)){const C=t(b.parentId);if(!C){console.warn(`recently moved node ${b.id} has an invalid parentId of ${b.parentId}`);return}I.push({...b,parentId:void 0,position:{x:b.position.x+C.position.x,y:b.position.y+C.position.y}}),S.includes(C)||S.push(C)}}N&&S.push(N)}}),I.push(...S.map(b=>{const C=I.filter(H=>H.parentId===b.id);console.log("updatedChildren",C);const M=n().filter(H=>H.parentId===b.id&&!I.some(B=>B.id===H.id));console.log("nonUpdatedChildren",M);const D=[...C,...M],A=Ic(b,D);return D.forEach(H=>{const B={x:H.position.x+A.offset.x,y:H.position.y+A.offset.y};C.some(G=>G.id===H.id)?I.splice(I.findIndex(G=>G.id===H.id),1,{...H,position:B}):I.push({...H,position:B})}),{...b,position:{x:A.bounds.x,y:A.bounds.y},data:{...b.data,isParent:D.length>0,minWidth:A.bounds.minWidth,minHeight:A.bounds.minHeight},style:{zIndex:-1},width:A.bounds.width,height:A.bounds.height}})),r(b=>b.map(M=>{const D=I.find(A=>A.id===M.id);return D?{...D,dragging:!1}:{...M,dragging:!1}}))}}}const Dc=c.memo(({id:e,data:t})=>{const n=Pe(x=>x.gameObjects),o=Array.from(n.keys()),{isOpen:s,getToggleButtonProps:r,getMenuProps:a,getLabelProps:l,highlightedIndex:u,getItemProps:p,selectedGameObjects:g}=ro(o,t.selectedGameObjects?t.selectedGameObjects:[o[0]],e),f=c.useMemo(()=>so("import",n,g),[n,g]),{updateNodeData:h}=pe();return c.useEffect(()=>{h(e,{compute:(x,v)=>{const w=g.length===1?0:Math.round(Lt(x,ct,-1));if(0>w||w>=g.length){v.clear();return}const d=g[w];f.forEach(m=>{v.set(m,n.get(d).get(m).value)})},selectedGameObjects:g})},[f]),i.jsx("div",{className:"min-w-48",children:i.jsxs(io,{label:"Import From Gameobject",type:"import",docsName:"import",children:[i.jsxs("div",{className:"text-left",children:[g.length>1&&i.jsx(ao,{id:ct,position:ut.Left}),i.jsx(lo,{highlightedIndex:u,isOpen:s,selectableObjects:o,selectedObjects:g,useSelectProps:{getItemProps:p,getLabelProps:l,getMenuProps:a,getToggleButtonProps:r}})]}),f.map(x=>i.jsx(co,{id:x,position:ut.Right,label:x},x))]})})}),_c=c.memo(({id:e,data:t,selected:n})=>{const o=te(P=>P.currentLevel),s=fe[o].modifiableGameObjects,r=Pe(P=>P.gameObjects),a=Array.from(r.keys()),{isOpen:l,getToggleButtonProps:u,getMenuProps:p,getLabelProps:g,highlightedIndex:f,getItemProps:h,selectedGameObjects:x}=ro(a,t.selectedGameObjects?t.selectedGameObjects:[a[0]],e),v=c.useMemo(()=>so("export",r,x),[r,x]),w=Pe(P=>P.setData),d=Pe(P=>P.addHandle),m=Pe(P=>P.removeHandle),y=c.useRef(t.curLabel?t.curLabel.current:""),{updateNodeData:E}=pe();return c.useEffect(()=>{E(e,{compute:(P,N)=>{const I=x.length===1?0:Math.round(Lt(P,ct,-1));if(0>I||I>=x.length)return;const S=x[I];v.forEach(b=>{w(S,b,Lt(P,b,0))})},selectedGameObjects:x})},[v]),i.jsx("div",{children:i.jsxs(io,{label:"Export To Gameobject",type:"export",docsName:"export",children:[i.jsxs("div",{className:"text-left",children:[x.length>1&&i.jsx(ao,{id:ct,position:ut.Left}),i.jsx(lo,{highlightedIndex:f,isOpen:l,selectableObjects:a,selectedObjects:x,useSelectProps:{getItemProps:h,getLabelProps:g,getMenuProps:p,getToggleButtonProps:u}})]}),v.map(P=>i.jsxs("div",{className:"flex w-full items-center [&>*:nth-child(even)]:pointer-events-none [&>*:nth-child(even)]:opacity-0 hover:[&>*:nth-child(even)]:pointer-events-auto hover:[&>*:nth-child(even)]:opacity-100 "+(n?"hover:bg-slate-800":"hover:bg-slate-700"),children:[i.jsx(co,{id:P,position:ut.Left,label:P},P),!s.some(({id:N,connections:I})=>x.includes(N)&&I.some(S=>S.label===P))&&i.jsx(vs,{className:"mt-[1px] ml-2 cursor-pointer text-red-400",onClick:()=>{x.forEach(N=>m(N,P))}})]},P)),!!x.length&&i.jsx(Ts,{addHandle:(P,N)=>d(P,N),handleIdentifiers:x,handleLabel:y,nodeId:e,updateNodeData:E})]})})}),Oc={Value:Ws,Display:Ks,Time:Bs,KeyPress:Gs,Math:Hs,ExportToGameobject:_c,ImportFromGameobject:Dc,Switch:$s,Group:Fs,ForStart:zs,ForEnd:ks,MousePosition:Ls},Tc=()=>{const[e,t]=c.useState(),{nodes:n,edges:o,onNodesChange:s,onEdgesChange:r,onConnect:a,onNodeDragStop:l}=Ac(),{nodeContextMenu:u,selectionContextMenu:p,shouldShowPaneContextMenu:g,paneContextMenuX:f,paneContextMenuY:h,handlePaneContextMenu:x,handleNodeContextMenu:v,handleSelectionContextMenu:w,onPaneClick:d,setNodeContextMenu:m,setSelectionContextMenu:y,handleCloseCombinedMenu:E,nodeContextMenuRef:P,selectionContextMenuRef:N,paneContextMenuRef:I}=Cc(),S=c.useRef(null);return Ri(S),i.jsxs(i.Fragment,{children:[i.jsxs(Vs,{id:"node-editor",onInit:t,nodeTypes:Oc,edgeTypes:Ai,nodes:n,edges:o,onNodesChange:s,onEdgesChange:r,onPaneContextMenu:x,onNodeContextMenu:v,onSelectionContextMenu:w,onConnect:a,onPaneClick:d,disableKeyboardA11y:!0,fitView:!0,proOptions:{hideAttribution:!0},deleteKeyCode:["Delete","Backspace"],onNodeDragStop:l,ref:S,defaultEdgeOptions:{type:"Deletable"},children:[i.jsx(Xs,{bgColor:"#14141d",color:"#a7abc2"}),i.jsx(xc,{rfInstance:e}),i.jsx(Di,{}),i.jsx(aa,{}),i.jsx(Ps,{})]}),g&&i.jsx(ca,{ref:I,x:f,y:h,onClose:E}),u&&i.jsx(la,{ref:P,nodeId:u.nodeId,nodeType:u.nodeType,nodeLoopId:u.nodeLoopId,nodeParentId:u.nodeParentId,x:u.x,y:u.y,onClose:()=>m(null)}),p&&i.jsx(vc,{ref:N,nodeIds:p.nodeIds,x:p.x,y:p.y,onClose:()=>y(null)})]})},Lc=()=>i.jsx(Us,{children:i.jsx(Ys,{children:i.jsx(Tc,{})})});function kc({open:e}){var g;const t=te(f=>f.currentLevel),n=((g=fe[t])==null?void 0:g.goals)||["No goals defined for this level yet."],[o,s]=c.useState({x:16,y:16}),r=c.useRef(null),a=c.useRef({isDragging:!1,offset:{x:0,y:0}}),l=f=>{a.current.isDragging=!0,a.current.offset={x:f.clientX-o.x,y:f.clientY-o.y},f.preventDefault()},u=f=>{var d,m;if(!a.current.isDragging)return;let h=f.clientX-a.current.offset.x,x=f.clientY-a.current.offset.y;f.shiftKey&&(h=Math.round(h/16)*16,x=Math.round(x/16)*16);const v=((d=r.current)==null?void 0:d.offsetWidth)??288,w=((m=r.current)==null?void 0:m.offsetHeight)??128;h=Math.max(0,Math.min(window.innerWidth-v,h)),x=Math.max(0,Math.min(window.innerHeight-w,x)),s({x:h,y:x})},p=()=>{a.current.isDragging=!1};return c.useEffect(()=>{const f=x=>u(x),h=()=>p();return document.addEventListener("mouseup",h),document.addEventListener("mousemove",f),()=>{document.removeEventListener("mouseup",h),document.removeEventListener("mousemove",f)}},[]),i.jsx(Kt,{open:e,modal:!1,children:i.jsx(Wt,{children:i.jsxs(Ut,{ref:r,style:{left:o.x,top:o.y,position:"fixed",margin:0},className:"z-[20000] w-72 cursor-move rounded-lg border-2 border-blue-300 bg-slate-800/95 p-4 font-mono text-white shadow-lg select-none",onMouseDown:l,children:[i.jsx(bt,{asChild:!0,children:i.jsxs(Yt,{children:["These are your goals for the ",t," level."]})}),i.jsx(Vt,{className:"mb-2 text-lg font-bold",children:"Goals"}),i.jsx("ul",{className:"list-disc space-y-2 pl-5",children:n.map(f=>i.jsx("li",{className:"text-base",children:f},f.slice(0,20)))})]})})})}const zc=()=>{var s;const e=te(r=>r.currentLevel),t=(s=Do(e))==null?void 0:s.next,n=te(r=>r.levelCompleteDialogOpen),o=te(r=>r.setLevelCompleteDialogOpen);return i.jsx(er,{title:e,open:n,onOpenChange:o,desc:`This dialog displays the level completion dialog of the
            ${e} level. You can now get to the main menu 
            using the To Menu button or to the next level using the 
            Next Level button.`,children:i.jsxs("div",{className:"flex flex-col gap-5",children:[i.jsxs("div",{className:"flex flex-1 flex-row",children:[i.jsx("div",{className:"my-auto w-1/3 pr-4",children:i.jsx("div",{style:{aspectRatio:"1 / 1",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),i.jsxs("div",{className:"relative my-auto flex h-36 w-full flex-col items-center justify-center rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[i.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),i.jsx("p",{className:"mb-2 text-2xl font-bold",children:fe[e].success}),i.jsx("p",{className:"text-lg italic",children:"Congratulations!"})]})]}),i.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[i.jsx(Me,{asChild:!0,children:i.jsx(ke,{to:"/",className:"cursor-pointer rounded-lg bg-slate-700/80 px-4 py-2 text-white hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"To Menu"})}),i.jsx(Me,{asChild:!0,children:i.jsx("button",{className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Continue Playing"})}),t&&i.jsx(Me,{asChild:!0,children:i.jsx(ke,{to:`/levels/${t}`,className:"cursor-pointer rounded-lg bg-slate-700/80 px-4 py-2 text-white hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next Level"})})]})]})})};function Fc({open:e,onOpenChange:t}){const[n,o]=c.useState(0),s=[{styling:"fixed top-1/2 left-1/2 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"Welcome to our game!",text:"This is a short tutorial to help you get started."},{styling:"fixed top-1/2 left-1/4 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"The Game Window!",text:"This is the game window which shows your character and the game world. Here you'll be able to test all the features you implemented in the node editor.",highlight:{top:0,left:0,width:window.innerWidth/2,height:window.innerHeight}},{styling:"fixed top-1/2 left-3/4 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"The Node Editor!",text:"This is the node editor where you can create and edit your game logic. Everything you create here will be executed in the game window.",highlight:{top:0,left:window.innerWidth/2,width:window.innerWidth/2,height:window.innerHeight}},{styling:"fixed top-1/2 left-1/2 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"Add Nodes!",text:"You can add nodes to the editor by right-clicking on the canvas. Each node represents a specific action or condition in your game logic.",highlight:{top:window.innerHeight*.15,left:window.innerWidth*.6,width:window.innerWidth*.3,height:window.innerHeight*.7}},{styling:"fixed top-1/2 left-1/2 min-w-[320px] z-[10000] -translate-x-1/2 -translate-y-1/2",title:"Export Flow!",text:"Once you have created your game logic, you can export it to the game window by connecting your node tree(s) to the export node(s). This will allow you to test your logic in the game.",highlight:{top:window.innerHeight*.15,left:window.innerWidth*.6,width:window.innerWidth*.3,height:window.innerHeight*.7}},{styling:"fixed top-8 right-[6vw] min-w-[320px] z-[10000]",title:"Hints!",text:"Here you can find hints and get a full solution to the current level if you are stuck. Remember, there is also a question mark icon in the right corner of each node that provides additional information about the node's functionality.",highlight:{top:50,left:window.innerWidth-50,width:40,height:40}},{styling:"fixed top-[50px] left-3/4 min-w-[320px] z-[10000] -translate-x-1/2",title:"Reset!",text:"Be careful with this button! It will reset the whole level and all your nodes will be deleted.",highlight:{top:48,left:window.innerWidth*.5+12,width:45,height:43}},{styling:"fixed top-[150px] left-3/4 min-w-[320px] z-[10000] -translate-x-1/2",title:"Navigation!",text:"Use these buttons to navigate in between the different levels of the game. You can also use the home button to return to the main menu.",highlight:{top:10,left:window.innerWidth*.75-45,width:123,height:42}}],r=n===0,a=n===s.length-1,l=s[n].highlight;return i.jsx(Kt,{open:e,onOpenChange:t,children:i.jsxs(Wt,{children:[l?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"pointer-events-auto fixed inset-0 z-[9998]",children:i.jsxs("svg",{className:"h-full w-full",children:[i.jsx("defs",{children:i.jsxs("mask",{id:"hole-mask",children:[i.jsx("rect",{width:"100%",height:"100%",fill:"white"}),i.jsx("rect",{x:l.left,y:l.top,width:l.width,height:l.height,rx:"8",ry:"8",fill:"black"})]})}),i.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0, 0, 0, 0.4)",mask:"url(#hole-mask)"})]})}),i.jsx("div",{className:"pointer-events-none fixed z-[9999] rounded-lg border-2 border-blue-400",style:{top:l.top,left:l.left,width:l.width,height:l.height}})]}):i.jsx(uo,{className:"fixed inset-0 z-[9999] bg-black/40"}),i.jsxs(Ut,{onPointerDownOutside:u=>{u.preventDefault()},onEscapeKeyDown:u=>{u.preventDefault()},className:`${s[n].styling} z-[10001] max-w-2xl rounded-lg border-2 border-blue-300 bg-slate-800/90 p-8 font-mono text-white shadow-lg`,children:[i.jsx(Vt,{className:"mb-2 text-2xl font-bold",children:s[n].title}),i.jsx(bt,{asChild:!0,children:i.jsx(Yt,{children:s[n].text})}),i.jsx("div",{className:"mb-4",children:s[n].text}),(r||a)&&i.jsxs("div",{className:"mb-4 flex items-center gap-2",children:[i.jsx("input",{type:"checkbox",onChange:u=>localStorage.setItem("hideTutorial",u.target.checked.toString()),id:"dontShowAgain"}),i.jsx("label",{htmlFor:"dontShowAgain",className:"select-none",children:"Don't show again"})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[n+1," / ",s.length]}),i.jsxs("div",{className:"flex justify-end gap-5",children:[r&&i.jsx(Me,{className:"cursor-pointer rounded-lg bg-slate-700 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Skip"}),i.jsx("button",{onClick:()=>o(n-1),disabled:n===0,className:"rounded-lg bg-slate-700 px-3 py-2 focus:outline-1 focus:outline-blue-300"+(n===0?" opacity-50":" cursor-pointer hover:bg-slate-600"),children:"Back"}),a?i.jsx(Me,{className:"cursor-pointer rounded-lg bg-slate-700 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"}):i.jsx("button",{onClick:()=>o(n+1),className:"cursor-pointer rounded-lg bg-slate-700 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",autoFocus:n===0,children:"Next"})]})]})]})]})})}const $c=({params:e})=>{const t=c.useRef(null),n=e.id||"calculator";if(!(n in fe))throw new Error(`Level ${n} not found`);const[o,s]=c.useState(!JSON.parse(localStorage.getItem("hideTutorial")??"false")),[r,a]=c.useState(!o);return c.useEffect(()=>{if(!t.current)return;xe.init(),Es(t.current),Mi(n);const l=setInterval(()=>{Ve.getState().save(),Ce.getState().save(),Xe.getState().save(),Pe.getState().save()},1e3);return()=>{Ss(),clearInterval(l),a(!0),xe.cleanup()}},[n]),i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"absolute top-0 left-0 z-10 h-full w-full bg-slate-900 p-8 text-center md:hidden",children:i.jsx("div",{className:"flex h-full w-full items-center justify-center",children:i.jsx("h1",{className:"text-2xl font-bold text-white",children:"Please use a desktop browser to play the game."})})}),i.jsx(Fc,{open:o,onOpenChange:s}),i.jsx(tr,{open:!o&&r,onOpenChange:a}),i.jsx(kc,{open:!o&&!r}),i.jsx(zc,{}),i.jsxs(jo,{direction:"horizontal",children:[i.jsx(kt,{id:"game-panel",minSize:25,order:1,children:i.jsx("canvas",{id:"game-canvas",ref:t,className:"w-1/2"})}),i.jsx(Ao,{className:"flex w-2 items-center justify-center bg-slate-800",children:i.jsx(ys,{width:32,height:32,className:"scale-125 text-slate-400"})}),i.jsx(kt,{id:"nodes-panel",minSize:25,order:2,children:i.jsx(Lc,{})})]})]})},Zc=os($c);export{Zc as default};
