import{w as vr}from"./with-props-DHRFOzHR.js";import{a,s as yr,o as l,t as In}from"./chunk-AYJ5UCUI-DfzbB4N7.js";import{c as jt,u as te,a as rt,b as L,d as Tt,e as Ne,P as Ee,f as br,g as st,C as Er,h as Pn,i as wr,j as Cr,R as Sr,I as Ir,k as Pr,l as oe,m as Mn,n as Mr,H as Rr,o as Nr,D as Dr}from"./index-Bq7vkyUy.js";import{L as _e,u as xe,g as en,i as _r,c as jr}from"./levels-CenGwz75.js";import{u as Me,c as Rn,a as Nn,v as At,b as Ae,d as Tr,g as gt,e as Ar,f as Lr,h as Or,i as Dn,j as Pt,I as Ze,T as kr}from"./time-CzMPp8OJ.js";import{u as de,P as zr,R as _n,h as jn,a as Tn,D as Fr,T as $r,b as Gr,c as Hr,d as Lt,e as Kr,f as we,g as Ur,i as An,j as Ln,k as On,l as Br,A as Wr,C as Vr,m as Yr,n as Xr,o as qr,p as kn,N as zn,B as Fn,q as Je,M as $n,L as Gn,r as Zr,F as Jr,s as Qr,G as es,S as ts,t as ns,K as os,v as rs,w as ss,V as as,x as is,y as ls,z as cs,E as us}from"./Value-DjETdj7u.js";import{R as ds}from"./index-BMLNhK5V.js";const at=a.createContext(null);at.displayName="PanelGroupContext";const W={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Ot=10,ve=a.useLayoutEffect,tn=yr.useId,fs=typeof tn=="function"?tn:()=>null;let ps=0;function kt(e=null){const t=fs(),n=a.useRef(e||t||null);return n.current===null&&(n.current=""+ps++),e??n.current}function Hn({children:e,className:t="",collapsedSize:n,collapsible:o,defaultSize:r,forwardedRef:s,id:c,maxSize:i,minSize:u,onCollapse:g,onExpand:p,onResize:f,order:m,style:h,tagName:b="div",...y}){const v=a.useContext(at);if(v===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:d,expandPanel:x,getPanelSize:E,getPanelStyle:w,groupId:j,isPanelCollapsed:S,reevaluatePanelConstraints:C,registerPanel:N,resizePanel:z,unregisterPanel:F}=v,K=kt(c),$=a.useRef({callbacks:{onCollapse:g,onExpand:p,onResize:f},constraints:{collapsedSize:n,collapsible:o,defaultSize:r,maxSize:i,minSize:u},id:K,idIsFromProps:c!==void 0,order:m});a.useRef({didLogMissingDefaultSizeWarning:!1}),ve(()=>{const{callbacks:G,constraints:k}=$.current,H={...k};$.current.id=K,$.current.idIsFromProps=c!==void 0,$.current.order=m,G.onCollapse=g,G.onExpand=p,G.onResize=f,k.collapsedSize=n,k.collapsible=o,k.defaultSize=r,k.maxSize=i,k.minSize=u,(H.collapsedSize!==k.collapsedSize||H.collapsible!==k.collapsible||H.maxSize!==k.maxSize||H.minSize!==k.minSize)&&C($.current,H)}),ve(()=>{const G=$.current;return N(G),()=>{F(G)}},[m,K,N,F]),a.useImperativeHandle(s,()=>({collapse:()=>{d($.current)},expand:G=>{x($.current,G)},getId(){return K},getSize(){return E($.current)},isCollapsed(){return S($.current)},isExpanded(){return!S($.current)},resize:G=>{z($.current,G)}}),[d,x,E,S,K,z]);const X=w($.current,r);return a.createElement(b,{...y,children:e,className:t,id:K,style:{...X,...h},[W.groupId]:j,[W.panel]:"",[W.panelCollapsible]:o||void 0,[W.panelId]:K,[W.panelSize]:parseFloat(""+X.flexGrow).toFixed(1)})}const Mt=a.forwardRef((e,t)=>a.createElement(Hn,{...e,forwardedRef:t}));Hn.displayName="Panel";Mt.displayName="forwardRef(Panel)";let Rt=null,Xe=-1,me=null;function ms(e,t){if(t){const n=(t&Vn)!==0,o=(t&Yn)!==0,r=(t&Xn)!==0,s=(t&qn)!==0;if(n)return r?"se-resize":s?"ne-resize":"e-resize";if(o)return r?"sw-resize":s?"nw-resize":"w-resize";if(r)return"s-resize";if(s)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function gs(){me!==null&&(document.head.removeChild(me),Rt=null,me=null,Xe=-1)}function ht(e,t){var n,o;const r=ms(e,t);if(Rt!==r){if(Rt=r,me===null&&(me=document.createElement("style"),document.head.appendChild(me)),Xe>=0){var s;(s=me.sheet)===null||s===void 0||s.removeRule(Xe)}Xe=(n=(o=me.sheet)===null||o===void 0?void 0:o.insertRule(`*{cursor: ${r} !important;}`))!==null&&n!==void 0?n:-1}}function Kn(e){return e.type==="keydown"}function Un(e){return e.type.startsWith("pointer")}function Bn(e){return e.type.startsWith("mouse")}function it(e){if(Un(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Bn(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function hs(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function xs(e,t,n){return e.x<t.x+t.width&&e.x+e.width>t.x&&e.y<t.y+t.height&&e.y+e.height>t.y}function vs(e,t){if(e===t)throw new Error("Cannot compare node with itself");const n={a:rn(e),b:rn(t)};let o;for(;n.a.at(-1)===n.b.at(-1);)e=n.a.pop(),t=n.b.pop(),o=e;A(o,"Stacking order can only be calculated for elements with a common ancestor");const r={a:on(nn(n.a)),b:on(nn(n.b))};if(r.a===r.b){const s=o.childNodes,c={a:n.a.at(-1),b:n.b.at(-1)};let i=s.length;for(;i--;){const u=s[i];if(u===c.a)return 1;if(u===c.b)return-1}}return Math.sign(r.a-r.b)}const ys=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function bs(e){var t;const n=getComputedStyle((t=Wn(e))!==null&&t!==void 0?t:e).display;return n==="flex"||n==="inline-flex"}function Es(e){const t=getComputedStyle(e);return!!(t.position==="fixed"||t.zIndex!=="auto"&&(t.position!=="static"||bs(e))||+t.opacity<1||"transform"in t&&t.transform!=="none"||"webkitTransform"in t&&t.webkitTransform!=="none"||"mixBlendMode"in t&&t.mixBlendMode!=="normal"||"filter"in t&&t.filter!=="none"||"webkitFilter"in t&&t.webkitFilter!=="none"||"isolation"in t&&t.isolation==="isolate"||ys.test(t.willChange)||t.webkitOverflowScrolling==="touch")}function nn(e){let t=e.length;for(;t--;){const n=e[t];if(A(n,"Missing node"),Es(n))return n}return null}function on(e){return e&&Number(getComputedStyle(e).zIndex)||0}function rn(e){const t=[];for(;e;)t.push(e),e=Wn(e);return t}function Wn(e){const{parentNode:t}=e;return t&&t instanceof ShadowRoot?t.host:t}const Vn=1,Yn=2,Xn=4,qn=8,ws=hs()==="coarse";let se=[],De=!1,he=new Map,lt=new Map;const ze=new Set;function Cs(e,t,n,o,r){var s;const{ownerDocument:c}=t,i={direction:n,element:t,hitAreaMargins:o,setResizeHandlerState:r},u=(s=he.get(c))!==null&&s!==void 0?s:0;return he.set(c,u+1),ze.add(i),Qe(),function(){var p;lt.delete(e),ze.delete(i);const f=(p=he.get(c))!==null&&p!==void 0?p:1;if(he.set(c,f-1),Qe(),f===1&&he.delete(c),se.includes(i)){const m=se.indexOf(i);m>=0&&se.splice(m,1),Ft(),r("up",!0,null)}}}function Ss(e){const{target:t}=e,{x:n,y:o}=it(e);De=!0,zt({target:t,x:n,y:o}),Qe(),se.length>0&&(et("down",e),e.preventDefault(),Zn(t)||e.stopImmediatePropagation())}function xt(e){const{x:t,y:n}=it(e);if(De&&e.buttons===0&&(De=!1,et("up",e)),!De){const{target:o}=e;zt({target:o,x:t,y:n})}et("move",e),Ft(),se.length>0&&e.preventDefault()}function vt(e){const{target:t}=e,{x:n,y:o}=it(e);lt.clear(),De=!1,se.length>0&&(e.preventDefault(),Zn(t)||e.stopImmediatePropagation()),et("up",e),zt({target:t,x:n,y:o}),Ft(),Qe()}function Zn(e){let t=e;for(;t;){if(t.hasAttribute(W.resizeHandle))return!0;t=t.parentElement}return!1}function zt({target:e,x:t,y:n}){se.splice(0);let o=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(o=e),ze.forEach(r=>{const{element:s,hitAreaMargins:c}=r,i=s.getBoundingClientRect(),{bottom:u,left:g,right:p,top:f}=i,m=ws?c.coarse:c.fine;if(t>=g-m&&t<=p+m&&n>=f-m&&n<=u+m){if(o!==null&&document.contains(o)&&s!==o&&!s.contains(o)&&!o.contains(s)&&vs(o,s)>0){let b=o,y=!1;for(;b&&!b.contains(s);){if(xs(b.getBoundingClientRect(),i)){y=!0;break}b=b.parentElement}if(y)return}se.push(r)}})}function yt(e,t){lt.set(e,t)}function Ft(){let e=!1,t=!1;se.forEach(o=>{const{direction:r}=o;r==="horizontal"?e=!0:t=!0});let n=0;lt.forEach(o=>{n|=o}),e&&t?ht("intersection",n):e?ht("horizontal",n):t?ht("vertical",n):gs()}let bt=new AbortController;function Qe(){bt.abort(),bt=new AbortController;const e={capture:!0,signal:bt.signal};ze.size&&(De?(se.length>0&&he.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("contextmenu",vt,e),o.addEventListener("pointerleave",xt,e),o.addEventListener("pointermove",xt,e))}),window.addEventListener("pointerup",vt,e),window.addEventListener("pointercancel",vt,e)):he.forEach((t,n)=>{const{body:o}=n;t>0&&(o.addEventListener("pointerdown",Ss,e),o.addEventListener("pointermove",xt,e))}))}function et(e,t){ze.forEach(n=>{const{setResizeHandlerState:o}=n,r=se.includes(n);o(e,r,t)})}function Is(){const[e,t]=a.useState(0);return a.useCallback(()=>t(n=>n+1),[])}function A(e,t){if(!e)throw console.error(t),Error(t)}function ye(e,t,n=Ot){return e.toFixed(n)===t.toFixed(n)?0:e>t?1:-1}function ue(e,t,n=Ot){return ye(e,t,n)===0}function ee(e,t,n){return ye(e,t,n)===0}function Ps(e,t,n){if(e.length!==t.length)return!1;for(let o=0;o<e.length;o++){const r=e[o],s=t[o];if(!ee(r,s,n))return!1}return!0}function Re({panelConstraints:e,panelIndex:t,size:n}){const o=e[t];A(o!=null,`Panel constraints not found for index ${t}`);let{collapsedSize:r=0,collapsible:s,maxSize:c=100,minSize:i=0}=o;if(ye(n,i)<0)if(s){const u=(r+i)/2;ye(n,u)<0?n=r:n=i}else n=i;return n=Math.min(c,n),n=parseFloat(n.toFixed(Ot)),n}function Le({delta:e,initialLayout:t,panelConstraints:n,pivotIndices:o,prevLayout:r,trigger:s}){if(ee(e,0))return t;const c=[...t],[i,u]=o;A(i!=null,"Invalid first pivot index"),A(u!=null,"Invalid second pivot index");let g=0;if(s==="keyboard"){{const f=e<0?u:i,m=n[f];A(m,`Panel constraints not found for index ${f}`);const{collapsedSize:h=0,collapsible:b,minSize:y=0}=m;if(b){const v=t[f];if(A(v!=null,`Previous layout not found for panel index ${f}`),ee(v,h)){const d=y-v;ye(d,Math.abs(e))>0&&(e=e<0?0-d:d)}}}{const f=e<0?i:u,m=n[f];A(m,`No panel constraints found for index ${f}`);const{collapsedSize:h=0,collapsible:b,minSize:y=0}=m;if(b){const v=t[f];if(A(v!=null,`Previous layout not found for panel index ${f}`),ee(v,y)){const d=v-h;ye(d,Math.abs(e))>0&&(e=e<0?0-d:d)}}}}{const f=e<0?1:-1;let m=e<0?u:i,h=0;for(;;){const y=t[m];A(y!=null,`Previous layout not found for panel index ${m}`);const d=Re({panelConstraints:n,panelIndex:m,size:100})-y;if(h+=d,m+=f,m<0||m>=n.length)break}const b=Math.min(Math.abs(e),Math.abs(h));e=e<0?0-b:b}{let m=e<0?i:u;for(;m>=0&&m<n.length;){const h=Math.abs(e)-Math.abs(g),b=t[m];A(b!=null,`Previous layout not found for panel index ${m}`);const y=b-h,v=Re({panelConstraints:n,panelIndex:m,size:y});if(!ee(b,v)&&(g+=b-v,c[m]=v,g.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?m--:m++}}if(Ps(r,c))return r;{const f=e<0?u:i,m=t[f];A(m!=null,`Previous layout not found for panel index ${f}`);const h=m+g,b=Re({panelConstraints:n,panelIndex:f,size:h});if(c[f]=b,!ee(b,h)){let y=h-b,d=e<0?u:i;for(;d>=0&&d<n.length;){const x=c[d];A(x!=null,`Previous layout not found for panel index ${d}`);const E=x+y,w=Re({panelConstraints:n,panelIndex:d,size:E});if(ee(x,w)||(y-=w-x,c[d]=w),ee(y,0))break;e>0?d--:d++}}}const p=c.reduce((f,m)=>m+f,0);return ee(p,100)?c:r}function Ms({layout:e,panelsArray:t,pivotIndices:n}){let o=0,r=100,s=0,c=0;const i=n[0];A(i!=null,"No pivot index found"),t.forEach((f,m)=>{const{constraints:h}=f,{maxSize:b=100,minSize:y=0}=h;m===i?(o=y,r=b):(s+=y,c+=b)});const u=Math.min(r,100-s),g=Math.max(o,100-c),p=e[i];return{valueMax:u,valueMin:g,valueNow:p}}function Fe(e,t=document){return Array.from(t.querySelectorAll(`[${W.resizeHandleId}][data-panel-group-id="${e}"]`))}function Jn(e,t,n=document){const r=Fe(e,n).findIndex(s=>s.getAttribute(W.resizeHandleId)===t);return r??null}function Qn(e,t,n){const o=Jn(e,t,n);return o!=null?[o,o+1]:[-1,-1]}function eo(e,t=document){var n;if(t instanceof HTMLElement&&(t==null||(n=t.dataset)===null||n===void 0?void 0:n.panelGroupId)==e)return t;const o=t.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return o||null}function ct(e,t=document){const n=t.querySelector(`[${W.resizeHandleId}="${e}"]`);return n||null}function Rs(e,t,n,o=document){var r,s,c,i;const u=ct(t,o),g=Fe(e,o),p=u?g.indexOf(u):-1,f=(r=(s=n[p])===null||s===void 0?void 0:s.id)!==null&&r!==void 0?r:null,m=(c=(i=n[p+1])===null||i===void 0?void 0:i.id)!==null&&c!==void 0?c:null;return[f,m]}function Ns({committedValuesRef:e,eagerValuesRef:t,groupId:n,layout:o,panelDataArray:r,panelGroupElement:s,setLayout:c}){a.useRef({didWarnAboutMissingResizeHandle:!1}),ve(()=>{if(!s)return;const i=Fe(n,s);for(let u=0;u<r.length-1;u++){const{valueMax:g,valueMin:p,valueNow:f}=Ms({layout:o,panelsArray:r,pivotIndices:[u,u+1]}),m=i[u];if(m!=null){const h=r[u];A(h,`No panel data found for index "${u}"`),m.setAttribute("aria-controls",h.id),m.setAttribute("aria-valuemax",""+Math.round(g)),m.setAttribute("aria-valuemin",""+Math.round(p)),m.setAttribute("aria-valuenow",f!=null?""+Math.round(f):"")}}return()=>{i.forEach((u,g)=>{u.removeAttribute("aria-controls"),u.removeAttribute("aria-valuemax"),u.removeAttribute("aria-valuemin"),u.removeAttribute("aria-valuenow")})}},[n,o,r,s]),a.useEffect(()=>{if(!s)return;const i=t.current;A(i,"Eager values not found");const{panelDataArray:u}=i,g=eo(n,s);A(g!=null,`No group found for id "${n}"`);const p=Fe(n,s);A(p,`No resize handles found for group id "${n}"`);const f=p.map(m=>{const h=m.getAttribute(W.resizeHandleId);A(h,"Resize handle element has no handle id attribute");const[b,y]=Rs(n,h,u,s);if(b==null||y==null)return()=>{};const v=d=>{if(!d.defaultPrevented)switch(d.key){case"Enter":{d.preventDefault();const x=u.findIndex(E=>E.id===b);if(x>=0){const E=u[x];A(E,`No panel data found for index ${x}`);const w=o[x],{collapsedSize:j=0,collapsible:S,minSize:C=0}=E.constraints;if(w!=null&&S){const N=Le({delta:ee(w,j)?C-j:j-w,initialLayout:o,panelConstraints:u.map(z=>z.constraints),pivotIndices:Qn(n,h,s),prevLayout:o,trigger:"keyboard"});o!==N&&c(N)}}break}}};return m.addEventListener("keydown",v),()=>{m.removeEventListener("keydown",v)}});return()=>{f.forEach(m=>m())}},[s,e,t,n,o,r,c])}function sn(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function to(e,t){const n=e==="horizontal",{x:o,y:r}=it(t);return n?o:r}function Ds(e,t,n,o,r){const s=n==="horizontal",c=ct(t,r);A(c,`No resize handle element found for id "${t}"`);const i=c.getAttribute(W.groupId);A(i,"Resize handle element has no group id attribute");let{initialCursorPosition:u}=o;const g=to(n,e),p=eo(i,r);A(p,`No group element found for id "${i}"`);const f=p.getBoundingClientRect(),m=s?f.width:f.height;return(g-u)/m*100}function _s(e,t,n,o,r,s){if(Kn(e)){const c=n==="horizontal";let i=0;e.shiftKey?i=100:r!=null?i=r:i=10;let u=0;switch(e.key){case"ArrowDown":u=c?0:i;break;case"ArrowLeft":u=c?-i:0;break;case"ArrowRight":u=c?i:0;break;case"ArrowUp":u=c?0:-i;break;case"End":u=100;break;case"Home":u=-100;break}return u}else return o==null?0:Ds(e,t,n,o,s)}function js({panelDataArray:e}){const t=Array(e.length),n=e.map(s=>s.constraints);let o=0,r=100;for(let s=0;s<e.length;s++){const c=n[s];A(c,`Panel constraints not found for index ${s}`);const{defaultSize:i}=c;i!=null&&(o++,t[s]=i,r-=i)}for(let s=0;s<e.length;s++){const c=n[s];A(c,`Panel constraints not found for index ${s}`);const{defaultSize:i}=c;if(i!=null)continue;const u=e.length-o,g=r/u;o++,t[s]=g,r-=g}return t}function Ie(e,t,n){t.forEach((o,r)=>{const s=e[r];A(s,`Panel data not found for index ${r}`);const{callbacks:c,constraints:i,id:u}=s,{collapsedSize:g=0,collapsible:p}=i,f=n[u];if(f==null||o!==f){n[u]=o;const{onCollapse:m,onExpand:h,onResize:b}=c;b&&b(o,f),p&&(m||h)&&(h&&(f==null||ue(f,g))&&!ue(o,g)&&h(),m&&(f==null||!ue(f,g))&&ue(o,g)&&m())}})}function Ye(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0}function Ts({defaultSize:e,dragState:t,layout:n,panelData:o,panelIndex:r,precision:s=3}){const c=n[r];let i;return c==null?i=e!=null?e.toPrecision(s):"1":o.length===1?i="1":i=c.toPrecision(s),{flexBasis:0,flexGrow:i,flexShrink:1,overflow:"hidden",pointerEvents:t!==null?"none":void 0}}function As(e,t=10){let n=null;return(...r)=>{n!==null&&clearTimeout(n),n=setTimeout(()=>{e(...r)},t)}}function an(e){try{if(typeof localStorage<"u")e.getItem=t=>localStorage.getItem(t),e.setItem=(t,n)=>{localStorage.setItem(t,n)};else throw new Error("localStorage not supported in this environment")}catch(t){console.error(t),e.getItem=()=>null,e.setItem=()=>{}}}function no(e){return`react-resizable-panels:${e}`}function oo(e){return e.map(t=>{const{constraints:n,id:o,idIsFromProps:r,order:s}=t;return r?o:s?`${s}:${JSON.stringify(n)}`:JSON.stringify(n)}).sort((t,n)=>t.localeCompare(n)).join(",")}function ro(e,t){try{const n=no(e),o=t.getItem(n);if(o){const r=JSON.parse(o);if(typeof r=="object"&&r!=null)return r}}catch{}return null}function Ls(e,t,n){var o,r;const s=(o=ro(e,n))!==null&&o!==void 0?o:{},c=oo(t);return(r=s[c])!==null&&r!==void 0?r:null}function Os(e,t,n,o,r){var s;const c=no(e),i=oo(t),u=(s=ro(e,r))!==null&&s!==void 0?s:{};u[i]={expandToSizes:Object.fromEntries(n.entries()),layout:o};try{r.setItem(c,JSON.stringify(u))}catch(g){console.error(g)}}function ln({layout:e,panelConstraints:t}){const n=[...e],o=n.reduce((s,c)=>s+c,0);if(n.length!==t.length)throw Error(`Invalid ${t.length} panel layout: ${n.map(s=>`${s}%`).join(", ")}`);if(!ee(o,100)&&n.length>0)for(let s=0;s<t.length;s++){const c=n[s];A(c!=null,`No layout data found for index ${s}`);const i=100/o*c;n[s]=i}let r=0;for(let s=0;s<t.length;s++){const c=n[s];A(c!=null,`No layout data found for index ${s}`);const i=Re({panelConstraints:t,panelIndex:s,size:c});c!=i&&(r+=c-i,n[s]=i)}if(!ee(r,0))for(let s=0;s<t.length;s++){const c=n[s];A(c!=null,`No layout data found for index ${s}`);const i=c+r,u=Re({panelConstraints:t,panelIndex:s,size:i});if(c!==u&&(r-=u-c,n[s]=u,ee(r,0)))break}return n}const ks=100,Oe={getItem:e=>(an(Oe),Oe.getItem(e)),setItem:(e,t)=>{an(Oe),Oe.setItem(e,t)}},cn={};function so({autoSaveId:e=null,children:t,className:n="",direction:o,forwardedRef:r,id:s=null,onLayout:c=null,keyboardResizeBy:i=null,storage:u=Oe,style:g,tagName:p="div",...f}){const m=kt(s),h=a.useRef(null),[b,y]=a.useState(null),[v,d]=a.useState([]),x=Is(),E=a.useRef({}),w=a.useRef(new Map),j=a.useRef(0),S=a.useRef({autoSaveId:e,direction:o,dragState:b,id:m,keyboardResizeBy:i,onLayout:c,storage:u}),C=a.useRef({layout:v,panelDataArray:[],panelDataArrayChanged:!1});a.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]}),a.useImperativeHandle(r,()=>({getId:()=>S.current.id,getLayout:()=>{const{layout:I}=C.current;return I},setLayout:I=>{const{onLayout:R}=S.current,{layout:T,panelDataArray:M}=C.current,P=ln({layout:I,panelConstraints:M.map(_=>_.constraints)});sn(T,P)||(d(P),C.current.layout=P,R&&R(P),Ie(M,P,E.current))}}),[]),ve(()=>{S.current.autoSaveId=e,S.current.direction=o,S.current.dragState=b,S.current.id=m,S.current.onLayout=c,S.current.storage=u}),Ns({committedValuesRef:S,eagerValuesRef:C,groupId:m,layout:v,panelDataArray:C.current.panelDataArray,setLayout:d,panelGroupElement:h.current}),a.useEffect(()=>{const{panelDataArray:I}=C.current;if(e){if(v.length===0||v.length!==I.length)return;let R=cn[e];R==null&&(R=As(Os,ks),cn[e]=R);const T=[...I],M=new Map(w.current);R(e,T,M,v,u)}},[e,v,u]),a.useEffect(()=>{});const N=a.useCallback(I=>{const{onLayout:R}=S.current,{layout:T,panelDataArray:M}=C.current;if(I.constraints.collapsible){const P=M.map(ie=>ie.constraints),{collapsedSize:_=0,panelSize:O,pivotIndices:U}=ge(M,I,T);if(A(O!=null,`Panel size not found for panel "${I.id}"`),!ue(O,_)){w.current.set(I.id,O);const le=Pe(M,I)===M.length-1?O-_:_-O,B=Le({delta:le,initialLayout:T,panelConstraints:P,pivotIndices:U,prevLayout:T,trigger:"imperative-api"});Ye(T,B)||(d(B),C.current.layout=B,R&&R(B),Ie(M,B,E.current))}}},[]),z=a.useCallback((I,R)=>{const{onLayout:T}=S.current,{layout:M,panelDataArray:P}=C.current;if(I.constraints.collapsible){const _=P.map(re=>re.constraints),{collapsedSize:O=0,panelSize:U=0,minSize:ie=0,pivotIndices:le}=ge(P,I,M),B=R??ie;if(ue(U,O)){const re=w.current.get(I.id),je=re!=null&&re>=B?re:B,mt=Pe(P,I)===P.length-1?U-je:je-U,Q=Le({delta:mt,initialLayout:M,panelConstraints:_,pivotIndices:le,prevLayout:M,trigger:"imperative-api"});Ye(M,Q)||(d(Q),C.current.layout=Q,T&&T(Q),Ie(P,Q,E.current))}}},[]),F=a.useCallback(I=>{const{layout:R,panelDataArray:T}=C.current,{panelSize:M}=ge(T,I,R);return A(M!=null,`Panel size not found for panel "${I.id}"`),M},[]),K=a.useCallback((I,R)=>{const{panelDataArray:T}=C.current,M=Pe(T,I);return Ts({defaultSize:R,dragState:b,layout:v,panelData:T,panelIndex:M})},[b,v]),$=a.useCallback(I=>{const{layout:R,panelDataArray:T}=C.current,{collapsedSize:M=0,collapsible:P,panelSize:_}=ge(T,I,R);return A(_!=null,`Panel size not found for panel "${I.id}"`),P===!0&&ue(_,M)},[]),X=a.useCallback(I=>{const{layout:R,panelDataArray:T}=C.current,{collapsedSize:M=0,collapsible:P,panelSize:_}=ge(T,I,R);return A(_!=null,`Panel size not found for panel "${I.id}"`),!P||ye(_,M)>0},[]),G=a.useCallback(I=>{const{panelDataArray:R}=C.current;R.push(I),R.sort((T,M)=>{const P=T.order,_=M.order;return P==null&&_==null?0:P==null?-1:_==null?1:P-_}),C.current.panelDataArrayChanged=!0,x()},[x]);ve(()=>{if(C.current.panelDataArrayChanged){C.current.panelDataArrayChanged=!1;const{autoSaveId:I,onLayout:R,storage:T}=S.current,{layout:M,panelDataArray:P}=C.current;let _=null;if(I){const U=Ls(I,P,T);U&&(w.current=new Map(Object.entries(U.expandToSizes)),_=U.layout)}_==null&&(_=js({panelDataArray:P}));const O=ln({layout:_,panelConstraints:P.map(U=>U.constraints)});sn(M,O)||(d(O),C.current.layout=O,R&&R(O),Ie(P,O,E.current))}}),ve(()=>{const I=C.current;return()=>{I.layout=[]}},[]);const k=a.useCallback(I=>{let R=!1;const T=h.current;return T&&window.getComputedStyle(T,null).getPropertyValue("direction")==="rtl"&&(R=!0),function(P){P.preventDefault();const _=h.current;if(!_)return()=>null;const{direction:O,dragState:U,id:ie,keyboardResizeBy:le,onLayout:B}=S.current,{layout:re,panelDataArray:je}=C.current,{initialLayout:Ve}=U??{},mt=Qn(ie,I,_);let Q=_s(P,I,O,U,le,_);const Jt=O==="horizontal";Jt&&R&&(Q=-Q);const hr=je.map(xr=>xr.constraints),Te=Le({delta:Q,initialLayout:Ve??re,panelConstraints:hr,pivotIndices:mt,prevLayout:re,trigger:Kn(P)?"keyboard":"mouse-or-touch"}),Qt=!Ye(re,Te);(Un(P)||Bn(P))&&j.current!=Q&&(j.current=Q,!Qt&&Q!==0?Jt?yt(I,Q<0?Vn:Yn):yt(I,Q<0?Xn:qn):yt(I,0)),Qt&&(d(Te),C.current.layout=Te,B&&B(Te),Ie(je,Te,E.current))}},[]),H=a.useCallback((I,R)=>{const{onLayout:T}=S.current,{layout:M,panelDataArray:P}=C.current,_=P.map(re=>re.constraints),{panelSize:O,pivotIndices:U}=ge(P,I,M);A(O!=null,`Panel size not found for panel "${I.id}"`);const le=Pe(P,I)===P.length-1?O-R:R-O,B=Le({delta:le,initialLayout:M,panelConstraints:_,pivotIndices:U,prevLayout:M,trigger:"imperative-api"});Ye(M,B)||(d(B),C.current.layout=B,T&&T(B),Ie(P,B,E.current))},[]),ce=a.useCallback((I,R)=>{const{layout:T,panelDataArray:M}=C.current,{collapsedSize:P=0,collapsible:_}=R,{collapsedSize:O=0,collapsible:U,maxSize:ie=100,minSize:le=0}=I.constraints,{panelSize:B}=ge(M,I,T);B!=null&&(_&&U&&ue(B,P)?ue(P,O)||H(I,O):B<le?H(I,le):B>ie&&H(I,ie))},[H]),Z=a.useCallback((I,R)=>{const{direction:T}=S.current,{layout:M}=C.current;if(!h.current)return;const P=ct(I,h.current);A(P,`Drag handle element not found for id "${I}"`);const _=to(T,R);y({dragHandleId:I,dragHandleRect:P.getBoundingClientRect(),initialCursorPosition:_,initialLayout:M})},[]),D=a.useCallback(()=>{y(null)},[]),V=a.useCallback(I=>{const{panelDataArray:R}=C.current,T=Pe(R,I);T>=0&&(R.splice(T,1),delete E.current[I.id],C.current.panelDataArrayChanged=!0,x())},[x]),Y=a.useMemo(()=>({collapsePanel:N,direction:o,dragState:b,expandPanel:z,getPanelSize:F,getPanelStyle:K,groupId:m,isPanelCollapsed:$,isPanelExpanded:X,reevaluatePanelConstraints:ce,registerPanel:G,registerResizeHandle:k,resizePanel:H,startDragging:Z,stopDragging:D,unregisterPanel:V,panelGroupElement:h.current}),[N,b,o,z,F,K,m,$,X,ce,G,k,H,Z,D,V]),J={display:"flex",flexDirection:o==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return a.createElement(at.Provider,{value:Y},a.createElement(p,{...f,children:t,className:n,id:s,ref:h,style:{...J,...g},[W.group]:"",[W.groupDirection]:o,[W.groupId]:m}))}const ao=a.forwardRef((e,t)=>a.createElement(so,{...e,forwardedRef:t}));so.displayName="PanelGroup";ao.displayName="forwardRef(PanelGroup)";function Pe(e,t){return e.findIndex(n=>n===t||n.id===t.id)}function ge(e,t,n){const o=Pe(e,t),s=o===e.length-1?[o-1,o]:[o,o+1],c=n[o];return{...t.constraints,panelSize:c,pivotIndices:s}}function zs({disabled:e,handleId:t,resizeHandler:n,panelGroupElement:o}){a.useEffect(()=>{if(e||n==null||o==null)return;const r=ct(t,o);if(r==null)return;const s=c=>{if(!c.defaultPrevented)switch(c.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{c.preventDefault(),n(c);break}case"F6":{c.preventDefault();const i=r.getAttribute(W.groupId);A(i,`No group element found for id "${i}"`);const u=Fe(i,o),g=Jn(i,t,o);A(g!==null,`No resize element found for id "${t}"`);const p=c.shiftKey?g>0?g-1:u.length-1:g+1<u.length?g+1:0;u[p].focus();break}}};return r.addEventListener("keydown",s),()=>{r.removeEventListener("keydown",s)}},[o,e,t,n])}function io({children:e=null,className:t="",disabled:n=!1,hitAreaMargins:o,id:r,onBlur:s,onClick:c,onDragging:i,onFocus:u,onPointerDown:g,onPointerUp:p,style:f={},tabIndex:m=0,tagName:h="div",...b}){var y,v;const d=a.useRef(null),x=a.useRef({onClick:c,onDragging:i,onPointerDown:g,onPointerUp:p});a.useEffect(()=>{x.current.onClick=c,x.current.onDragging=i,x.current.onPointerDown=g,x.current.onPointerUp=p});const E=a.useContext(at);if(E===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:w,groupId:j,registerResizeHandle:S,startDragging:C,stopDragging:N,panelGroupElement:z}=E,F=kt(r),[K,$]=a.useState("inactive"),[X,G]=a.useState(!1),[k,H]=a.useState(null),ce=a.useRef({state:K});ve(()=>{ce.current.state=K}),a.useEffect(()=>{if(n)H(null);else{const Y=S(F);H(()=>Y)}},[n,F,S]);const Z=(y=o==null?void 0:o.coarse)!==null&&y!==void 0?y:15,D=(v=o==null?void 0:o.fine)!==null&&v!==void 0?v:5;a.useEffect(()=>{if(n||k==null)return;const Y=d.current;A(Y,"Element ref not attached");let J=!1;return Cs(F,Y,w,{coarse:Z,fine:D},(R,T,M)=>{if(!T){$("inactive");return}switch(R){case"down":{$("drag"),J=!1,A(M,'Expected event to be defined for "down" action'),C(F,M);const{onDragging:P,onPointerDown:_}=x.current;P==null||P(!0),_==null||_();break}case"move":{const{state:P}=ce.current;J=!0,P!=="drag"&&$("hover"),A(M,'Expected event to be defined for "move" action'),k(M);break}case"up":{$("hover"),N();const{onClick:P,onDragging:_,onPointerUp:O}=x.current;_==null||_(!1),O==null||O(),J||P==null||P();break}}})},[Z,w,n,D,S,F,k,C,N]),zs({disabled:n,handleId:F,resizeHandler:k,panelGroupElement:z});const V={touchAction:"none",userSelect:"none"};return a.createElement(h,{...b,children:e,className:t,id:r,onBlur:()=>{G(!1),s==null||s()},onFocus:()=>{G(!0),u==null||u()},ref:d,role:"separator",style:{...V,...f},tabIndex:m,[W.groupDirection]:w,[W.groupId]:j,[W.resizeHandle]:"",[W.resizeHandleActive]:K==="drag"?"pointer":X?"keyboard":void 0,[W.resizeHandleEnabled]:!n,[W.resizeHandleId]:F,[W.resizeHandleState]:K})}io.displayName="PanelResizeHandle";const Fs=e=>{if(!(e in _e))throw new Error(`Level ${e} not found`);const t=_e[e];Me.setState(()=>({gameObjects:new Map(t.modifiableGameObjects.map(o=>[o.id,new Map(o.connections.map(r=>[r.label,{access:r.access,value:0}]))]))})),t.initialState()};var $s=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gs=$s.reduce((e,t)=>{const n=jt(`Primitive.${t}`),o=a.forwardRef((r,s)=>{const{asChild:c,...i}=r,u=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...i,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),Et="focusScope.autoFocusOnMount",wt="focusScope.autoFocusOnUnmount",un={bubbles:!1,cancelable:!0},Hs="FocusScope",lo=a.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...c}=e,[i,u]=a.useState(null),g=de(r),p=de(s),f=a.useRef(null),m=te(t,y=>u(y)),h=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(o){let y=function(E){if(h.paused||!i)return;const w=E.target;i.contains(w)?f.current=w:fe(f.current,{select:!0})},v=function(E){if(h.paused||!i)return;const w=E.relatedTarget;w!==null&&(i.contains(w)||fe(f.current,{select:!0}))},d=function(E){if(document.activeElement===document.body)for(const j of E)j.removedNodes.length>0&&fe(i)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const x=new MutationObserver(d);return i&&x.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),x.disconnect()}}},[o,i,h.paused]),a.useEffect(()=>{if(i){fn.add(h);const y=document.activeElement;if(!i.contains(y)){const d=new CustomEvent(Et,un);i.addEventListener(Et,g),i.dispatchEvent(d),d.defaultPrevented||(Ks(Ys(co(i)),{select:!0}),document.activeElement===y&&fe(i))}return()=>{i.removeEventListener(Et,g),setTimeout(()=>{const d=new CustomEvent(wt,un);i.addEventListener(wt,p),i.dispatchEvent(d),d.defaultPrevented||fe(y??document.body,{select:!0}),i.removeEventListener(wt,p),fn.remove(h)},0)}}},[i,g,p,h]);const b=a.useCallback(y=>{if(!n&&!o||h.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,d=document.activeElement;if(v&&d){const x=y.currentTarget,[E,w]=Us(x);E&&w?!y.shiftKey&&d===w?(y.preventDefault(),n&&fe(E,{select:!0})):y.shiftKey&&d===E&&(y.preventDefault(),n&&fe(w,{select:!0})):d===x&&y.preventDefault()}},[n,o,h.paused]);return l.jsx(Gs.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});lo.displayName=Hs;function Ks(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(fe(o,{select:t}),document.activeElement!==n)return}function Us(e){const t=co(e),n=dn(t,e),o=dn(t.reverse(),e);return[n,o]}function co(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function dn(e,t){for(const n of e)if(!Bs(n,{upTo:t}))return n}function Bs(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ws(e){return e instanceof HTMLInputElement&&"select"in e}function fe(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Ws(e)&&t&&e.select()}}var fn=Vs();function Vs(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=pn(e,t),e.unshift(t)},remove(t){var n;e=pn(e,t),(n=e[0])==null||n.resume()}}}function pn(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function Ys(e){return e.filter(t=>t.tagName!=="A")}var Xs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],He=Xs.reduce((e,t)=>{const n=jt(`Primitive.${t}`),o=a.forwardRef((r,s)=>{const{asChild:c,...i}=r,u=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...i,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),ut="Dialog",[uo,Tl]=rt(ut),[qs,ae]=uo(ut),fo=e=>{const{__scopeDialog:t,children:n,open:o,defaultOpen:r,onOpenChange:s,modal:c=!0}=e,i=a.useRef(null),u=a.useRef(null),[g,p]=Tt({prop:o,defaultProp:r??!1,onChange:s,caller:ut});return l.jsx(qs,{scope:t,triggerRef:i,contentRef:u,contentId:Ne(),titleId:Ne(),descriptionId:Ne(),open:g,onOpenChange:p,onOpenToggle:a.useCallback(()=>p(f=>!f),[p]),modal:c,children:n})};fo.displayName=ut;var po="DialogTrigger",mo=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(po,n),s=te(t,r.triggerRef);return l.jsx(He.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":Kt(r.open),...o,ref:s,onClick:L(e.onClick,r.onOpenToggle)})});mo.displayName=po;var $t="DialogPortal",[Zs,go]=uo($t,{forceMount:void 0}),ho=e=>{const{__scopeDialog:t,forceMount:n,children:o,container:r}=e,s=ae($t,t);return l.jsx(Zs,{scope:t,forceMount:n,children:a.Children.map(o,c=>l.jsx(Ee,{present:n||s.open,children:l.jsx(zr,{asChild:!0,container:r,children:c})}))})};ho.displayName=$t;var tt="DialogOverlay",xo=a.forwardRef((e,t)=>{const n=go(tt,e.__scopeDialog),{forceMount:o=n.forceMount,...r}=e,s=ae(tt,e.__scopeDialog);return s.modal?l.jsx(Ee,{present:o||s.open,children:l.jsx(Qs,{...r,ref:t})}):null});xo.displayName=tt;var Js=jt("DialogOverlay.RemoveScroll"),Qs=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(tt,n);return l.jsx(_n,{as:Js,allowPinchZoom:!0,shards:[r.contentRef],children:l.jsx(He.div,{"data-state":Kt(r.open),...o,ref:t,style:{pointerEvents:"auto",...o.style}})})}),be="DialogContent",vo=a.forwardRef((e,t)=>{const n=go(be,e.__scopeDialog),{forceMount:o=n.forceMount,...r}=e,s=ae(be,e.__scopeDialog);return l.jsx(Ee,{present:o||s.open,children:s.modal?l.jsx(ea,{...r,ref:t}):l.jsx(ta,{...r,ref:t})})});vo.displayName=be;var ea=a.forwardRef((e,t)=>{const n=ae(be,e.__scopeDialog),o=a.useRef(null),r=te(t,n.contentRef,o);return a.useEffect(()=>{const s=o.current;if(s)return jn(s)},[]),l.jsx(yo,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:L(e.onCloseAutoFocus,s=>{var c;s.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:L(e.onPointerDownOutside,s=>{const c=s.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&s.preventDefault()}),onFocusOutside:L(e.onFocusOutside,s=>s.preventDefault())})}),ta=a.forwardRef((e,t)=>{const n=ae(be,e.__scopeDialog),o=a.useRef(!1),r=a.useRef(!1);return l.jsx(yo,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,s),s.defaultPrevented||(o.current||(i=n.triggerRef.current)==null||i.focus(),s.preventDefault()),o.current=!1,r.current=!1},onInteractOutside:s=>{var u,g;(u=e.onInteractOutside)==null||u.call(e,s),s.defaultPrevented||(o.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const c=s.target;((g=n.triggerRef.current)==null?void 0:g.contains(c))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),yo=a.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:r,onCloseAutoFocus:s,...c}=e,i=ae(be,n),u=a.useRef(null),g=te(t,u);return Tn(),l.jsxs(l.Fragment,{children:[l.jsx(lo,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:r,onUnmountAutoFocus:s,children:l.jsx(Fr,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Kt(i.open),...c,ref:g,onDismiss:()=>i.onOpenChange(!1)})}),l.jsxs(l.Fragment,{children:[l.jsx(na,{titleId:i.titleId}),l.jsx(ra,{contentRef:u,descriptionId:i.descriptionId})]})]})}),Gt="DialogTitle",bo=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(Gt,n);return l.jsx(He.h2,{id:r.titleId,...o,ref:t})});bo.displayName=Gt;var Eo="DialogDescription",wo=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(Eo,n);return l.jsx(He.p,{id:r.descriptionId,...o,ref:t})});wo.displayName=Eo;var Co="DialogClose",Ht=a.forwardRef((e,t)=>{const{__scopeDialog:n,...o}=e,r=ae(Co,n);return l.jsx(He.button,{type:"button",...o,ref:t,onClick:L(e.onClick,()=>r.onOpenChange(!1))})});Ht.displayName=Co;function Kt(e){return e?"open":"closed"}var So="DialogTitleWarning",[Al,Io]=br(So,{contentName:be,titleName:Gt,docsSlug:"dialog"}),na=({titleId:e})=>{const t=Io(So),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return a.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},oa="DialogDescriptionWarning",ra=({contentRef:e,descriptionId:t})=>{const o=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Io(oa).contentName}}.`;return a.useEffect(()=>{var s;const r=(s=e.current)==null?void 0:s.getAttribute("aria-describedby");t&&r&&(document.getElementById(t)||console.warn(o))},[o,e,t]),null};function sa(e){const t=aa(e),n=a.forwardRef((o,r)=>{const{children:s,...c}=o,i=a.Children.toArray(s),u=i.find(la);if(u){const g=u.props.children,p=i.map(f=>f===u?a.Children.count(g)>1?a.Children.only(null):a.isValidElement(g)?g.props.children:null:f);return l.jsx(t,{...c,ref:r,children:a.isValidElement(g)?a.cloneElement(g,void 0,p):null})}return l.jsx(t,{...c,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}function aa(e){const t=a.forwardRef((n,o)=>{const{children:r,...s}=n;if(a.isValidElement(r)){const c=ua(r),i=ca(s,r.props);return r.type!==a.Fragment&&(i.ref=o?st(o,c):c),a.cloneElement(r,i)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var ia=Symbol("radix.slottable");function la(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===ia}function ca(e,t){const n={...t};for(const o in t){const r=e[o],s=t[o];/^on[A-Z]/.test(o)?r&&s?n[o]=(...i)=>{const u=s(...i);return r(...i),u}:r&&(n[o]=r):o==="style"?n[o]={...r,...s}:o==="className"&&(n[o]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function ua(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var da=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],fa=da.reduce((e,t)=>{const n=sa(`Primitive.${t}`),o=a.forwardRef((r,s)=>{const{asChild:c,...i}=r,u=c?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),l.jsx(u,{...i,ref:s})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{}),pa=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),ma="VisuallyHidden",Po=a.forwardRef((e,t)=>l.jsx(fa.span,{...e,ref:t,style:{...pa,...e.style}}));Po.displayName=ma;const ga=({title:e,trigger:t,defaultOpen:n,desc:o,children:r})=>l.jsxs(fo,{defaultOpen:n,children:[l.jsx(mo,{asChild:!0,children:t}),l.jsxs(ho,{children:[l.jsx(xo,{className:"fixed inset-0 bg-slate-800/25"}),l.jsxs(vo,{className:"fixed top-1/2 left-1/2 flex w-1/2 -translate-x-1/2 -translate-y-1/2 flex-col gap-6 rounded-lg border-2 border-blue-300 bg-slate-800/95 p-8 font-mono text-white",children:[l.jsx(Po,{asChild:!0,children:l.jsx(wo,{children:o})}),l.jsx(bo,{className:"text-center text-4xl font-bold capitalize",children:e}),l.jsx("div",{id:"dialog",children:r}),l.jsx(Ht,{asChild:!0,children:l.jsx("button",{className:"absolute top-2.5 right-2.5 inline-flex size-[25px] cursor-pointer appearance-none items-center justify-center rounded-full bg-slate-700 focus:outline-1 focus:outline-blue-300","aria-label":"Close",children:l.jsx(Er,{})})})]})]})]}),Mo=({defaultOpen:e=!1,skip:t=!1,trigger:n})=>{var y,v;const o=xe(d=>d.currentLevel),r=((y=_e[o])==null?void 0:y.goals)||["No goals defined for this level yet."],s=((v=_e[o])==null?void 0:v.dialog)||["No dialog available for this level."],c=a.useRef(0),[i,u]=a.useState(""),[g,p]=a.useState(s[c.current]),[f,m]=a.useState(t);a.useEffect(()=>{let d=0;const x=setInterval(()=>{d<=g.length?(u(g.slice(0,d)),d++):clearInterval(x)},10);return()=>{clearInterval(x),u("")}},[g]);const h=()=>{f||(c.current<s.length-1?(c.current++,p(s[c.current])):(c.current=0,m(!0),p("")))},b=()=>{f?(m(!1),c.current=s.length-1,p(s[c.current])):c.current>0&&(c.current--,p(s[c.current]))};return l.jsx(ga,{title:o,trigger:n,defaultOpen:e,desc:`This dialog displays the level goals and instructions for the
            ${o} level. You can close it by clicking the close button or
            pressing the escape key.`,children:l.jsxs("div",{className:"flex flex-col gap-5",children:[l.jsxs("div",{className:"flex flex-1 flex-row",children:[l.jsx("div",{className:"my-auto w-1/3 pr-4",children:l.jsx("div",{style:{aspectRatio:"1 / 1",width:"100%",backgroundImage:"url('/game/sprites/raccoon_spritesheet.png')",backgroundPosition:"0 0",backgroundSize:"400% 400%",backgroundRepeat:"no-repeat",imageRendering:"pixelated"}})}),l.jsxs("div",{className:"relative my-auto h-36 w-full rounded-lg bg-slate-700 p-4 text-white shadow-lg",children:[l.jsx("div",{className:"absolute top-1/2 -left-2.5 h-0 w-0 -translate-y-1/2 border-t-10 border-r-10 border-b-10 border-t-transparent border-r-slate-700 border-b-transparent"}),l.jsx("p",{className:"h-full overflow-auto pr-2 text-lg italic [&::-webkit-scrollbar]:w-2 [&::-webkit-scrollbar-thumb]:rounded-full [&::-webkit-scrollbar-thumb]:bg-slate-500 [&::-webkit-scrollbar-track]:rounded-full [&::-webkit-scrollbar-track]:bg-slate-900",children:f?l.jsxs(l.Fragment,{children:[l.jsx("span",{className:"not-italic",children:"Goals:"}),r.map(d=>l.jsx("li",{className:"text-lg italic",children:d},d.slice(0,20)))]}):i})]})]}),l.jsxs("div",{className:"flex flex-row justify-end gap-5",children:[l.jsx("button",{onClick:b,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Previous"}),f?l.jsx(Ht,{asChild:!0,children:l.jsx("button",{className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Start"})}):l.jsx("button",{onClick:h,className:"cursor-pointer rounded-lg bg-slate-700/80 px-3 py-2 hover:bg-slate-600 focus:outline-1 focus:outline-blue-300",children:"Next"})]})]})})},qe=In.forwardRef(({tooltip:e,className:t,children:n,side:o,...r},s)=>l.jsxs($r,{children:[l.jsx(Gr,{asChild:!0,children:l.jsx("button",{ref:s,className:Pn("cursor-pointer rounded bg-slate-800 p-2 outline outline-slate-500 hover:bg-slate-900",t),...r,children:n})}),l.jsx(Hr,{side:o,children:l.jsx("p",{children:e})})]})),ha=()=>{const e=xe(o=>o.isPaused),t=xe(o=>o.play),n=xe(o=>o.pause);return l.jsxs(Lt,{position:"top-left",className:"flex flex-col items-center justify-center gap-2",children:[l.jsx(qe,{tooltip:"Play/Pause",side:"right",onClick:()=>{e?t():n()},children:e?l.jsx(wr,{className:"text-white"}):l.jsx(Cr,{className:"text-white"})}),l.jsx(qe,{tooltip:"Reset Level",side:"right",children:l.jsx(Sr,{className:"text-white"})}),l.jsx(Mo,{skip:!0,trigger:l.jsx(qe,{tooltip:"Level Info",side:"right",children:l.jsx(Ir,{className:"text-white"})})})]})},Ut=({x:e,y:t,onClose:n,parentLoopId:o,children:r})=>{const s=xe(S=>S.currentLevel),c=_e[s].availableNodes,i=Object.values(Kr).flat(),{addNodes:u,addEdges:g,screenToFlowPosition:p,getNodes:f}=we(),m=a.useRef(null),[h,b]=a.useState(""),[y,v]=a.useState(0),[d,x]=a.useState(c.map(S=>({nodeType:S})));a.useEffect(()=>{var S;(S=m.current)==null||S.focus()},[]),a.useEffect(()=>{const S=c.filter(z=>z.toLowerCase().includes(h.toLowerCase())).map(z=>({nodeType:z}));if(h===""||!c.includes("MathFloat"))return x(S);const C=i.filter(z=>z.toLowerCase().includes(h.toLowerCase())).map(z=>({nodeType:"MathFloat",computeType:z})),N=[...S,...C];x(N),v(0)},[h]);const E=(S,C)=>{const N=S==="ForLoop"?Rn(u,e,t,g,p,o):[w(S,C)];o&&Nn(f,g,N,o),n()},w=(S,C)=>{const N=At();return u({id:N,type:S,position:p({x:e,y:t}),data:{initialComputeType:C,parentLoopId:o}}),N},j=S=>{if(S.key==="ArrowDown")S.preventDefault(),v(C=>(C+1)%d.length);else if(S.key==="ArrowUp")S.preventDefault(),v(C=>(C-1+d.length)%d.length);else if(S.key==="Enter"){S.preventDefault();const C=d[y];C&&E(C.nodeType,C.computeType)}};return a.useEffect(()=>(window.addEventListener("keydown",j),()=>window.removeEventListener("keydown",j)),[d,y]),l.jsxs("div",{className:"flex w-65 flex-col gap-2 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[l.jsx("div",{className:"shadow",children:l.jsx("input",{ref:m,type:"text",spellCheck:"false",placeholder:"Search",className:"w-full rounded bg-slate-900 p-2 text-sm text-white focus:border-gray-300 focus:ring-0 focus:outline-none",onChange:S=>b(S.target.value)})}),l.jsx("div",{className:"flex flex-col gap-1",children:d.map((S,C)=>l.jsx("button",{className:Pn("w-full cursor-pointer rounded px-2 py-1 text-left text-sm text-white",y===C?"bg-slate-700":"hover:bg-slate-700"),onClick:()=>E(S.nodeType,S.computeType),children:S.computeType?l.jsxs("span",{children:[l.jsx("span",{className:"text-slate-400",children:S.nodeType}),l.jsx(Pr,{className:"inline-block h-4 w-4 text-slate-400"}),l.jsx("span",{className:"",children:S.computeType})]}):l.jsx(l.Fragment,{children:S.nodeType})},`add_node_${S}_${C}`))}),h===""&&l.jsx(l.Fragment,{children:r})]})},xa=({nodeId:e,nodeType:t,nodeLoopId:n,x:o,y:r,onClose:s})=>l.jsx("div",{style:{position:"absolute",top:r,left:o,zIndex:1e3},children:t==="ForStart"||t==="ForEnd"?l.jsxs(Ut,{onClose:s,x:o,y:r,parentLoopId:n,children:[l.jsx("hr",{className:"mx-auto h-1 w-44 rounded-sm border-0 bg-slate-700"}),l.jsx(mn,{nodeId:e,onClose:s})]}):l.jsx("div",{className:"flex w-36 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:l.jsx(mn,{nodeId:e,onClose:s})})}),mn=({nodeId:e,onClose:t})=>{const{getNode:n,getNodes:o,setNodes:r,addNodes:s,setEdges:c,addEdges:i}=we(),u=a.useCallback(()=>{const p=n(e);if(!p)return;const f={x:p.position.x+50,y:p.position.y+50};if(p.data.loopStart||p.data.loopEnd)Rn(s,f.x,f.y,i);else{const m=At();s({...p,selected:!1,dragging:!1,id:m,position:f}),p.data.parentLoopId&&Nn(o,i,[m],p.data.parentLoopId)}t()},[n,e,t,s,i,o]),g=a.useCallback(()=>{r(p=>p.filter(f=>f.id!==e)),c(p=>p.filter(f=>f.source!==e)),t()},[r,c,t,e]);return l.jsxs(l.Fragment,{children:[l.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:u,children:[l.jsx("span",{children:"Duplicate"}),l.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Ctrl+D"})]}),l.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:g,children:[l.jsx("span",{children:"Delete"}),l.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})},va=({x:e,y:t,onClose:n})=>l.jsx("div",{style:{position:"absolute",top:t,left:e,zIndex:1e3},children:l.jsx(Ut,{onClose:n,x:e,y:t})});var ya="DismissableLayer",Nt="dismissableLayer.update",ba="dismissableLayer.pointerDownOutside",Ea="dismissableLayer.focusOutside",gn,Ro=a.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),No=a.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:o,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:c,onDismiss:i,...u}=e,g=a.useContext(Ro),[p,f]=a.useState(null),m=(p==null?void 0:p.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,h]=a.useState({}),b=te(t,C=>f(C)),y=Array.from(g.layers),[v]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),d=y.indexOf(v),x=p?y.indexOf(p):-1,E=g.layersWithOutsidePointerEventsDisabled.size>0,w=x>=d,j=Sa(C=>{const N=C.target,z=[...g.branches].some(F=>F.contains(N));!w||z||(r==null||r(C),c==null||c(C),C.defaultPrevented||i==null||i())},m),S=Ia(C=>{const N=C.target;[...g.branches].some(F=>F.contains(N))||(s==null||s(C),c==null||c(C),C.defaultPrevented||i==null||i())},m);return Ur(C=>{x===g.layers.size-1&&(o==null||o(C),!C.defaultPrevented&&i&&(C.preventDefault(),i()))},m),a.useEffect(()=>{if(p)return n&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(gn=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(p)),g.layers.add(p),hn(),()=>{n&&g.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=gn)}},[p,m,n,g]),a.useEffect(()=>()=>{p&&(g.layers.delete(p),g.layersWithOutsidePointerEventsDisabled.delete(p),hn())},[p,g]),a.useEffect(()=>{const C=()=>h({});return document.addEventListener(Nt,C),()=>document.removeEventListener(Nt,C)},[]),l.jsx(oe.div,{...u,ref:b,style:{pointerEvents:E?w?"auto":"none":void 0,...e.style},onFocusCapture:L(e.onFocusCapture,S.onFocusCapture),onBlurCapture:L(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:L(e.onPointerDownCapture,j.onPointerDownCapture)})});No.displayName=ya;var wa="DismissableLayerBranch",Ca=a.forwardRef((e,t)=>{const n=a.useContext(Ro),o=a.useRef(null),r=te(t,o);return a.useEffect(()=>{const s=o.current;if(s)return n.branches.add(s),()=>{n.branches.delete(s)}},[n.branches]),l.jsx(oe.div,{...e,ref:r})});Ca.displayName=wa;function Sa(e,t=globalThis==null?void 0:globalThis.document){const n=de(e),o=a.useRef(!1),r=a.useRef(()=>{});return a.useEffect(()=>{const s=i=>{if(i.target&&!o.current){let u=function(){Do(ba,n,g,{discrete:!0})};const g={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",r.current),r.current=u,t.addEventListener("click",r.current,{once:!0})):u()}else t.removeEventListener("click",r.current);o.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",s),t.removeEventListener("click",r.current)}},[t,n]),{onPointerDownCapture:()=>o.current=!0}}function Ia(e,t=globalThis==null?void 0:globalThis.document){const n=de(e),o=a.useRef(!1);return a.useEffect(()=>{const r=s=>{s.target&&!o.current&&Do(Ea,n,{originalEvent:s},{discrete:!1})};return t.addEventListener("focusin",r),()=>t.removeEventListener("focusin",r)},[t,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}function hn(){const e=new CustomEvent(Nt);document.dispatchEvent(e)}function Do(e,t,n,{discrete:o}){const r=n.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&r.addEventListener(e,t,{once:!0}),o?Mn(r,s):r.dispatchEvent(s)}var Ct="focusScope.autoFocusOnMount",St="focusScope.autoFocusOnUnmount",xn={bubbles:!1,cancelable:!0},Pa="FocusScope",_o=a.forwardRef((e,t)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...c}=e,[i,u]=a.useState(null),g=de(r),p=de(s),f=a.useRef(null),m=te(t,y=>u(y)),h=a.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;a.useEffect(()=>{if(o){let y=function(E){if(h.paused||!i)return;const w=E.target;i.contains(w)?f.current=w:pe(f.current,{select:!0})},v=function(E){if(h.paused||!i)return;const w=E.relatedTarget;w!==null&&(i.contains(w)||pe(f.current,{select:!0}))},d=function(E){if(document.activeElement===document.body)for(const j of E)j.removedNodes.length>0&&pe(i)};document.addEventListener("focusin",y),document.addEventListener("focusout",v);const x=new MutationObserver(d);return i&&x.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",v),x.disconnect()}}},[o,i,h.paused]),a.useEffect(()=>{if(i){yn.add(h);const y=document.activeElement;if(!i.contains(y)){const d=new CustomEvent(Ct,xn);i.addEventListener(Ct,g),i.dispatchEvent(d),d.defaultPrevented||(Ma(ja(jo(i)),{select:!0}),document.activeElement===y&&pe(i))}return()=>{i.removeEventListener(Ct,g),setTimeout(()=>{const d=new CustomEvent(St,xn);i.addEventListener(St,p),i.dispatchEvent(d),d.defaultPrevented||pe(y??document.body,{select:!0}),i.removeEventListener(St,p),yn.remove(h)},0)}}},[i,g,p,h]);const b=a.useCallback(y=>{if(!n&&!o||h.paused)return;const v=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,d=document.activeElement;if(v&&d){const x=y.currentTarget,[E,w]=Ra(x);E&&w?!y.shiftKey&&d===w?(y.preventDefault(),n&&pe(E,{select:!0})):y.shiftKey&&d===E&&(y.preventDefault(),n&&pe(w,{select:!0})):d===x&&y.preventDefault()}},[n,o,h.paused]);return l.jsx(oe.div,{tabIndex:-1,...c,ref:m,onKeyDown:b})});_o.displayName=Pa;function Ma(e,{select:t=!1}={}){const n=document.activeElement;for(const o of e)if(pe(o,{select:t}),document.activeElement!==n)return}function Ra(e){const t=jo(e),n=vn(t,e),o=vn(t.reverse(),e);return[n,o]}function jo(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:o=>{const r=o.tagName==="INPUT"&&o.type==="hidden";return o.disabled||o.hidden||r?NodeFilter.FILTER_SKIP:o.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function vn(e,t){for(const n of e)if(!Na(n,{upTo:t}))return n}function Na(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Da(e){return e instanceof HTMLInputElement&&"select"in e}function pe(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Da(e)&&t&&e.select()}}var yn=_a();function _a(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=bn(e,t),e.unshift(t)},remove(t){var n;e=bn(e,t),(n=e[0])==null||n.resume()}}}function bn(e,t){const n=[...e],o=n.indexOf(t);return o!==-1&&n.splice(o,1),n}function ja(e){return e.filter(t=>t.tagName!=="A")}var Ta="Portal",To=a.forwardRef((e,t)=>{var i;const{container:n,...o}=e,[r,s]=a.useState(!1);Mr(()=>s(!0),[]);const c=n||r&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return c?ds.createPortal(l.jsx(oe.div,{...o,ref:t}),c):null});To.displayName=Ta;var It="rovingFocusGroup.onEntryFocus",Aa={bubbles:!1,cancelable:!0},Ke="RovingFocusGroup",[Dt,Ao,La]=An(Ke),[Oa,Lo]=rt(Ke,[La]),[ka,za]=Oa(Ke),Oo=a.forwardRef((e,t)=>l.jsx(Dt.Provider,{scope:e.__scopeRovingFocusGroup,children:l.jsx(Dt.Slot,{scope:e.__scopeRovingFocusGroup,children:l.jsx(Fa,{...e,ref:t})})}));Oo.displayName=Ke;var Fa=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:o,loop:r=!1,dir:s,currentTabStopId:c,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:u,onEntryFocus:g,preventScrollOnEntryFocus:p=!1,...f}=e,m=a.useRef(null),h=te(t,m),b=Ln(s),[y,v]=Tt({prop:c,defaultProp:i??null,onChange:u,caller:Ke}),[d,x]=a.useState(!1),E=de(g),w=Ao(n),j=a.useRef(!1),[S,C]=a.useState(0);return a.useEffect(()=>{const N=m.current;if(N)return N.addEventListener(It,E),()=>N.removeEventListener(It,E)},[E]),l.jsx(ka,{scope:n,orientation:o,dir:b,loop:r,currentTabStopId:y,onItemFocus:a.useCallback(N=>v(N),[v]),onItemShiftTab:a.useCallback(()=>x(!0),[]),onFocusableItemAdd:a.useCallback(()=>C(N=>N+1),[]),onFocusableItemRemove:a.useCallback(()=>C(N=>N-1),[]),children:l.jsx(oe.div,{tabIndex:d||S===0?-1:0,"data-orientation":o,...f,ref:h,style:{outline:"none",...e.style},onMouseDown:L(e.onMouseDown,()=>{j.current=!0}),onFocus:L(e.onFocus,N=>{const z=!j.current;if(N.target===N.currentTarget&&z&&!d){const F=new CustomEvent(It,Aa);if(N.currentTarget.dispatchEvent(F),!F.defaultPrevented){const K=w().filter(H=>H.focusable),$=K.find(H=>H.active),X=K.find(H=>H.id===y),k=[$,X,...K].filter(Boolean).map(H=>H.ref.current);Fo(k,p)}}j.current=!1}),onBlur:L(e.onBlur,()=>x(!1))})})}),ko="RovingFocusGroupItem",zo=a.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:o=!0,active:r=!1,tabStopId:s,children:c,...i}=e,u=Ne(),g=s||u,p=za(ko,n),f=p.currentTabStopId===g,m=Ao(n),{onFocusableItemAdd:h,onFocusableItemRemove:b,currentTabStopId:y}=p;return a.useEffect(()=>{if(o)return h(),()=>b()},[o,h,b]),l.jsx(Dt.ItemSlot,{scope:n,id:g,focusable:o,active:r,children:l.jsx(oe.span,{tabIndex:f?0:-1,"data-orientation":p.orientation,...i,ref:t,onMouseDown:L(e.onMouseDown,v=>{o?p.onItemFocus(g):v.preventDefault()}),onFocus:L(e.onFocus,()=>p.onItemFocus(g)),onKeyDown:L(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){p.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const d=Ha(v,p.orientation,p.dir);if(d!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let E=m().filter(w=>w.focusable).map(w=>w.ref.current);if(d==="last")E.reverse();else if(d==="prev"||d==="next"){d==="prev"&&E.reverse();const w=E.indexOf(v.currentTarget);E=p.loop?Ka(E,w+1):E.slice(w+1)}setTimeout(()=>Fo(E))}}),children:typeof c=="function"?c({isCurrentTabStop:f,hasTabStop:y!=null}):c})})});zo.displayName=ko;var $a={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Ga(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function Ha(e,t,n){const o=Ga(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(o))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(o)))return $a[o]}function Fo(e,t=!1){const n=document.activeElement;for(const o of e)if(o===n||(o.focus({preventScroll:t}),document.activeElement!==n))return}function Ka(e,t){return e.map((n,o)=>e[(t+o)%e.length])}var Ua=Oo,Ba=zo;function Wa(e){const t=Va(e),n=a.forwardRef((o,r)=>{const{children:s,...c}=o,i=a.Children.toArray(s),u=i.find(Xa);if(u){const g=u.props.children,p=i.map(f=>f===u?a.Children.count(g)>1?a.Children.only(null):a.isValidElement(g)?g.props.children:null:f);return l.jsx(t,{...c,ref:r,children:a.isValidElement(g)?a.cloneElement(g,void 0,p):null})}return l.jsx(t,{...c,ref:r,children:s})});return n.displayName=`${e}.Slot`,n}function Va(e){const t=a.forwardRef((n,o)=>{const{children:r,...s}=n;if(a.isValidElement(r)){const c=Za(r),i=qa(s,r.props);return r.type!==a.Fragment&&(i.ref=o?st(o,c):c),a.cloneElement(r,i)}return a.Children.count(r)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Ya=Symbol("radix.slottable");function Xa(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Ya}function qa(e,t){const n={...t};for(const o in t){const r=e[o],s=t[o];/^on[A-Z]/.test(o)?r&&s?n[o]=(...i)=>{s(...i),r(...i)}:r&&(n[o]=r):o==="style"?n[o]={...r,...s}:o==="className"&&(n[o]=[r,s].filter(Boolean).join(" "))}return{...e,...n}}function Za(e){var o,r;let t=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var _t=["Enter"," "],Ja=["ArrowDown","PageUp","Home"],$o=["ArrowUp","PageDown","End"],Qa=[...Ja,...$o],ei={ltr:[..._t,"ArrowRight"],rtl:[..._t,"ArrowLeft"]},ti={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Ue="Menu",[$e,ni,oi]=An(Ue),[Ce,Go]=rt(Ue,[oi,On,Lo]),dt=On(),Ho=Lo(),[ri,Se]=Ce(Ue),[si,Be]=Ce(Ue),Ko=e=>{const{__scopeMenu:t,open:n=!1,children:o,dir:r,onOpenChange:s,modal:c=!0}=e,i=dt(t),[u,g]=a.useState(null),p=a.useRef(!1),f=de(s),m=Ln(r);return a.useEffect(()=>{const h=()=>{p.current=!0,document.addEventListener("pointerdown",b,{capture:!0,once:!0}),document.addEventListener("pointermove",b,{capture:!0,once:!0})},b=()=>p.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",b,{capture:!0}),document.removeEventListener("pointermove",b,{capture:!0})}},[]),l.jsx(Br,{...i,children:l.jsx(ri,{scope:t,open:n,onOpenChange:f,content:u,onContentChange:g,children:l.jsx(si,{scope:t,onClose:a.useCallback(()=>f(!1),[f]),isUsingKeyboardRef:p,dir:m,modal:c,children:o})})})};Ko.displayName=Ue;var ai="MenuAnchor",Bt=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=dt(n);return l.jsx(Wr,{...r,...o,ref:t})});Bt.displayName=ai;var Wt="MenuPortal",[ii,Uo]=Ce(Wt,{forceMount:void 0}),Bo=e=>{const{__scopeMenu:t,forceMount:n,children:o,container:r}=e,s=Se(Wt,t);return l.jsx(ii,{scope:t,forceMount:n,children:l.jsx(Ee,{present:n||s.open,children:l.jsx(To,{asChild:!0,container:r,children:o})})})};Bo.displayName=Wt;var ne="MenuContent",[li,Vt]=Ce(ne),Wo=a.forwardRef((e,t)=>{const n=Uo(ne,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,s=Se(ne,e.__scopeMenu),c=Be(ne,e.__scopeMenu);return l.jsx($e.Provider,{scope:e.__scopeMenu,children:l.jsx(Ee,{present:o||s.open,children:l.jsx($e.Slot,{scope:e.__scopeMenu,children:c.modal?l.jsx(ci,{...r,ref:t}):l.jsx(ui,{...r,ref:t})})})})}),ci=a.forwardRef((e,t)=>{const n=Se(ne,e.__scopeMenu),o=a.useRef(null),r=te(t,o);return a.useEffect(()=>{const s=o.current;if(s)return jn(s)},[]),l.jsx(Yt,{...e,ref:r,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:L(e.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),ui=a.forwardRef((e,t)=>{const n=Se(ne,e.__scopeMenu);return l.jsx(Yt,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),di=Wa("MenuContent.ScrollLock"),Yt=a.forwardRef((e,t)=>{const{__scopeMenu:n,loop:o=!1,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:c,disableOutsidePointerEvents:i,onEntryFocus:u,onEscapeKeyDown:g,onPointerDownOutside:p,onFocusOutside:f,onInteractOutside:m,onDismiss:h,disableOutsideScroll:b,...y}=e,v=Se(ne,n),d=Be(ne,n),x=dt(n),E=Ho(n),w=ni(n),[j,S]=a.useState(null),C=a.useRef(null),N=te(t,C,v.onContentChange),z=a.useRef(0),F=a.useRef(""),K=a.useRef(0),$=a.useRef(null),X=a.useRef("right"),G=a.useRef(0),k=b?_n:a.Fragment,H=b?{as:di,allowPinchZoom:!0}:void 0,ce=D=>{var P,_;const V=F.current+D,Y=w().filter(O=>!O.disabled),J=document.activeElement,I=(P=Y.find(O=>O.ref.current===J))==null?void 0:P.textValue,R=Y.map(O=>O.textValue),T=Ci(R,V,I),M=(_=Y.find(O=>O.textValue===T))==null?void 0:_.ref.current;(function O(U){F.current=U,window.clearTimeout(z.current),U!==""&&(z.current=window.setTimeout(()=>O(""),1e3))})(V),M&&setTimeout(()=>M.focus())};a.useEffect(()=>()=>window.clearTimeout(z.current),[]),Tn();const Z=a.useCallback(D=>{var Y,J;return X.current===((Y=$.current)==null?void 0:Y.side)&&Ii(D,(J=$.current)==null?void 0:J.area)},[]);return l.jsx(li,{scope:n,searchRef:F,onItemEnter:a.useCallback(D=>{Z(D)&&D.preventDefault()},[Z]),onItemLeave:a.useCallback(D=>{var V;Z(D)||((V=C.current)==null||V.focus(),S(null))},[Z]),onTriggerLeave:a.useCallback(D=>{Z(D)&&D.preventDefault()},[Z]),pointerGraceTimerRef:K,onPointerGraceIntentChange:a.useCallback(D=>{$.current=D},[]),children:l.jsx(k,{...H,children:l.jsx(_o,{asChild:!0,trapped:r,onMountAutoFocus:L(s,D=>{var V;D.preventDefault(),(V=C.current)==null||V.focus({preventScroll:!0})}),onUnmountAutoFocus:c,children:l.jsx(No,{asChild:!0,disableOutsidePointerEvents:i,onEscapeKeyDown:g,onPointerDownOutside:p,onFocusOutside:f,onInteractOutside:m,onDismiss:h,children:l.jsx(Ua,{asChild:!0,...E,dir:d.dir,orientation:"vertical",loop:o,currentTabStopId:j,onCurrentTabStopIdChange:S,onEntryFocus:L(u,D=>{d.isUsingKeyboardRef.current||D.preventDefault()}),preventScrollOnEntryFocus:!0,children:l.jsx(Vr,{role:"menu","aria-orientation":"vertical","data-state":lr(v.open),"data-radix-menu-content":"",dir:d.dir,...x,...y,ref:N,style:{outline:"none",...y.style},onKeyDown:L(y.onKeyDown,D=>{const Y=D.target.closest("[data-radix-menu-content]")===D.currentTarget,J=D.ctrlKey||D.altKey||D.metaKey,I=D.key.length===1;Y&&(D.key==="Tab"&&D.preventDefault(),!J&&I&&ce(D.key));const R=C.current;if(D.target!==R||!Qa.includes(D.key))return;D.preventDefault();const M=w().filter(P=>!P.disabled).map(P=>P.ref.current);$o.includes(D.key)&&M.reverse(),Ei(M)}),onBlur:L(e.onBlur,D=>{D.currentTarget.contains(D.target)||(window.clearTimeout(z.current),F.current="")}),onPointerMove:L(e.onPointerMove,Ge(D=>{const V=D.target,Y=G.current!==D.clientX;if(D.currentTarget.contains(V)&&Y){const J=D.clientX>G.current?"right":"left";X.current=J,G.current=D.clientX}}))})})})})})})});Wo.displayName=ne;var fi="MenuGroup",Xt=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return l.jsx(oe.div,{role:"group",...o,ref:t})});Xt.displayName=fi;var pi="MenuLabel",Vo=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return l.jsx(oe.div,{...o,ref:t})});Vo.displayName=pi;var nt="MenuItem",En="menu.itemSelect",ft=a.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:o,...r}=e,s=a.useRef(null),c=Be(nt,e.__scopeMenu),i=Vt(nt,e.__scopeMenu),u=te(t,s),g=a.useRef(!1),p=()=>{const f=s.current;if(!n&&f){const m=new CustomEvent(En,{bubbles:!0,cancelable:!0});f.addEventListener(En,h=>o==null?void 0:o(h),{once:!0}),Mn(f,m),m.defaultPrevented?g.current=!1:c.onClose()}};return l.jsx(Yo,{...r,ref:u,disabled:n,onClick:L(e.onClick,p),onPointerDown:f=>{var m;(m=e.onPointerDown)==null||m.call(e,f),g.current=!0},onPointerUp:L(e.onPointerUp,f=>{var m;g.current||(m=f.currentTarget)==null||m.click()}),onKeyDown:L(e.onKeyDown,f=>{const m=i.searchRef.current!=="";n||m&&f.key===" "||_t.includes(f.key)&&(f.currentTarget.click(),f.preventDefault())})})});ft.displayName=nt;var Yo=a.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:o=!1,textValue:r,...s}=e,c=Vt(nt,n),i=Ho(n),u=a.useRef(null),g=te(t,u),[p,f]=a.useState(!1),[m,h]=a.useState("");return a.useEffect(()=>{const b=u.current;b&&h((b.textContent??"").trim())},[s.children]),l.jsx($e.ItemSlot,{scope:n,disabled:o,textValue:r??m,children:l.jsx(Ba,{asChild:!0,...i,focusable:!o,children:l.jsx(oe.div,{role:"menuitem","data-highlighted":p?"":void 0,"aria-disabled":o||void 0,"data-disabled":o?"":void 0,...s,ref:g,onPointerMove:L(e.onPointerMove,Ge(b=>{o?c.onItemLeave(b):(c.onItemEnter(b),b.defaultPrevented||b.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:L(e.onPointerLeave,Ge(b=>c.onItemLeave(b))),onFocus:L(e.onFocus,()=>f(!0)),onBlur:L(e.onBlur,()=>f(!1))})})})}),mi="MenuCheckboxItem",Xo=a.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:o,...r}=e;return l.jsx(er,{scope:e.__scopeMenu,checked:n,children:l.jsx(ft,{role:"menuitemcheckbox","aria-checked":ot(n)?"mixed":n,...r,ref:t,"data-state":Zt(n),onSelect:L(r.onSelect,()=>o==null?void 0:o(ot(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Xo.displayName=mi;var qo="MenuRadioGroup",[gi,hi]=Ce(qo,{value:void 0,onValueChange:()=>{}}),Zo=a.forwardRef((e,t)=>{const{value:n,onValueChange:o,...r}=e,s=de(o);return l.jsx(gi,{scope:e.__scopeMenu,value:n,onValueChange:s,children:l.jsx(Xt,{...r,ref:t})})});Zo.displayName=qo;var Jo="MenuRadioItem",Qo=a.forwardRef((e,t)=>{const{value:n,...o}=e,r=hi(Jo,e.__scopeMenu),s=n===r.value;return l.jsx(er,{scope:e.__scopeMenu,checked:s,children:l.jsx(ft,{role:"menuitemradio","aria-checked":s,...o,ref:t,"data-state":Zt(s),onSelect:L(o.onSelect,()=>{var c;return(c=r.onValueChange)==null?void 0:c.call(r,n)},{checkForDefaultPrevented:!1})})})});Qo.displayName=Jo;var qt="MenuItemIndicator",[er,xi]=Ce(qt,{checked:!1}),tr=a.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:o,...r}=e,s=xi(qt,n);return l.jsx(Ee,{present:o||ot(s.checked)||s.checked===!0,children:l.jsx(oe.span,{...r,ref:t,"data-state":Zt(s.checked)})})});tr.displayName=qt;var vi="MenuSeparator",nr=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e;return l.jsx(oe.div,{role:"separator","aria-orientation":"horizontal",...o,ref:t})});nr.displayName=vi;var yi="MenuArrow",or=a.forwardRef((e,t)=>{const{__scopeMenu:n,...o}=e,r=dt(n);return l.jsx(Yr,{...r,...o,ref:t})});or.displayName=yi;var bi="MenuSub",[Ll,rr]=Ce(bi),ke="MenuSubTrigger",sr=a.forwardRef((e,t)=>{const n=Se(ke,e.__scopeMenu),o=Be(ke,e.__scopeMenu),r=rr(ke,e.__scopeMenu),s=Vt(ke,e.__scopeMenu),c=a.useRef(null),{pointerGraceTimerRef:i,onPointerGraceIntentChange:u}=s,g={__scopeMenu:e.__scopeMenu},p=a.useCallback(()=>{c.current&&window.clearTimeout(c.current),c.current=null},[]);return a.useEffect(()=>p,[p]),a.useEffect(()=>{const f=i.current;return()=>{window.clearTimeout(f),u(null)}},[i,u]),l.jsx(Bt,{asChild:!0,...g,children:l.jsx(Yo,{id:r.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":r.contentId,"data-state":lr(n.open),...e,ref:st(t,r.onTriggerChange),onClick:f=>{var m;(m=e.onClick)==null||m.call(e,f),!(e.disabled||f.defaultPrevented)&&(f.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:L(e.onPointerMove,Ge(f=>{s.onItemEnter(f),!f.defaultPrevented&&!e.disabled&&!n.open&&!c.current&&(s.onPointerGraceIntentChange(null),c.current=window.setTimeout(()=>{n.onOpenChange(!0),p()},100))})),onPointerLeave:L(e.onPointerLeave,Ge(f=>{var h,b;p();const m=(h=n.content)==null?void 0:h.getBoundingClientRect();if(m){const y=(b=n.content)==null?void 0:b.dataset.side,v=y==="right",d=v?-5:5,x=m[v?"left":"right"],E=m[v?"right":"left"];s.onPointerGraceIntentChange({area:[{x:f.clientX+d,y:f.clientY},{x,y:m.top},{x:E,y:m.top},{x:E,y:m.bottom},{x,y:m.bottom}],side:y}),window.clearTimeout(i.current),i.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(f),f.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:L(e.onKeyDown,f=>{var h;const m=s.searchRef.current!=="";e.disabled||m&&f.key===" "||ei[o.dir].includes(f.key)&&(n.onOpenChange(!0),(h=n.content)==null||h.focus(),f.preventDefault())})})})});sr.displayName=ke;var ar="MenuSubContent",ir=a.forwardRef((e,t)=>{const n=Uo(ne,e.__scopeMenu),{forceMount:o=n.forceMount,...r}=e,s=Se(ne,e.__scopeMenu),c=Be(ne,e.__scopeMenu),i=rr(ar,e.__scopeMenu),u=a.useRef(null),g=te(t,u);return l.jsx($e.Provider,{scope:e.__scopeMenu,children:l.jsx(Ee,{present:o||s.open,children:l.jsx($e.Slot,{scope:e.__scopeMenu,children:l.jsx(Yt,{id:i.contentId,"aria-labelledby":i.triggerId,...r,ref:g,align:"start",side:c.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:p=>{var f;c.isUsingKeyboardRef.current&&((f=u.current)==null||f.focus()),p.preventDefault()},onCloseAutoFocus:p=>p.preventDefault(),onFocusOutside:L(e.onFocusOutside,p=>{p.target!==i.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:L(e.onEscapeKeyDown,p=>{c.onClose(),p.preventDefault()}),onKeyDown:L(e.onKeyDown,p=>{var h;const f=p.currentTarget.contains(p.target),m=ti[c.dir].includes(p.key);f&&m&&(s.onOpenChange(!1),(h=i.trigger)==null||h.focus(),p.preventDefault())})})})})})});ir.displayName=ar;function lr(e){return e?"open":"closed"}function ot(e){return e==="indeterminate"}function Zt(e){return ot(e)?"indeterminate":e?"checked":"unchecked"}function Ei(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function wi(e,t){return e.map((n,o)=>e[(t+o)%e.length])}function Ci(e,t,n){const r=t.length>1&&Array.from(t).every(g=>g===t[0])?t[0]:t,s=n?e.indexOf(n):-1;let c=wi(e,Math.max(s,0));r.length===1&&(c=c.filter(g=>g!==n));const u=c.find(g=>g.toLowerCase().startsWith(r.toLowerCase()));return u!==n?u:void 0}function Si(e,t){const{x:n,y:o}=e;let r=!1;for(let s=0,c=t.length-1;s<t.length;c=s++){const i=t[s],u=t[c],g=i.x,p=i.y,f=u.x,m=u.y;p>o!=m>o&&n<(f-g)*(o-p)/(m-p)+g&&(r=!r)}return r}function Ii(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return Si(n,t)}function Ge(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Pi=Ko,Mi=Bt,Ri=Bo,Ni=Wo,Di=Xt,_i=Vo,ji=ft,Ti=Xo,Ai=Zo,Li=Qo,Oi=tr,ki=nr,zi=or,Fi=sr,$i=ir,pt="DropdownMenu",[Gi,Ol]=rt(pt,[Go]),q=Go(),[Hi,cr]=Gi(pt),ur=e=>{const{__scopeDropdownMenu:t,children:n,dir:o,open:r,defaultOpen:s,onOpenChange:c,modal:i=!0}=e,u=q(t),g=a.useRef(null),[p,f]=Tt({prop:r,defaultProp:s??!1,onChange:c,caller:pt});return l.jsx(Hi,{scope:t,triggerId:Ne(),triggerRef:g,contentId:Ne(),open:p,onOpenChange:f,onOpenToggle:a.useCallback(()=>f(m=>!m),[f]),modal:i,children:l.jsx(Pi,{...u,open:p,onOpenChange:f,dir:o,modal:i,children:n})})};ur.displayName=pt;var dr="DropdownMenuTrigger",fr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:o=!1,...r}=e,s=cr(dr,n),c=q(n);return l.jsx(Mi,{asChild:!0,...c,children:l.jsx(oe.button,{type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":o?"":void 0,disabled:o,...r,ref:st(t,s.triggerRef),onPointerDown:L(e.onPointerDown,i=>{!o&&i.button===0&&i.ctrlKey===!1&&(s.onOpenToggle(),s.open||i.preventDefault())}),onKeyDown:L(e.onKeyDown,i=>{o||(["Enter"," "].includes(i.key)&&s.onOpenToggle(),i.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(i.key)&&i.preventDefault())})})})});fr.displayName=dr;var Ki="DropdownMenuPortal",pr=e=>{const{__scopeDropdownMenu:t,...n}=e,o=q(t);return l.jsx(Ri,{...o,...n})};pr.displayName=Ki;var mr="DropdownMenuContent",gr=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=cr(mr,n),s=q(n),c=a.useRef(!1);return l.jsx(Ni,{id:r.contentId,"aria-labelledby":r.triggerId,...s,...o,ref:t,onCloseAutoFocus:L(e.onCloseAutoFocus,i=>{var u;c.current||(u=r.triggerRef.current)==null||u.focus(),c.current=!1,i.preventDefault()}),onInteractOutside:L(e.onInteractOutside,i=>{const u=i.detail.originalEvent,g=u.button===0&&u.ctrlKey===!0,p=u.button===2||g;(!r.modal||p)&&(c.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});gr.displayName=mr;var Ui="DropdownMenuGroup",Bi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(Di,{...r,...o,ref:t})});Bi.displayName=Ui;var Wi="DropdownMenuLabel",Vi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(_i,{...r,...o,ref:t})});Vi.displayName=Wi;var Yi="DropdownMenuItem",Xi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(ji,{...r,...o,ref:t})});Xi.displayName=Yi;var qi="DropdownMenuCheckboxItem",Zi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(Ti,{...r,...o,ref:t})});Zi.displayName=qi;var Ji="DropdownMenuRadioGroup",Qi=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(Ai,{...r,...o,ref:t})});Qi.displayName=Ji;var el="DropdownMenuRadioItem",tl=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(Li,{...r,...o,ref:t})});tl.displayName=el;var nl="DropdownMenuItemIndicator",ol=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(Oi,{...r,...o,ref:t})});ol.displayName=nl;var rl="DropdownMenuSeparator",sl=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(ki,{...r,...o,ref:t})});sl.displayName=rl;var al="DropdownMenuArrow",il=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(zi,{...r,...o,ref:t})});il.displayName=al;var ll="DropdownMenuSubTrigger",cl=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx(Fi,{...r,...o,ref:t})});cl.displayName=ll;var ul="DropdownMenuSubContent",dl=a.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...o}=e,r=q(n);return l.jsx($i,{...r,...o,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});dl.displayName=ul;const fl=({rfInstance:e})=>{const{getNodes:t,getEdges:n,setViewport:o,setEdges:r,setNodes:s}=we();Ae(u=>u.debugPrint);const[c,i]=a.useState(!1);return l.jsxs(Lt,{position:"top-right",className:"flex flex-col items-end justify-center gap-2",children:[l.jsxs(ur,{open:c,onOpenChange:i,children:[l.jsx(fr,{asChild:!0,children:l.jsx(qe,{side:"left",tooltip:"Add Node","aria-label":"Add Node",children:l.jsx(Rr,{className:"text-white"})})}),l.jsx(pr,{children:l.jsx(gr,{align:"end",children:l.jsx(Ut,{onClose:()=>i(!1),x:1800,y:400})})})]}),!1]})},pl=({nodeIds:e,x:t,y:n,onClose:o})=>{const{getNodes:r,getEdges:s,addNodes:c,addEdges:i,setNodes:u,setEdges:g}=we(),p=a.useCallback(()=>{const m=r().filter(d=>e.includes(d.id)),h=s(),b=new Map,y=m.map(d=>{const x=At();return b.set(d.id,x),{...d,id:x,position:{x:d.position.x+50,y:d.position.y+50},selected:!1,dragging:!1}}),v=h.filter(d=>b.has(d.source)&&b.has(d.target)).map(d=>{const x=b.get(d.source),E=b.get(d.target),w=Tr({source:x,sourceHandle:d.sourceHandle,target:E,targetHandle:d.targetHandle});return{...d,id:w,source:x,target:E,selected:!1}});c(y),i(v),u(d=>d.map(x=>({...x,selected:y.some(E=>E.id===x.id)}))),o()},[e,r,s,c,i,u,o]),f=a.useCallback(()=>{u(m=>m.filter(h=>!e.includes(h.id))),g(m=>m.filter(h=>!e.includes(h.source)&&!e.includes(h.target))),o()},[e,u,g,o]);return l.jsx("div",{style:{position:"absolute",top:n,left:t,zIndex:1e3},children:l.jsxs(Lt,{className:"flex w-55 flex-col gap-1 rounded bg-slate-800 p-2 font-mono shadow-lg outline-1 outline-slate-700 outline-solid",children:[l.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:p,children:[l.jsxs("span",{children:["Duplicate ",e.length," nodes "]}),l.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Ctrl+D"})]}),l.jsxs("button",{className:"w-full rounded px-2 py-1 text-left text-sm text-white hover:bg-slate-700",onClick:f,children:[l.jsxs("span",{children:["Delete ",e.length," nodes "]}),l.jsx("span",{className:"ml-2 rounded bg-slate-600 px-1.5 py-0.5 font-mono text-xs text-gray-300",children:"Del"})]})]})})};function ml(){const[e,t]=a.useState(null),[n,o]=a.useState(null),[r,s]=a.useState(null),c=a.useCallback(p=>{p.preventDefault();const f=gt(p);t({x:f.x,y:f.y})},[t]),i=a.useCallback((p,f)=>{p.preventDefault();const m=gt(p);o({nodeId:f.id,nodeType:f.type,nodeLoopId:f.data.loopId,x:m.x,y:m.y})},[o]),u=a.useCallback((p,f)=>{if(p.preventDefault(),f.length===0)return;const m=gt(p);s({nodeIds:f.map(h=>h.id),x:m.x,y:m.y})},[s]),g=a.useCallback(()=>{t(null),o(null),s(null)},[t,o,s]);return{paneContextMenu:e,nodeContextMenu:n,selectionContextMenu:r,setPaneContextMenu:t,setNodeContextMenu:o,setSelectionContextMenu:s,handlePaneContextMenu:c,handleNodeContextMenu:i,handleSelectionContextMenu:u,onPaneClick:g}}const wn=e=>Symbol.iterator in e,Cn=e=>"entries"in e,Sn=(e,t)=>{const n=e instanceof Map?e:new Map(e.entries()),o=t instanceof Map?t:new Map(t.entries());if(n.size!==o.size)return!1;for(const[r,s]of n)if(!Object.is(s,o.get(r)))return!1;return!0},gl=(e,t)=>{const n=e[Symbol.iterator](),o=t[Symbol.iterator]();let r=n.next(),s=o.next();for(;!r.done&&!s.done;){if(!Object.is(r.value,s.value))return!1;r=n.next(),s=o.next()}return!!r.done&&!!s.done};function hl(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:!wn(e)||!wn(t)?Sn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(t)}):Cn(e)&&Cn(t)?Sn(e,t):gl(e,t)}function xl(e){const t=In.useRef(void 0);return n=>{const o=e(n);return hl(t.current,o)?t.current:t.current=o}}const vl=e=>({nodes:e.nodes,setNodes:e.setNodes,highlightDuplicateNodes:e.highlightDuplicateNodes});function yl(){const{getIntersectingNodes:e,getNode:t,getNodes:n}=we(),{nodes:o,setNodes:r,highlightDuplicateNodes:s}=Ar(xl(vl)),[c,i]=a.useState(Lr),u=Ae(v=>v.replaceNode),g=Ae(v=>v.removeNode),p=Ae(v=>v.addEdge),f=Ae(v=>v.removeEdge),m=a.useCallback(v=>{let d=!1;v.forEach(x=>{switch(x.type){case"add":u(x.item),d=x.item.type==="ExportToGameobject";break;case"remove":{const E=t(x.id);if(E!=null&&E.data.loopStart||E!=null&&E.data.loopEnd){const w=n().filter(j=>j.id!==x.id&&j.data.loopId===E.data.loopId)[0];r(j=>j.filter(S=>S.data.loopId!==(E==null?void 0:E.data.loopId)).map(S=>({...S,data:{...S.data,parentLoopId:S.data.parentLoopId===E.data.loopId?void 0:S.data.parentLoopId}}))),i(j=>j.filter(S=>S.target===w.id||S.source===w.id?(f(S.id),!1):!0)),g(w.id)}g(x.id),d=!0;break}case"replace":u(x.item),d=x.item.type==="ExportToGameobject";break}}),r(x=>Or(v,x)),d&&s()},[r,u,s,t,g,n,f]),h=a.useCallback(v=>{v.forEach(d=>{switch(d.type){case"remove":f(d.id);break;case"add":p(d.item);break}}),i(d=>Xr(v,d))},[i,p,f]),b=a.useCallback(v=>{const d=t(v.source),x=t(v.target);!!(d!=null&&d.data.loopStart&&d.data.loopId===(x==null?void 0:x.data.loopId)||d!=null&&d.data.loopStart&&(x==null?void 0:x.data.parentLoopId)===d.data.loopId||d!=null&&d.data.loopEnd&&d.data.parentLoopId===(x==null?void 0:x.data.parentLoopId)||x!=null&&x.data.loopEnd&&(d==null?void 0:d.data.parentLoopId)===x.data.loopId||!(d!=null&&d.data.loopStart)&&!(x!=null&&x.data.loopEnd)&&(d==null?void 0:d.data.parentLoopId)===(x==null?void 0:x.data.parentLoopId))&&(p(v),i(w=>qr(v,w)))},[i,t,p]);return{nodes:o,edges:c,onNodesChange:m,onEdgesChange:h,onConnect:b,onNodeDragStop:(v,d)=>{var X;if(d.type==="Group")return;const x=(X=e(d))==null?void 0:X[0];if((!x||x.type!=="Group")&&d.parentId){r(G=>G.map(k=>{if(k.id===d.id){const H=G.find(Z=>Z.id===d.parentId);if(!H)return k;const ce={x:k.position.x+H.position.x,y:k.position.y+H.position.y};return{...k,position:ce,parentId:void 0}}return k}));return}if(!x||x.type!=="Group")return;let E=d.position;if(d.parentId){const G=d.parentId===x.id?x:t(d.parentId);E={x:d.position.x+G.position.x,y:d.position.y+G.position.y}}const w=20,j=x.position.x-E.x+w,S=x.position.y-E.y+w,C={x:x.position.x-Math.max(j,0),y:x.position.y-Math.max(S,0)};let N=x.measured.width+Math.max(j,0),z=x.measured.height+Math.max(S,0);const F={x:E.x-C.x,y:E.y-C.y},K=F.x+d.measured.width+20,$=F.y+d.measured.height+20;N=Math.max(K,N),z=Math.max($,z),r(G=>G.map(k=>k.id===d.id?{...k,parentId:x.id,position:F}:k.id===x.id?{...k,position:C,width:N,height:z,data:{isParent:!0},style:{zIndex:-1}}:k))}}}const bl=a.memo(({id:e,data:t})=>{const n=Me(h=>h.gameObjects),o=Array.from(n.keys()),{isOpen:r,getToggleButtonProps:s,getMenuProps:c,getLabelProps:i,highlightedIndex:u,getItemProps:g,selectedGameObjects:p}=kn(o,t.selectedGameObjects?t.selectedGameObjects:[o[0]],e),f=a.useMemo(()=>Dn("get",n,p),[n,p]),{updateNodeData:m}=we();return a.useEffect(()=>{m(e,{compute:(h,b)=>{const y=p.length===1?0:Pt(h,Ze,-1);if(0>y||y>=p.length){b.clear();return}const v=p[y];f.forEach(d=>{b.set(d,n.get(v).get(d).value)})},selectedGameObjects:p})},[p]),l.jsx("div",{className:"min-w-48",children:l.jsxs(zn,{label:"Import From Gameobject",type:"import",docsName:"import",children:[l.jsxs("div",{className:"text-left",children:[p.length>1&&l.jsx(Fn,{id:Ze,position:Je.Left}),l.jsx($n,{highlightedIndex:u,isOpen:r,selectableObjects:o,selectedObjects:p,useSelectProps:{getItemProps:g,getLabelProps:i,getMenuProps:c,getToggleButtonProps:s}})]}),f.map(h=>l.jsx(Gn,{id:h,position:Je.Right,label:h},h))]})})}),El=a.memo(({id:e,data:t,selected:n})=>{const o=xe(w=>w.currentLevel),r=_e[o].modifiableGameObjects,s=Me(w=>w.gameObjects),c=Array.from(s.keys()),{isOpen:i,getToggleButtonProps:u,getMenuProps:g,getLabelProps:p,highlightedIndex:f,getItemProps:m,selectedGameObjects:h}=kn(c,t.selectedGameObjects?t.selectedGameObjects:[c[0]],e),b=a.useMemo(()=>Dn("set",s,h),[s,h]),y=Me(w=>w.setData),v=Me(w=>w.addHandle),d=Me(w=>w.removeHandle),x=a.useRef(t.curLabel?t.curLabel.current:""),{updateNodeData:E}=we();return a.useEffect(()=>{E(e,{compute:(w,j)=>{const S=h.length===1?0:Pt(w,Ze,-1);if(0>S||S>=h.length)return;const C=h[S];b.forEach(N=>{y(C,N,Pt(w,N,0))})},selectedGameObjects:h})},[h]),l.jsx("div",{children:l.jsxs(zn,{label:"Export To Gameobject",type:"export",docsName:"export",children:[l.jsxs("div",{className:"text-left",children:[h.length>1&&l.jsx(Fn,{id:Ze,position:Je.Left}),l.jsx($n,{highlightedIndex:f,isOpen:i,selectableObjects:c,selectedObjects:h,useSelectProps:{getItemProps:m,getLabelProps:p,getMenuProps:g,getToggleButtonProps:u}})]}),b.map(w=>l.jsxs("div",{className:"flex w-full items-center [&>*:nth-child(even)]:pointer-events-none [&>*:nth-child(even)]:opacity-0 hover:[&>*:nth-child(even)]:pointer-events-auto hover:[&>*:nth-child(even)]:opacity-100 "+(n?"hover:bg-slate-800":"hover:bg-slate-700"),children:[l.jsx(Gn,{id:w,position:Je.Left,label:w},w),!r.some(({id:j,connections:S})=>h.includes(j)&&S.some(C=>C.label===w))&&l.jsx(Nr,{className:"mt-[1px] ml-2 cursor-pointer text-red-400",onClick:()=>{h.forEach(j=>d(j,w))}})]},w)),h.length&&l.jsx(Zr,{addHandle:v,handleIdentifiers:h,handleLabel:x,nodeId:e,updateNodeData:E})]})})}),wl={Value:as,Display:ss,Time:rs,KeyPress:os,MathFloat:ns,ExportToGameobject:El,ImportFromGameobject:bl,Switch:ts,Group:es,ForStart:Qr,ForEnd:Jr},We=new Map;We.set("Game Get",{nodes:[{name:"Key Press",type:"KeyPress",description:"Get key press events."},{name:"Time",type:"Time",description:"Get time-related information."},{name:"Get From Gameobject",type:"GetFromGameobject",description:"Get data from a game object."}]});We.set("Game Set",{nodes:[{name:"Export To Gameobject",type:"ExportToGameobject",description:"Export data to a game object."}]});We.set("Math Float",{nodes:[{name:"Math Float",type:"MathFloat",description:"Perform mathematical operations on float values."},{name:"Value",type:"Value",description:"Output a float value."}]});We.set("Logic",{nodes:[{name:"Switch",type:"Switch",description:"Conditional logic node."}]});We.set("Debug",{nodes:[{name:"Display",type:"Display",description:"Display a value on the screen."}]});const Cl=()=>{const[e,t]=a.useState(),{nodes:n,edges:o,onNodesChange:r,onEdgesChange:s,onConnect:c,onNodeDragStop:i}=yl(),{paneContextMenu:u,nodeContextMenu:g,selectionContextMenu:p,handlePaneContextMenu:f,handleNodeContextMenu:m,handleSelectionContextMenu:h,onPaneClick:b,setNodeContextMenu:y,setPaneContextMenu:v,setSelectionContextMenu:d}=ml();return l.jsxs(l.Fragment,{children:[l.jsxs(cs,{id:"node-editor",onInit:t,nodeTypes:wl,nodes:n,edges:o,onNodesChange:r,onEdgesChange:s,onPaneContextMenu:f,onNodeContextMenu:m,onSelectionContextMenu:h,onConnect:c,onPaneClick:b,disableKeyboardA11y:!0,fitView:!0,proOptions:{hideAttribution:!0},deleteKeyCode:["Delete","Backspace"],onNodeDragStop:i,children:[l.jsx(us,{bgColor:"#14141d",color:"#a7abc2"}),l.jsx(fl,{rfInstance:e}),l.jsx(ha,{}),l.jsx(kr,{})]}),u&&l.jsx(va,{x:u.x,y:u.y,onClose:()=>v(null)}),g&&l.jsx(xa,{nodeId:g.nodeId,nodeType:g.nodeType,nodeLoopId:g.nodeLoopId,x:g.x,y:g.y,onClose:()=>y(null)}),p&&l.jsx(pl,{nodeIds:p.nodeIds,x:p.x,y:p.y,onClose:()=>d(null)})]})},Sl=()=>l.jsx(is,{children:l.jsx(ls,{children:l.jsx(Cl,{})})}),Il=({params:e})=>{const t=a.useRef(null),n=xe(r=>r.setCurrentLevel),o=e.id||"playground";return n(o),a.useEffect(()=>{if(t.current)return en.init(),_r(t.current),Fs(o),()=>{jr(),en.cleanup()}},[]),l.jsxs(l.Fragment,{children:[l.jsx(Mo,{defaultOpen:!0}),l.jsxs(ao,{direction:"horizontal",children:[l.jsx(Mt,{id:"game-panel",minSize:25,order:1,children:l.jsx("canvas",{id:"game-canvas",ref:t,className:"w-1/2"})}),l.jsx(io,{className:"flex w-2 items-center justify-center bg-slate-800",children:l.jsx(Dr,{width:32,height:32,className:"scale-125 text-slate-400"})}),l.jsx(Mt,{id:"nodes-panel",minSize:25,order:2,children:l.jsx(Sl,{})})]})]})},kl=vr(Il);export{kl as default};
